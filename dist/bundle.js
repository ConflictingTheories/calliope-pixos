/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={183:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(348),i=n(180);function o(t,e,n){return o=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i},o.apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}const f={init:(h=regeneratorRuntime.mark((function t(e,n,s,a,u){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading - change zone"),t.next=3,this.sprite.zone.world.loadZone(e);case 3:return this.fromZone=t.sent,t.next=6,this.sprite.zone.world.loadZone(s);case 6:this.toZone=t.sent,this.from=o(r.OW,c(n)),this.to=o(r.OW,c(a)),this.facing=i.N.fromOffset([Math.round(a.x-n.x),Math.round(a.y-n.y)]),this.length=u;case 11:case"end":return t.stop()}}),t,this)})),p=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=h.apply(t,e);function o(t){l(i,n,r,o,s,"next",t)}function s(t){l(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t,e,n,r,i){return p.apply(this,arguments)}),tick:function(t){if(this.toZone.loaded&&this.fromZone.loaded){this.facing&&this.facing!=this.sprite.facing&&(this.sprite.facing=this.facing,this.sprite.setFrame(0));var e=this.startTime+this.length,n=(t-this.startTime)/this.length;t>=e?((0,r.t8)(this.to,this.sprite.pos),n=1):(0,r.t7)(this.from,this.to,n,this.sprite.pos);var i=Math.floor(4*n);i!=this.sprite.animFrame&&this.sprite.setFrame(i),this.sprite.zone.isInZone(this.sprite.pos.x,this.sprite.pos.y)||(this.fromZone.removeSprite(this.sprite.id),this.sprite.zone.world.runAfterTick(function(){this.toZone.addSprite(this.sprite),console.log("sprite '"+this.sprite.id+"' changed zone from '"+this.fromZone.id+"' to '"+this.toZone.id+"'")}.bind(this)));var o=this.sprite.pos.x+this.sprite.hotspotOffset.x,s=this.sprite.pos.y+this.sprite.hotspotOffset.y;return this.switchRenderZone||this.fromZone.isInZone(o,s)||(this.switchRenderZone=!0),this.sprite.pos.z=(this.switchRenderZone?this.toZone:this.fromZone).getHeight(o,s),t>=e}}};var h,p},317:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={init:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("loading - chat"),this.engine=this.sprite.engine,this.text="",this.prompt=t,this.scrolling=e,this.line=0,this.options=n,this.completed=!1,this.lastKey=(new Date).getTime()},tick:function(t){var e;if(this.loaded)return this.options&&this.options.autoclose&&(this.endTime=this.endTime?this.endTime:null!==(e=this.options.endTime)&&void 0!==e?e:(new Date).getTime()+1e4,t>this.endTime&&(this.completed=!0)),this.checkInput(t),this.textbox=this.engine.scrollText(this.prompt+this.text,this.scrolling,this.options),this.completed},checkInput:function(t){if(t>this.lastKey+100){var e=!1;switch(this.engine.keyboard.lastPressedCode()){case"Escape":this.completed=!0,e=!0;break;case"Backspace":var n=this.text.split("");n.pop(),this.text=n.join(""),this.lastKey=t,e=!0;break;case"Enter":this.engine.setGreeting(this.text),this.sprite.speech.clearHud(),this.speechbox=this.sprite.speech.scrollText(this.text),this.sprite.speech.loadImage(),this.completed=!0,e=!0}if(!e){var r=this.engine.keyboard.lastPressedKey();r&&(this.lastKey=t,this.text+=""+r)}}}}},282:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={init:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("loading - dialogue"),this.engine=this.sprite.engine,this.text=t,this.displayText="string"==typeof t?t:this.text.shift(),this.scrolling=e,this.options=n,this.completed=!1,this.lastText=!1,this.lastKey=(new Date).getTime(),this.loaded=!0},tick:function(t){var e;if(this.loaded)return this.options&&this.options.autoclose&&(this.endTime=this.endTime?this.endTime:null!==(e=this.options.endTime)&&void 0!==e?e:(new Date).getTime()+1e4,t>this.endTime&&(this.completed=!0)),this.checkInput(t),console.log(this.displayText,this.text),this.sprite.speak(this.displayText),this.completed&&this.options.onClose&&(this.sprite.speech.clearHud(),this.options.onClose()),this.completed},checkInput:function(t){if(t>this.lastKey+100)switch(this.engine.keyboard.lastPressedCode()){case"Escape":console.log("closing dialogue"),this.sprite.speak(!1),this.completed=!0;break;case"Enter":"string"==typeof this.text||0===this.text.length?this.completed=!0:(this.completed=!1,this.displayText=this.text.shift(),this.sprite.speak(this.displayText))}}}},813:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={init:function(t){console.log("loading - face"),this.facing=t},tick:function(t){return this.facing&&this.facing!=this.sprite.facing&&this.sprite.setFacing(this.facing),!0}}},162:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("loading - greeting"),this.engine=this.sprite.engine,this.greeting=t,this.options=e,this.completed=!1},tick:function(t){if(this.loaded)return this.engine.setGreeting(this.text),!0}}},544:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var r=n(348),i=n(180);function o(t,e,n){return o=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i},o.apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const l={init:function(t,e,n){var s=this;console.log("loading - interact",arguments),this.world=n,this.from=o(r.OW,c(t)),this.facing=e,this.offset=i.N.toOffset(e),this.lastKey=(new Date).getTime(),this.completed=!1,this.to=[t[0]+this.offset[0],t[1]+this.offset[1]],this.zone=n.zoneContaining.apply(n,c(this.to)),this.spriteList=this.zone.spriteList.filter((function(t){return t.pos.x===s.to[0]&&t.pos.y===s.to[1]})),this.finish=this.finish.bind(this),this.interact()},interact:function(){var t=this;0===this.spriteList.length&&(this.completed=!0),this.spriteList.forEach((function(e){var n=e.faceDir(i.N.reverse(t.facing));return n&&e.addAction(n),e.interact?t.zone.spriteDict[e.id].interact(t.finish):null}))},finish:function(t){t&&(this.completed=!0)},tick:function(t){if(this.loaded)return this.checkInput(t),this.completed},checkInput:function(t){if(t>this.lastKey+this.length)return"q"===this.sprite.engine.keyboard.lastPressed("q")&&(console.log("stopping interaction"),this.completed=!0),this.lastKey=(new Date).getTime(),null}}},897:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var r=n(348),i=n(180);function o(t,e,n){return o=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i},o.apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const l={init:function(t,e,n){console.log("loading - move"),this.from=o(r.OW,c(t)),this.to=o(r.OW,c(e)),this.facing=i.N.fromOffset([Math.round(e.x-t.x),Math.round(e.y-t.y)]),this.length=n},tick:function(t){if(this.loaded){this.facing&&this.facing!=this.sprite.facing&&this.sprite.setFacing(this.facing);var e=this.startTime+this.length,n=(t-this.startTime)/this.length;t>=e?((0,r.t8)(this.to,this.sprite.pos),n=1):(0,r.t7)(this.from,this.to,n,this.sprite.pos);var i=Math.floor(4*n);i!=this.sprite.animFrame&&this.sprite.setFrame(i);var o=this.sprite.pos.x+this.sprite.hotspotOffset.x,s=this.sprite.pos.y+this.sprite.hotspotOffset.y;return this.sprite.pos.z=this.sprite.zone.getHeight(o,s),t>=e}}}},704:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var r=n(348),i=n(337),o=n(180);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e,n){return a=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i},a.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const p={init:function(t,e,n,o){console.log("loading - patrol",arguments),this.zone=o,this.from=a(r.OW,l(t)),this.to=a(r.OW,l(e)),this.lastKey=(new Date).getTime(),this.completed=!1,this.direction=1,this.audio=new i.mT("/pixos/audio/seed.mp3");var c=this.sprite.zone.world.pathFind(t,e),u=s(c,2);this.hasMoves=u[0],this.moveList=u[1],this.hasMoves||(this.completed=!0),this.moveIndex=1,this.moveLength=n,this.zone.audio&&this.zone.audio.pauseAudio(),this.audio.playAudio()},tick:function(t){if(this.loaded){if(this.checkInput(t),t>this.startTime+this.moveLength){var e=this.moveList[this.moveIndex];if(this.moveList.length>2){var n=0==this.moveIndex?this.moveList[this.moveIndex+1]:this.moveIndex+1>=this.moveList.length?this.moveList[this.moveList.length-1]:this.moveList[this.moveIndex-1],r=o.N.fromOffset([Math.round(e[0]-n[0]),Math.round(e[1]-n[1])]);if(this.sprite.zone.isInZone(e[0],e[1]))this.currentAction=new i.aW(this.sprite.engine,"move",[n,e,this.moveLength],this.sprite);else{var s=this.sprite.zone.world.zoneContaining(e[0],e[1]);s&&s.loaded&&s.isWalkable(e[0],e[1],o.N.reverse(r))?this.currentAction=new i.aW(this.sprite.engine,"changezone",[this.sprite.zone.id,this.sprite.pos.toArray(),s.id,e,this.moveLength],this.sprite):this.currentAction=this.sprite.faceDir(r)}this.currentAction&&(this.currentAction.facing=r,this.sprite.addAction(this.currentAction))}this.moveIndex+this.direction>=this.moveList.length&&(this.direction*=-1,this.completed=!0,this.zone.audio&&this.zone.audio.playAudio(),this.audio.pauseAudio()),this.moveIndex+=this.direction,this.startTime=t}return this.completed}},checkInput:function(t){if(t>this.lastKey+this.moveLength)return"q"===this.sprite.engine.keyboard.lastPressed("q")&&(console.log("stopping patrol"),this.audio.pauseAudio(),this.completed=!0),this.lastKey=(new Date).getTime(),null}}},744:(t,e,n)=>{"use strict";function r(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}n.r(e),n.d(e,{default:()=>i});const i={init:function(t,e,n){console.log("loading - script",arguments),this.zone=e,this.world=e.world,this.lastKey=(new Date).getTime(),this.completed=!1,this.onComplete=n,this.triggerId=t,this.triggerScript()},triggerScript:function(){var t=this;this.triggerId||(this.completed=!0),Promise.all(this.zone.scripts.filter((function(e){return e.id===t.triggerId})).map(function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.trigger.call(t.zone);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(t){r(s,i,o,a,c,"next",t)}function c(t){r(s,i,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}())),this.completed=!0},tick:function(t){if(this.loaded)return this.completed&&this.onComplete(),this.completed}}},408:(t,e,n)=>{"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>i});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actions=[]}var e,n;return e=t,n=[{key:"add",value:function(t){this.actions.push(t)}},{key:"run",value:function(){var t=arguments;this.actions=this.actions.filter((function(e){return e(t)}))}}],n&&r(e.prototype,n),t}()},870:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(348),i=n(180),o=n(408),s=n(337),a=n(175);function c(t,e,n){return c=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i},c.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e,this.templateLoaded=!1,this.drawOffset=new r.OW(0,0,0),this.hotspotOffset=new r.OW(0,0,0),this.animFrame=0,this.pos=new r.OW(0,0,0),this.facing=i.N.Right,this.actionDict={},this.actionList=[],this.onLoadActions=new o.Z,this.getTexCoords=this.getTexCoords.bind(this)}var e,n;return e=t,n=[{key:"update",value:function(t){Object.assign(this,t)}},{key:"runWhenLoaded",value:function(t){this.loaded?t():this.onLoadActions.add(t)}},{key:"onLoad",value:function(t){this.loaded||(this.src&&this.sheetSize&&this.tileSize&&this.frames?(this.zone=t.zone,t.id&&(this.id=t.id),t.pos&&(0,r.t8)(t.pos,this.pos),t.facing&&0!==t.facing&&(this.facing=t.facing),console.log("facing",i.N.spriteSequence(this.facing)),this.texture=this.engine.loadTexture(this.src),this.texture.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this)),this.vertexTexBuf=this.engine.createBuffer(this.getTexCoords(),this.engine.gl.DYNAMIC_DRAW,2),this.enableSpeech&&(this.speech=this.engine.loadSpeech(this.id,this.engine.mipmap),this.speech.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this)),this.speechTexBuf=this.engine.createBuffer(this.getSpeechBubbleTexture(),this.engine.gl.DYNAMIC_DRAW,2)),this.zone.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this))):console.error("Invalid sprite definition"))}},{key:"onTilesetDefinitionLoaded",value:function(){var t=this.zone.tileset.tileSize,e=[this.tileSize[0]/t,this.tileSize[1]/t],n=[[0,0,0],[e[0],0,0],[e[0],0,e[1]],[0,0,e[1]]],r=[[n[2],n[3],n[0]],[n[2],n[0],n[1]]].flat(3);this.vertexPosBuf=this.engine.createBuffer(r,this.engine.gl.STATIC_DRAW,3),this.enableSpeech&&(this.speechVerBuf=this.engine.createBuffer(this.getSpeechBubbleVertices(),this.engine.gl.STATIC_DRAW,3)),this.zone.tileset.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this))}},{key:"onTilesetOrTextureLoaded",value:function(){!this.loaded&&this.zone.tileset.loaded&&this.texture.loaded&&(this.init(),this.enableSpeech&&(this.speech.clearHud(),this.speech.writeText(this.id),this.speech.loadImage()),this.loaded=!0,this.onLoadActions.run(),console.log("Initialized sprite '"+this.id+"' in zone '"+this.zone.id+"'"))}},{key:"getTexCoords",value:function(){"avatar"==this.id&&console.log("texture frames",this.facing,i.N.spriteSequence(this.facing));var t=this.frames[i.N.spriteSequence(this.facing)][this.animFrame%4],e=this.sheetSize,n=this.tileSize,r=[(t[0]+n[0])/e[0],t[1]/e[1]],o=[t[0]/e[0],(t[1]+n[1])/e[1]],s=[r,[o[0],r[1]],o,[r[0],o[1]]];return[[s[0],s[1],s[2]],[s[0],s[2],s[3]]].flat(3)}},{key:"getSpeechBubbleTexture",value:function(){return[[1,1],[0,1],[0,0],[1,1],[0,0],[1,0]].flat(3)}},{key:"getSpeechBubbleVertices",value:function(){return[c(r.OW,[2,0,4]).toArray(),c(r.OW,[0,0,4]).toArray(),c(r.OW,[0,0,2]).toArray(),c(r.OW,[2,0,4]).toArray(),c(r.OW,[0,0,2]).toArray(),c(r.OW,[2,0,2]).toArray()].flat(3)}},{key:"draw",value:function(){this.loaded&&(this.engine.mvPushMatrix(),(0,a.Iu)(this.engine.uViewMat,this.engine.uViewMat,this.drawOffset.toArray()),(0,a.Iu)(this.engine.uViewMat,this.engine.uViewMat,this.pos.toArray()),(0,a.U1)(this.engine.uViewMat,this.engine.uViewMat,this.engine.degToRad(this.engine.cameraAngle),[1,0,0]),this.engine.bindBuffer(this.vertexPosBuf,this.engine.shaderProgram.vertexPositionAttribute),this.engine.bindBuffer(this.vertexTexBuf,this.engine.shaderProgram.textureCoordAttribute),this.texture.attach(),this.engine.shaderProgram.setMatrixUniforms(),this.engine.gl.depthFunc(this.engine.gl.ALWAYS),this.engine.gl.drawArrays(this.engine.gl.TRIANGLES,0,this.vertexPosBuf.numItems),this.engine.gl.depthFunc(this.engine.gl.LESS),this.engine.mvPopMatrix(),this.enableSpeech&&(this.engine.mvPushMatrix(),(0,a.Iu)(this.engine.uViewMat,this.engine.uViewMat,this.drawOffset.toArray()),(0,a.Iu)(this.engine.uViewMat,this.engine.uViewMat,this.pos.toArray()),(0,a.U1)(this.engine.uViewMat,this.engine.uViewMat,this.engine.degToRad(this.engine.cameraAngle),[1,0,0]),this.engine.bindBuffer(this.speechVerBuf,this.engine.shaderProgram.vertexPositionAttribute),this.engine.bindBuffer(this.speechTexBuf,this.engine.shaderProgram.textureCoordAttribute),this.speech.attach(),this.engine.shaderProgram.setMatrixUniforms(),this.engine.gl.depthFunc(this.engine.gl.ALWAYS),this.engine.gl.drawArrays(this.engine.gl.TRIANGLES,0,this.vertexPosBuf.numItems),this.engine.gl.depthFunc(this.engine.gl.LESS),this.engine.mvPopMatrix()))}},{key:"setFrame",value:function(t){this.animFrame=t,this.engine.updateBuffer(this.vertexTexBuf,this.getTexCoords())}},{key:"setFacing",value:function(t){console.log("setting face to "+i.N.spriteSequence(t)),t&&(this.facing=t),this.setFrame(this.animFrame)}},{key:"addAction",value:function(t){console.log("adding action to sprite",t.id),this.actionDict[t.id]&&this.removeAction(t.id),this.actionDict[t.id]=t,this.actionList.push(t)}},{key:"removeAction",value:function(t){console.log("removing action"),this.actionList=this.actionList.filter((function(e){return e.id!==t})),delete this.actionDict[t]}},{key:"tickOuter",value:function(t){var e=this;if(this.loaded){this.actionList.sort((function(t,e){var n=t.startTime-e.startTime;return n?t.id>e.id?1:-1:n}));var n=[];this.actionList.forEach((function(e){!e.loaded||e.startTime>t||e.tick(t)&&(n.push(e),e.onComplete())})),n.forEach((function(t){return e.removeAction(t.id)})),this.tick&&this.tick(t)}}},{key:"init",value:function(){console.log("- sprite hook",this.id,this.pos)}},{key:"speak",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.textbox=this.engine.scrollText(this.id+":> "+t,!0,{}),e&&this.speech&&(this.speech.scrollText(t),this.speech.loadImage())):this.speech.clearHud()}},{key:"interact",value:function(t){return this.state,t&&t(!0),null}},{key:"faceDir",value:function(t){return this.facing==t||t===i.N.None?null:new s.aW(this.engine,"face",[t],this)}},{key:"setGreeting",value:function(t){return this.speech.clearHud(),this.speech.writeText(t),this.speech.loadImage(),new s.aW(this.engine,"greeting",[t,{autoclose:!0}],this)}}],n&&f(e.prototype,n),t}()},180:(t,e,n)=>{"use strict";n.d(e,{T:()=>r,N:()=>i});var r={DOWN:1,UP:2,MOVE:3},i={None:0,Right:1,Up:2,Left:4,Down:8,All:15,fromOffset:function(t){return t[0]>0?i.Right:t[0]<0?i.Left:t[1]>0?i.Down:t[1]<0?i.Up:0},toOffset:function(t){switch(t){case i.Right:return[1,0];case i.Up:return[0,-1];case i.Left:return[-1,0];case i.Down:return[0,1]}return[0,0]},reverse:function(t){switch(t){case i.Right:return i.Left;case i.Up:return i.Down;case i.Left:return i.Right;case i.Down:return i.Up}return i.None},rotate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case i.Right:return e?i.Top:i.Down;case i.Up:return e?i.Left:i.Right;case i.Left:return e?i.Down:i.Top;case i.Down:return e?i.Right:i.Left}return i.None},spriteSequence:function(t){switch(t){case i.Right:return"right";case i.Up:return"up";case i.Left:return"left";case i.Down:return"down"}return"down"}}},337:(t,e,n)=>{"use strict";n.d(e,{aW:()=>g,mT:()=>v,jf:()=>y,e5:()=>d});var r=n(185),i=(n(870),n(408));function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e,this.src=null,this.sheetSize=[0,0],this.tileSize=0,this.tiles={},this.loaded=!1,this.onLoadActions=new i.Z,this.onDefinitionLoadActions=new i.Z,this.onTextureLoaded=this.onTextureLoaded.bind(this)}var e,n;return e=t,(n=[{key:"runWhenLoaded",value:function(t){this.loaded?t():this.onLoadActions.add(t)}},{key:"runWhenDefinitionLoaded",value:function(t){this.definitionLoaded?t():this.onDefinitionLoadActions.add(t)}},{key:"onJsonLoaded",value:function(t){var e=this;Object.keys(t).map((function(n){e[n]=t[n]})),this.definitionLoaded=!0,this.onDefinitionLoadActions.run(),this.texture=this.engine.loadTexture(this.src),this.texture.runWhenLoaded(this.onTextureLoaded),this.bgColor&&this.engine.gl.clearColor(this.bgColor[0]/255,this.bgColor[1]/255,this.bgColor[2]/255,1)}},{key:"onTextureLoaded",value:function(){console.log("Initialized tileset '"+this.name+"'"),this.loaded=!0,this.onLoadActions.run()}},{key:"getTileVertices",value:function(t,e){return this.tileGeometry[t].vertices.map((function(t){return t.map((function(t){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}))})).flat(3)}},{key:"getTileTexCoords",value:function(t,e){var n=this.tiles[e],r=[this.tileSize/this.sheetSize[0],this.tileSize/this.sheetSize[1]];return this.tileGeometry[t].surfaces.map((function(t){return t.map((function(t){return[(t[0]+n[0])*r[0],(t[1]+n[1])*r[1]]}))})).flat(3)}},{key:"getWalkability",value:function(t){return this.tileGeometry[t].type}},{key:"getTileWalkPoly",value:function(t){return this.tileGeometry[t].walkPoly}}])&&o(e.prototype,n),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.sprite=n,this.callback=r,this.time=(new Date).getTime(),this.id=n.id+"-"+e+"-"+this.time}var e,n;return e=t,(n=[{key:"configure",value:function(t,e,n,r,i){this.sprite=e,this.id=n,this.type=t,this.startTime=r,this.creationArgs=i}},{key:"onLoad",value:function(t){this.init.apply(this,t),this.loaded=!0}},{key:"serialize",value:function(){return{id:this.id,time:this.startTime,zone:this.sprite.zone.id,sprite:this.sprite.id,type:this.type,args:this.creationArgs}}},{key:"onComplete",value:function(){return this.callback?this.callback():null}}])&&a(e.prototype,n),t}();function u(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){u(o,r,i,s,a,"next",t)}function a(t){u(o,r,i,s,a,"throw",t)}s(void 0)}))}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var d=function(){function t(e){f(this,t),this.engine=e,this.tilesets={}}var e,i;return p(t,[{key:"loadRemote",value:(i=l(regeneratorRuntime.mark((function t(e){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.tilesets[e])){t.next=3;break}return t.abrupt("return",n);case 3:return this.tilesets[e]=n=new s(this.engine),n.name=e,t.next=7,fetch(r.Z.tilesetRequestUrl(e));case 7:if(!(i=t.sent).ok){t.next=21;break}return t.prev=9,t.next=12,i.json();case 12:return o=t.sent,t.next=15,n.onJsonLoaded(o);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(9),console.error("Error parsing tileset '"+n.name+"' definition"),console.error(t.t0);case 21:return t.abrupt("return",this.tilesets[e]);case 22:case"end":return t.stop()}}),t,this,[[9,17]])}))),function(t){return i.apply(this,arguments)})},{key:"load",value:(e=l(regeneratorRuntime.mark((function t(e){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=this.tilesets[e])){t.next=3;break}return t.abrupt("return",r);case 3:return i=new s(this.engine),this.tilesets[e]=i,o=n(935)("./"+e+"/tileset.jsx").default,i.onJsonLoaded(o),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),y=function(){function t(e){f(this,t),this.engine=e,this.definitions=[],this.instances={}}var e;return p(t,[{key:"load",value:(e=l(regeneratorRuntime.mark((function t(e){var r,i,o,s,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a[1],i=a[2],this.instances[e]||(this.instances[e]=[]),o=n(467)("./"+e+".jsx").default,console.log(o,e),(s=new o(this.engine)).templateLoaded=!0,this.instances[e].forEach((function(t){t.afterLoad&&t.afterLoad(t.instance)})),i&&i(s),r&&(console.log("after load"),s.templateLoaded?r(s):this.instances[e].push({instance:s,afterLoad:r})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),g=function(){function t(e,n,r,i,o){f(this,t),this.engine=e,this.type=n,this.args=r,this.sprite=i,this.callback=o,this.instances={},this.definitions=[];var s=(new Date).getTime(),a=i.id+"-"+n+"-"+s;return this.load(n,(function(t){t.onLoad(r)}),(function(t){t.configure(n,i,a,s,r)}))}return p(t,[{key:"load",value:function(t){var e=arguments[1],r=arguments[2];this.instances[t]||(this.instances[t]=[]);var i=new c(this.type,this.sprite,this.callback);return Object.assign(i,n(333)("./"+t+".jsx").default),i.templateLoaded=!0,this.instances[t].forEach((function(t){t.afterLoad&&t.afterLoad(t.instance)})),r&&r(i),e&&(i.templateLoaded?e(i):this.instances[t].push({instance:i,afterLoad:e})),i}}]),t}(),v=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(this,t),this.src=e,this.audio=new Audio(e),n&&this.audio.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1),this.audio.load()}return p(t,[{key:"playAudio",value:function(){var t=this.audio.play();void 0!==t&&t.then((function(t){})).catch((function(t){console.info(t)}))}},{key:"pauseAudio",value:function(){var t=this.audio.pause();void 0!==t&&t.then((function(t){})).catch((function(t){console.info(t)}))}}]),t}()},175:(t,e,n)=>{"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Ue:()=>o,G3:()=>s,Iu:()=>a,U1:()=>c,t8:()=>u});var o=function(){var t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},s=function(t,e,n,r){var i=new Float32Array(16),o=1/Math.tan(t/2);if(i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*n,i[15]=0,null!=r&&r!==1/0&&r!==n){var s=1/(n-r);i[10]=(r+n)*s,i[14]=2*r*n*s}return i},a=function(t,e,n){var i=t,o=r(n,3),s=o[0],a=o[1],c=o[2],u=r(e,12),l=u[0],f=u[1],h=u[2],p=u[3],d=u[4],y=u[5],g=u[6],v=u[7],m=u[8],b=u[9],A=u[10],L=u[11];return t!==e&&(i[0]=l,i[1]=f,i[2]=h,i[3]=p,i[4]=d,i[5]=y,i[6]=g,i[7]=v,i[8]=m,i[9]=b,i[10]=A,i[11]=L),i[12]=l*s+d*a+m*c+e[12],i[13]=f*s+y*a+b*c+e[13],i[14]=h*s+g*a+A*c+e[14],i[15]=p*s+v*a+L*c+e[15],i},c=function(t,e,n,i){var o=t,s=r(i,3),a=s[0],c=s[1],u=s[2],l=Math.hypot(a,c,u);if(l<1e-6)throw new Error("Matrix4*4 rotate has wrong axis");a*=l=1/l,c*=l,u*=l;var f=Math.sin(n),h=Math.cos(n),p=1-h,d=r(e,12),y=d[0],g=d[1],v=d[2],m=d[3],b=d[4],A=d[5],L=d[6],w=d[7],T=d[8],R=d[9],O=d[10],_=d[11],E=a*a*p+h,x=c*a*p+u*f,P=u*a*p-c*f,S=a*c*p-u*f,W=c*c*p+h,k=u*c*p+a*f,M=a*u*p+c*f,Z=c*u*p-a*f,C=u*u*p+h;return o[0]=y*E+b*x+T*P,o[1]=g*E+A*x+R*P,o[2]=v*E+L*x+O*P,o[3]=m*E+w*x+_*P,o[4]=y*S+b*W+T*k,o[5]=g*S+A*W+R*k,o[6]=v*S+L*W+O*k,o[7]=m*S+w*W+_*k,o[8]=y*M+b*Z+T*C,o[9]=g*M+A*Z+R*C,o[10]=v*M+L*Z+O*C,o[11]=m*M+w*Z+_*C,e!==t&&(o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o};function u(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},348:(t,e,n)=>{"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{OW:()=>i,t8:()=>o,tk:()=>s,t7:()=>a});var i=function(){function t(e,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=n,this.z=r}return e=t,(n=[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e,this.z*e)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"distance",value:function(t){return this.sub(t).length()}},{key:"normal",value:function(){if(0===this.x&&0===this.y&&0===this.z)return new t(0,0,0);var e=this.length();return new t(this.x/e,this.y/e,this.z/e)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toString",value:function(){return"( ".concat(this.x,", ").concat(this.y,", ").concat(this.z," )")}},{key:"negate",value:function(){return new t(-1*this.x,-1*this.y,-1*this.z)}}])&&r(e.prototype,n),i&&r(e,i),t;var e,n,i}();function o(t,e){e.x=t.x,e.y=t.y,e.z=t.z}function s(t,e){return e||(e=new i(-t.x,-t.y,-t.z)),e.x=-t.x,e.y=-t.y,e.z=-t.z,e}function a(t,e,n,r){return r||(r=t),r.x=t.x+n*(e.x-t.x),r.y=t.y+n*(e.y-t.y),r.z=t.z+n*(e.z-t.z),r}},185:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={tilesetRequestUrl:function(t){return"/pixos/tilesets/"+t+"/tileset.jsx"},zoneRequestUrl:function(t){return"/pixos/maps/"+t+".map.jsx"},artResourceUrl:function(t){return"/pixos/art/"+t}}},715:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var r=n(262),i=n(348),o=n(180);function s(t,e,n){return s=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&c(i,n.prototype),i},s.apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}const u={bounds:[0,10,17,19],tileset:"sewer",audioSrc:"/pixos/audio/blue-fields.mp3",cells:[r.Z.SLW_CORNER,r.Z.SLW_COLUMN,r.Z.FLOOR,r.Z.FLOOR,r.Z.LW_LPIT,r.Z.WATER,r.Z.WATER,r.Z.WATER,r.Z.V_WALKWAY,r.Z.WATER,r.Z.WATER,r.Z.WATER,r.Z.RW_RPIT,r.Z.FLOOR,r.Z.FLOOR,r.Z.SRW_COLUMN,r.Z.SRW_CORNER].concat([r.Z.EMPTY,r.Z.SLW_CORNER,r.Z.S_WALL,r.Z.S_WALL,r.Z.S_WALL,r.Z.SLW_WATER_COLUMN,r.Z.WATER,r.Z.WATER,r.Z.S_STAIR,r.Z.WATER,r.Z.WATER,r.Z.SRW_WATER_COLUMN,r.Z.S_WALL,r.Z.S_WALL,r.Z.S_WALL,r.Z.SRW_CORNER,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.L_WALL,r.Z.SW_SPIT,r.Z.SW_SPIT,r.Z.S_STAIRWALL,r.Z.SW_SPIT,r.Z.SW_SPIT,r.Z.R_WALL,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.L_WALL,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.R_WALL,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.L_WALL,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.R_WALL,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.SLW_CORNER,r.Z.SLW_COLUMN,r.Z.FLOOR,r.Z.FLOOR,r.Z.FLOOR,r.Z.SRW_COLUMN,r.Z.SRW_CORNER,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.SLW_CORNER,r.Z.S_WALL,r.Z.S_WALL,r.Z.S_WALL,r.Z.SRW_CORNER,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY],[r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY,r.Z.EMPTY]),sprites:[{id:"water",type:"npc/water-knight",pos:s(i.OW,[8,13,0]),facing:o.N.Up},{id:"spurt7",type:"effects/waterspurt",pos:s(i.OW,[7,10,-1.5]),facing:o.N.Up},{id:"spurt9",type:"effects/waterspurt",pos:s(i.OW,[10,10,-1.5]),facing:o.N.Up}],scripts:[{id:"load-scene",trigger:function(){console.log("Triggered")}}],scenes:[]}},254:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(348),i=n(180),o=n(262);function s(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){s(o,r,i,a,c,"next",t)}function c(t){s(o,r,i,a,c,"throw",t)}a(void 0)}))}}function c(t,e,n){return c=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i},c.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}const f={bounds:[0,0,17,10],tileset:"sewer",cells:[o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.NLW_CORNER,o.Z.N_WALL,o.Z.N_WALL,o.Z.N_WALL,o.Z.NRW_CORNER,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY].concat([o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.NLW_CORNER,o.Z.NLW_COLUMN,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.NRW_COLUMN,o.Z.NRW_CORNER,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY],[o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.L_WALL,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.R_WALL,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY],[o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.L_WALL,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.R_WALL,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY],[o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.L_WALL,o.Z.NW_NPIT,o.Z.NW_NPIT,o.Z.N_STAIRWALL,o.Z.NW_NPIT,o.Z.NW_NPIT,o.Z.R_WALL,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY,o.Z.EMPTY],[o.Z.EMPTY,o.Z.NLW_CORNER,o.Z.N_WALL,o.Z.N_WALL,o.Z.N_WALL,o.Z.NLW_WATER_COLUMN,o.Z.WATER,o.Z.WATER,o.Z.N_STAIR,o.Z.WATER,o.Z.WATER,o.Z.NRW_WATER_COLUMN,o.Z.N_WALL,o.Z.N_WALL,o.Z.N_WALL,o.Z.NRW_CORNER,o.Z.EMPTY],[o.Z.NLW_CORNER,o.Z.NLW_COLUMN,o.Z.FLOOR,o.Z.FLOOR,o.Z.LW_LPIT,o.Z.WATER,o.Z.WATER,o.Z.WATER,o.Z.V_WALKWAY,o.Z.WATER,o.Z.WATER,o.Z.WATER,o.Z.RW_RPIT,o.Z.FLOOR,o.Z.FLOOR,o.Z.NRW_COLUMN,o.Z.NRW_CORNER],[o.Z.L_WALL,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.LW_LPIT,o.Z.WATER,o.Z.WATER,o.Z.WATER,o.Z.V_WALKWAY,o.Z.WATER,o.Z.WATER,o.Z.WATER,o.Z.RW_RPIT,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.R_WALL],[o.Z.L_WALL,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.L_STAIRWALL,o.Z.L_STAIR,o.Z.H_WALKWAY,o.Z.H_WALKWAY,o.Z.C_WALKWAY,o.Z.H_WALKWAY,o.Z.H_WALKWAY,o.Z.R_STAIR,o.Z.R_STAIRWALL,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.R_WALL],[o.Z.L_WALL,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.LW_LPIT,o.Z.WATER,o.Z.WATER,o.Z.WATER,o.Z.V_WALKWAY,o.Z.WATER,o.Z.WATER,o.Z.WATER,o.Z.RW_RPIT,o.Z.FLOOR,o.Z.FLOOR,o.Z.FLOOR,o.Z.R_WALL]),sprites:[{id:"darkness",type:"npc/darkness",pos:c(r.OW,[10,2,0]),facing:i.N.Down},{id:"air",type:"npc/air-knight",pos:c(r.OW,[8,2,0]),facing:i.N.Down},{id:"fire",type:"npc/fire-knight",pos:c(r.OW,[2,8,0]),facing:i.N.Right},{id:"earth",type:"npc/earth-knight",pos:c(r.OW,[14,8,0]),facing:i.N.Left},{id:"spurt1",type:"effects/waterspurt",pos:c(r.OW,[10,7,-1.5]),facing:i.N.Up},{id:"spurt2",type:"effects/waterspurt",pos:c(r.OW,[9,6,-1.5]),facing:i.N.Up},{id:"spurt3",type:"effects/waterspurt",pos:c(r.OW,[10,5,-1.5]),facing:i.N.Up},{id:"spurt4",type:"effects/waterspurt",pos:c(r.OW,[7,6,-1.5]),facing:i.N.Up},{id:"spurt5",type:"effects/waterspurt",pos:c(r.OW,[6,7,-1.5]),facing:i.N.Up},{id:"spurt6",type:"effects/waterspurt",pos:c(r.OW,[6,9,-1.5]),facing:i.N.Up},{id:"spurt8",type:"effects/waterspurt",pos:c(r.OW,[9,9,-1.5]),facing:i.N.Up},{id:"avatar",type:"characters/default",pos:c(r.OW,[8,8,-1]),facing:i.N.Down}],scenes:[{id:"strange-legend",actions:[{sprite:"air",action:"dialogue",args:[["Long ago, in a dungeon far far away","The sewer was backing up, and well...everyone was losing their $%#t","But one had a plan..."],!1,{autoclose:!0}],scope:void 0},{trigger:"clear-path",scope:void 0},{trigger:"custom",scope:void 0}]}],scripts:[{id:"load-scene",trigger:(d=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.playScene("strange-legend");case 1:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{id:"clear-path",trigger:(p=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.moveSprite("darkness",[10,2,0],!0);case 2:return t.next=4,this.spriteDialogue("darkness",["Hi there!","Can I help you?"]);case 4:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{id:"custom",trigger:(h=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.spriteDialogue("darkness",["Hi there!","Can I help you?"]);case 2:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})}]};var h,p,d},746:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var r=n(348),i=n(185),o=n(180),s=n(337);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e,n){return c=p()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i},c.apply(null,arguments)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function f(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function v(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(s,t);var e,n,o=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=m(e);if(n){var i=m(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return v(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this,t)).src=i.Z.artResourceUrl("player.gif"),e.sheetSize=[128,256],e.tileSize=[24,32],e.state="intro",e.frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.enableSpeech=!0,e.isWalkabl=!1,e.drawOffset=new r.OW(-.25,1,.125),e.hotspotOffset=new r.OW(.5,.5,0),e.bindCamera=!0,e}return s}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(g,t);var e,n,i,a,y=(e=g,n=p(),function(){var t,r=d(e);if(n){var i=d(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return f(this,t)});function g(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(e=y.call(this,t)).frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.enableSpeech=!0,e.isWalkable=!1,e.drawOffset=new r.OW(-.25,1,.125),e.hotspotOffset=new r.OW(.5,.5,0),e.bindCamera=!1,e.handleWalk=e.handleWalk.bind(h(e)),e}return i=g,(a=[{key:"tick",value:function(t){if(!this.actionList.length){var e=this.checkInput();e&&this.addAction(e)}this.bindCamera&&(0,r.t8)(this.pos,this.engine.cameraPosition)}},{key:"checkInput",value:function(){switch(this.engine.keyboard.lastPressedCode()){case"b":this.bindCamera=!0;break;case"c":this.bindCamera=!1;break;case"y":this.zone.playScene("strange-legend");break;case"k":case"Enter":return new s.aW(this.engine,"interact",[this.pos.toArray(),this.facing,this.zone.world],this);case"h":return new s.aW(this.engine,"dialogue",["Welcome! You pressed help!",!1,{autoclose:!0}],this);case"m":case" ":return new s.aW(this.engine,"chat",[">:",!0,{autoclose:!1}],this);case"q":case"Escape":this.speech.clearHud()}return this.handleWalk(this.engine.keyboard.lastPressedKey())}},{key:"handleWalk",value:function(t){var e,n=o.N.None;switch(t){case"w":n=o.N.Up;break;case"s":n=o.N.Down;break;case"a":n=o.N.Left;break;case"d":n=o.N.Right;break;case"p":return new s.aW(this.engine,"patrol",[this.pos.toArray(),new r.OW(8,13,this.pos.z).toArray(),600,this.zone],this);case"r":return new s.aW(this.engine,"patrol",[this.pos.toArray(),new r.OW(8,13,this.pos.z).toArray(),200,this.zone],this);default:return null}if(e=this.engine.keyboard.shift?200:600,this.facing!==n)return this.faceDir(n);var i=this.pos,a=o.N.toOffset(n),u=c(r.OW,[Math.round(i.x+a[0]),Math.round(i.y+a[1]),0]);if(!this.zone.isInZone(u.x,u.y)){var l=this.zone.world.zoneContaining(u.x,u.y);return l&&l.loaded&&l.isWalkable(u.x,u.y,o.N.reverse(n))?new s.aW(this.engine,"changezone",[this.zone.id,this.pos.toArray(),l.id,u.toArray(),e],this):this.faceDir(n)}return this.zone.isWalkable(u.x,u.y,o.N.reverse(n))?new s.aW(this.engine,"move",[this.pos.toArray(),u.toArray(),e],this):this.faceDir(n)}}])&&u(i.prototype,a),g}(n(870).Z))},359:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>A});var r=n(348),i=n(185),o=n(175);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(t,e){return v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},v(t,e)}function m(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=b(e);if(n){var i=b(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m(this,t)});function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,t)}return i}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(c,t);var e,n,o,s,a=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(o);if(s){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,t)).src=i.Z.artResourceUrl("sewer.gif"),e.sheetSize=[256,256],e.tileSize=[16,16],e.frames={up:[[0,144],[16,144],[32,144],[48,144],[64,144],[80,144]]},e.drawOffset=new r.OW(0,1,.001),e.hotspotOffset=new r.OW(.5,.5,0),e.frameTime=150,e}return e=c,(n=[{key:"init",value:function(){this.triggerTime=1e3+5e3*Math.random()}}])&&h(e.prototype,n),c}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,i,s=(r=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(i){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,t)).enableSpeech=!1,e.lastTime=0,e.accumTime=0,e.triggerTime=400,e.frameTime=250,e}return e=f,(n=[{key:"init",value:function(){this.triggerTime=1e3+Math.floor(5e3*Math.random())}},{key:"tick",value:function(t){0!=this.lastTime?(this.accumTime+=t-this.lastTime,this.accumTime<this.frameTime||0==this.animFrame&&this.accumTime<this.triggerTime||(5==this.animFrame?(this.setFrame(0),this.triggerTime=1e3+Math.floor(4e3*Math.random())):(this.setFrame(this.animFrame+1),this.accumTime=0,this.lastTime=t))):this.lastTime=t}},{key:"draw",value:function(t){this.loaded&&(t.mvPushMatrix(),(0,o.Iu)(t.uViewMat,t.uViewMat,this.pos.toArray()),(0,o.Iu)(t.uViewMat,t.uViewMat,this.drawOffset.toArray()),(0,o.U1)(t.uViewMat,t.uViewMat,t.degToRad(90),[1,0,0]),t.bindBuffer(this.vertexPosBuf,t.shaderProgram.vertexPositionAttribute),t.bindBuffer(this.vertexTexBuf,t.shaderProgram.textureCoordAttribute),this.texture.attach(),t.shaderProgram.setMatrixUniforms(),t.gl.drawArrays(t.gl.TRIANGLES,0,this.vertexPosBuf.numItems),t.mvPopMatrix())}}])&&a(e.prototype,n),f}(n(870).Z)))},378:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var r=n(337),i=n(348),o=n(185);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(i);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Welcome Stranger!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return console.log(e),e&&this.addAction(e),t&&t(!1),e}}])&&h(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,s,f,h=(s=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(s);if(f){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,t)).src=o.Z.artResourceUrl("air-knight.gif"),e.sheetSize=[128,256],e.tileSize=[24,32],e.drawOffset=new i.OW(-.25,1,.125),e.hotspotOffset=new i.OW(.5,.5,0),e.frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.bindCamera=!1,e.enableSpeech=!0,e.state="intro",e}return e=p,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Welcome!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return console.log(e),e&&this.addAction(e),t&&t(!1),e}}])&&a(e.prototype,n),p}(n(870).Z))},613:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var r=n(337),i=n(348),o=n(185);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(i);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Join me....!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I need a partner for squash.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Seriously - you swing?",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return e&&this.addAction(e),t&&t(!1),e}}])&&h(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,s,f,h=(s=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(s);if(f){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,t)).src=o.Z.artResourceUrl("darkness.gif"),e.sheetSize=[128,256],e.tileSize=[24,32],e.drawOffset=new i.OW(-.25,1,.125),e.hotspotOffset=new i.OW(.5,.5,0),e.frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.bindCamera=!1,e.enableSpeech=!0,e.state="intro",e}return e=p,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Join me....!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I need a partner for squash.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Seriously - you swing?",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return e&&this.addAction(e),t&&t(!1),e}}])&&a(e.prototype,n),p}(n(870).Z))},532:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var r=n(337),i=n(348),o=n(185);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(i);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Welcome!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return console.log(e),e&&this.addAction(e),t&&t(!1),e}}])&&h(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,s,f,h=(s=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(s);if(f){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,t)).src=o.Z.artResourceUrl("earth-knight.gif"),e.sheetSize=[128,256],e.tileSize=[24,32],e.drawOffset=new i.OW(-.25,1,.125),e.hotspotOffset=new i.OW(.5,.5,0),e.frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.bindCamera=!1,e.enableSpeech=!0,e.state="intro",e}return e=p,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Welcome!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return console.log(e),e&&this.addAction(e),t&&t(!1),e}}])&&a(e.prototype,n),p}(n(870).Z))},267:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var r=n(337),i=n(348),o=n(185);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(i);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Welcome!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return console.log(e),e&&this.addAction(e),t&&t(!1),e}}])&&h(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,s,f,h=(s=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(s);if(f){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,t)).src=o.Z.artResourceUrl("fire-knight.gif"),e.sheetSize=[128,256],e.tileSize=[24,32],e.drawOffset=new i.OW(-.25,1,.125),e.hotspotOffset=new i.OW(.5,.5,0),e.frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.bindCamera=!1,e.enableSpeech=!0,e.state="intro",e}return e=p,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",["Welcome!",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return console.log(e),e&&this.addAction(e),t&&t(!1),e}}])&&a(e.prototype,n),p}(n(870).Z))},886:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var r=n(337),i=n(348),o=n(185);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(i);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",[["I am the Water Knight!","Here is my home.","yo"],!1,{autoclose:!1,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return e&&this.addAction(e),t&&t(!1),e}}])&&h(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,s,f,h=(s=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(s);if(f){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,t)).src=o.Z.artResourceUrl("water-knight.gif"),e.sheetSize=[128,256],e.tileSize=[24,32],e.drawOffset=new i.OW(-.25,1,.125),e.hotspotOffset=new i.OW(.5,.5,0),e.frames={up:[[0,0],[24,0],[48,0],[24,0]],right:[[0,32],[24,32],[48,32],[24,32]],down:[[0,64],[24,64],[48,64],[24,64]],left:[[0,96],[24,96],[48,96],[24,96]]},e.bindCamera=!1,e.enableSpeech=!0,e.state="intro",e}return e=p,(n=[{key:"interact",value:function(t){var e=null;switch(this.state){case"intro":this.state="loop",e=new r.aW(this.engine,"dialogue",[["I am the Water Knight!","Here is my home."],!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop":this.state="loop2",e=new r.aW(this.engine,"dialogue",["I heard about a strange legend once.",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this);break;case"loop2":this.state="loop",e=new r.aW(this.engine,"dialogue",["Sorry, I don't remember the story at the moment",!1,{autoclose:!0,onClose:function(){return t(!0)}}],this)}return e&&this.addAction(e),t&&t(!1),e}}])&&a(e.prototype,n),p}(n(870).Z))},262:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={FLOOR:["FLAT_ALL","FLOOR",0],WATER:["FLAT_NONE","WATER",-1.5],EMPTY:["FLAT_ALL","EMPTY",2],N_STAIR:["FLAT_ALL","FLOOR_V",-1,"WALL_R","WATER_WALL",-1,"WALL_L","WATER_WALL",-1,"STAIR_T","STAIR",-1],N_STAIRWALL:["FLAT_ALL","FLOOR_B",0,"WALL_T","WALL_WATER",0,15],S_STAIR:["FLAT_ALL","FLOOR_V",-1,"WALL_R","WATER_WALL",-1,"WALL_L","WATER_WALL",-1,"STAIR_B","STAIR",-1],S_STAIRWALL:["FLAT_ALL","FLOOR_T",0,"WALL_B","WALL",0,15],L_STAIR:["FLAT_ALL","FLOOR_H",-1,"WALL_T","WATER_WALL",-1,"WALL_B","WATER_WALL",-1,"STAIR_L","STAIR",-1],L_STAIRWALL:["FLAT_ALL","FLOOR_R",0,"WALL_L","WALL_WATER",0,15],R_STAIR:["FLAT_ALL","FLOOR_H",-1,"WALL_T","WATER_WALL",-1,"WALL_B","WATER_WALL",-1,"STAIR_R","STAIR",-1],R_STAIRWALL:["FLAT_ALL","FLOOR_L",0,"WALL_R","WALL_WATER",0,15],N_WALL:["WALL_T","WALL",2,"FLAT_ALL","EMPTY_B",2],S_WALL:["WALL_B","WALL",2,"FLAT_ALL","EMPTY_T",2],L_WALL:["WALL_L","WALL",2,"FLAT_ALL","EMPTY_R",2],R_WALL:["WALL_R","WALL",2,"FLAT_ALL","EMPTY_L",2],NLW_CORNER:["FLAT_ALL","EMPTY_CTL",2],NRW_CORNER:["FLAT_ALL","EMPTY_CTR",2],SLW_CORNER:["FLAT_ALL","EMPTY_CBL",2],SRW_CORNER:["FLAT_ALL","EMPTY_CBR",2],NLW_COLUMN:["WALL_T","WALL",2,"WALL_L","WALL",2,"FLAT_NONE","EMPTY_BR",2],NRW_COLUMN:["WALL_R","WALL",2,"WALL_T","WALL",2,"FLAT_NONE","EMPTY_BL",2],SLW_COLUMN:["WALL_L","WALL",2,"WALL_B","WALL",2,"FLAT_NONE","EMPTY_TR",2],SRW_COLUMN:["WALL_R","WALL",2,"WALL_B","WALL",2,"FLAT_NONE","EMPTY_TL",2],NRW_WATER_COLUMN:["WALL_R","WALL",2,"WALL_R","WALL_WATER",0,"WALL_T","WALL",2,"WALL_T","WALL_WATER",0,"FLAT_ALL","EMPTY_BL",2],NLW_WATER_COLUMN:["WALL_T","WALL",2,"WALL_L","WALL",2,"FLAT_ALL","EMPTY_BR",2,"WALL_L","WALL_WATER",0,"WALL_T","WALL_WATER",0],SLW_WATER_COLUMN:["WALL_L","WALL",2,"WALL_B","WALL",2,"FLAT_ALL","EMPTY_TR",2,"WALL_L","WALL_WATER",0,"WALL_B","WALL_WATER",0],SRW_WATER_COLUMN:["WALL_R","WALL",2,"WALL_R","WALL_WATER",0,"WALL_B","WALL",2,"WALL_B","WALL_WATER",0,"FLAT_ALL","EMPTY_TL",2],NW_NPIT:["FLAT_ALL","FLOOR_B",0,"WALL_T","WALL_WATER",0],LW_LPIT:["FLAT_ALL","FLOOR_R",0,"WALL_L","WALL_WATER",0],RW_RPIT:["FLAT_ALL","FLOOR_L",0,"WALL_R","WALL_WATER",0],SW_SPIT:["FLAT_ALL","FLOOR_T",0,"WALL_B","WALL_WATER",0],C_WALKWAY:["FLAT_ALL","FLOOR_C",-1],V_WALKWAY:["FLAT_ALL","FLOOR_V",-1,"WALL_R","WATER_WALL",-1,"WALL_L","WATER_WALL",-1],H_WALKWAY:["FLAT_ALL","FLOOR_H",-1,"WALL_T","WATER_WALL",-1,"WALL_B","WATER_WALL",-1]}},507:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={src:n(185).Z.artResourceUrl("sewer.gif"),sheetSize:[256,256],tileSize:16,bgColor:[31,20,29],tiles:{FLOOR:[1,1],FLOOR_BR:[2,2],FLOOR_R:[2,1],FLOOR_TR:[2,0],FLOOR_T:[1,0],FLOOR_TL:[0,0],FLOOR_L:[0,1],FLOOR_BL:[0,2],FLOOR_B:[1,2],FLOOR_CBR:[4,1],FLOOR_CTR:[4,0],FLOOR_CTL:[3,0],FLOOR_CBL:[3,1],FLOOR_V:[3,2],WATER:[.5,7.5],FLOOR_H:[4,2],FLOOR_C:[3,3],EMPTY:[6,1],EMPTY_BR:[7,2],EMPTY_R:[7,1],EMPTY_TR:[7,0],EMPTY_T:[6,0],EMPTY_TL:[5,0],EMPTY_L:[5,1],EMPTY_BL:[5,2],EMPTY_B:[6,2],EMPTY_CBR:[9,1],EMPTY_CTR:[9,0],EMPTY_CTL:[8,0],EMPTY_CBL:[8,1],STAIR:[5,3],WALL:[0,3],WALL_WATER:[0,5],WATER_WALL:[0,6]},tileGeometry:{FLAT_ALL:{vertices:[[[0,1,0],[1,1,0],[1,0,0]],[[0,1,0],[1,0,0],[0,0,0]]],surfaces:[[[0,1],[1,1],[1,0]],[[0,1],[1,0],[0,0]]],type:parseInt("1111",2)},FLAT_NONE:{vertices:[[[0,1,0],[1,1,0],[1,0,0]],[[0,1,0],[1,0,0],[0,0,0]]],surfaces:[[[0,1],[1,1],[1,0]],[[0,1],[1,0],[0,0]]],type:parseInt("0000",2)},STAIR_R:{vertices:[[[.25,0,.25],[.25,1,.25],[.5,1,.25]],[[.25,0,.25],[.5,1,.25],[.5,0,.25]],[[.5,0,.5],[.5,1,.5],[.75,1,.5]],[[.5,0,.5],[.75,1,.5],[.75,0,.5]],[[.75,0,.75],[.75,1,.75],[1,1,.75]],[[.75,0,.75],[1,1,.75],[1,0,.75]],[[.25,0,0],[.25,1,0],[.25,1,.25]],[[.25,0,0],[.25,1,.25],[.25,0,.25]],[[.5,0,.25],[.5,1,.25],[.5,1,.5]],[[.5,0,.25],[.5,1,.5],[.5,0,.5]],[[.75,0,.5],[.75,1,.5],[.75,1,.75]],[[.75,0,.5],[.75,1,.75],[.75,0,.75]],[[1,0,.75],[1,1,.75],[1,1,1]],[[1,0,.75],[1,1,1],[1,0,1]],[[0,0,0],[1,0,0],[1,0,1]],[[0,0,0],[1,0,1],[0,0,1]],[[0,1,0],[1,1,0],[1,1,1]],[[0,1,0],[1,1,1],[0,1,1]]],surfaces:[[[0,.75],[1,.75],[1,.5]],[[0,.75],[1,.5],[0,.5]],[[0,.5],[1,.5],[1,.25]],[[0,.5],[1,.25],[0,.25]],[[0,.25],[1,.25],[1,0]],[[0,.25],[1,0],[0,0]],[[0,2],[1,2],[1,1.75]],[[0,2],[1,1.75],[0,1.75]],[[0,1.75],[1,1.75],[1,1.5]],[[0,1.75],[1,1.5],[0,1.5]],[[0,1.5],[1,1.5],[1,1.25]],[[0,1.5],[1,1.25],[0,1.25]],[[0,1.25],[1,1.25],[1,1]],[[0,1.25],[1,1],[0,1]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]]],walkPoly:[[[0,1,0],[1,1,1],[1,0,1]],[[0,1,0],[1,0,1],[0,0,0]]],type:parseInt("0101",2)},STAIR_T:{vertices:[[[0,.75,.25],[1,.75,.25],[1,.5,.25]],[[0,.75,.25],[1,.5,.25],[0,.5,.25]],[[0,.5,.5],[1,.5,.5],[1,.25,.5]],[[0,.5,.5],[1,.25,.5],[0,.25,.5]],[[0,.25,.75],[1,.25,.75],[1,0,.75]],[[0,.25,.75],[1,0,.75],[0,0,.75]],[[0,.75,0],[1,.75,0],[1,.75,.25]],[[0,.75,0],[1,.75,.25],[0,.75,.25]],[[0,.5,.25],[1,.5,.25],[1,.5,.5]],[[0,.5,.25],[1,.5,.5],[0,.5,.5]],[[0,.25,.5],[1,.25,.5],[1,.25,.75]],[[0,.25,.5],[1,.25,.75],[0,.25,.75]],[[0,0,.75],[1,0,.75],[1,0,1]],[[0,0,.75],[1,0,1],[0,0,1]],[[0,1,0],[0,0,0],[0,0,1]],[[0,1,0],[0,0,1],[0,1,1]],[[1,1,0],[1,0,0],[1,0,1]],[[1,1,0],[1,0,1],[1,1,1]]],surfaces:[[[0,.75],[1,.75],[1,.5]],[[0,.75],[1,.5],[0,.5]],[[0,.5],[1,.5],[1,.25]],[[0,.5],[1,.25],[0,.25]],[[0,.25],[1,.25],[1,0]],[[0,.25],[1,0],[0,0]],[[0,2],[1,2],[1,1.75]],[[0,2],[1,1.75],[0,1.75]],[[0,1.75],[1,1.75],[1,1.5]],[[0,1.75],[1,1.5],[0,1.5]],[[0,1.5],[1,1.5],[1,1.25]],[[0,1.5],[1,1.25],[0,1.25]],[[0,1.25],[1,1.25],[1,1]],[[0,1.25],[1,1],[0,1]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]]],walkPoly:[[[0,1,0],[1,1,0],[1,0,1]],[[0,1,0],[1,0,1],[0,0,1]]],type:parseInt("1010",2)},STAIR_L:{vertices:[[[.75,1,.25],[.75,0,.25],[.5,0,.25]],[[.75,1,.25],[.5,0,.25],[.5,1,.25]],[[.5,1,.5],[.5,0,.5],[.25,0,.5]],[[.5,1,.5],[.25,0,.5],[.25,1,.5]],[[.25,1,.75],[.25,0,.75],[0,0,.75]],[[.25,1,.75],[0,0,.75],[0,1,.75]],[[.75,1,0],[.75,0,0],[.75,0,.25]],[[.75,1,0],[.75,0,.25],[.75,1,.25]],[[.5,1,.25],[.5,0,.25],[.5,0,.5]],[[.5,1,.25],[.5,0,.5],[.5,1,.5]],[[.25,1,.5],[.25,0,.5],[.25,0,.75]],[[.25,1,.5],[.25,0,.75],[.25,1,.75]],[[0,1,.75],[0,0,.75],[0,0,1]],[[0,1,.75],[0,0,1],[0,1,1]],[[1,1,0],[0,1,0],[0,1,1]],[[1,1,0],[0,1,1],[1,1,1]],[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,1],[1,0,1]]],surfaces:[[[0,.75],[1,.75],[1,.5]],[[0,.75],[1,.5],[0,.5]],[[0,.5],[1,.5],[1,.25]],[[0,.5],[1,.25],[0,.25]],[[0,.25],[1,.25],[1,0]],[[0,.25],[1,0],[0,0]],[[0,2],[1,2],[1,1.75]],[[0,2],[1,1.75],[0,1.75]],[[0,1.75],[1,1.75],[1,1.5]],[[0,1.75],[1,1.5],[0,1.5]],[[0,1.5],[1,1.5],[1,1.25]],[[0,1.5],[1,1.25],[0,1.25]],[[0,1.25],[1,1.25],[1,1]],[[0,1.25],[1,1],[0,1]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]]],walkPoly:[[[0,1,1],[1,1,0],[1,0,0]],[[0,1,1],[1,0,0],[0,0,1]]],type:parseInt("0101",2)},STAIR_B:{vertices:[[[1,.25,.25],[0,.25,.25],[0,.5,.25]],[[1,.25,.25],[0,.5,.25],[1,.5,.25]],[[1,.5,.5],[0,.5,.5],[0,.75,.5]],[[1,.5,.5],[0,.75,.5],[1,.75,.5]],[[1,.75,.75],[0,.75,.75],[0,1,.75]],[[1,.75,.75],[0,1,.75],[1,1,.75]],[[1,.25,0],[0,.25,0],[0,.25,.25]],[[1,.25,0],[0,.25,.25],[1,.25,.25]],[[1,.5,.25],[0,.5,.25],[0,.5,.5]],[[1,.5,.25],[0,.5,.5],[1,.5,.5]],[[1,.75,.5],[0,.75,.5],[0,.75,.75]],[[1,.75,.5],[0,.75,.75],[1,.75,.75]],[[1,1,.75],[0,1,.75],[0,1,1]],[[1,1,.75],[0,1,1],[1,1,1]],[[1,0,0],[1,1,0],[1,1,1]],[[1,0,0],[1,1,1],[1,0,1]],[[0,0,0],[0,1,0],[0,1,1]],[[0,0,0],[0,1,1],[0,0,1]]],surfaces:[[[0,.75],[1,.75],[1,.5]],[[0,.75],[1,.5],[0,.5]],[[0,.5],[1,.5],[1,.25]],[[0,.5],[1,.25],[0,.25]],[[0,.25],[1,.25],[1,0]],[[0,.25],[1,0],[0,0]],[[0,2],[1,2],[1,1.75]],[[0,2],[1,1.75],[0,1.75]],[[0,1.75],[1,1.75],[1,1.5]],[[0,1.75],[1,1.5],[0,1.5]],[[0,1.5],[1,1.5],[1,1.25]],[[0,1.5],[1,1.25],[0,1.25]],[[0,1.25],[1,1.25],[1,1]],[[0,1.25],[1,1],[0,1]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]],[[0,3],[1,3],[1,2]],[[0,3],[1,2],[0,2]]],walkPoly:[[[0,1,1],[1,1,1],[1,0,0]],[[0,1,1],[1,0,0],[0,0,0]]],type:parseInt("1010",2)},WALL_R:{vertices:[[[0,0,-2],[0,1,-2],[0,1,0]],[[0,0,-2],[0,1,0],[0,0,0]]],surfaces:[[[0,2],[1,2],[1,0]],[[0,2],[1,0],[0,0]]],type:parseInt("1011",2)},WALL_T:{vertices:[[[0,1,-2],[1,1,-2],[1,1,0]],[[0,1,-2],[1,1,0],[0,1,0]]],surfaces:[[[0,2],[1,2],[1,0]],[[0,2],[1,0],[0,0]]],type:parseInt("0111",2)},WALL_L:{vertices:[[[1,1,-2],[1,0,-2],[1,0,0]],[[1,1,-2],[1,0,0],[1,1,0]]],surfaces:[[[0,2],[1,2],[1,0]],[[0,2],[1,0],[0,0]]],type:parseInt("1110",2)},WALL_B:{vertices:[[[1,0,-2],[0,0,-2],[0,0,0]],[[1,0,-2],[0,0,0],[1,0,0]]],surfaces:[[[0,2],[1,2],[1,0]],[[0,2],[1,0],[0,0]]],type:parseInt("1101",2)}}}},913:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(537),i=n.n(r),o=n(645),s=n.n(o)()(i());s.push([t.id,"/*                                                 *** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n.pixos {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 16px;\n    width: 100%;\n    text-shadow: #3f3f3f 2px 2px 0px;\n    position: relative;\n    padding: 2.5em;\n    align-items: center;\n    align-content: center; }\n  \n  .renderSurface {\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%; }\n  \n  .materialSelector {\n    background: rgba(0, 0, 0, 0.6);\n    margin: auto;\n    position: relative; }\n    .materialSelector tr {\n      height: 70px; }\n    .materialSelector td {\n      background-position: 0px 0px;\n      cursor: pointer;\n      margin: 0;\n      opacity: 0.3;\n      padding: 0;\n      width: 70px; }\n      .materialSelector td:hover {\n        opacity: 0.8; }\n  \n  .nickname {\n    color: #ffffff;\n    cursor: default;\n    left: 42%;\n    position: absolute;\n    top: 40%;\n    width: 300px; }\n    .nickname input {\n      background: none;\n      border-bottom: 1px solid #888888;\n      border: none;\n      color: white;\n      font-family: Arial, Helvetica, sans-serif;\n      font-size: 24px;\n      outline: none;\n      width: 100%; }\n  \n  .joininfo {\n    color: #ffffff;\n    cursor: default;\n    font-size: 24px;\n    position: absolute;\n    text-align: center;\n    top: 42%;\n    width: 99%; }\n  \n  .chatbox {\n    background: rgba(0, 0, 0, 0.6);\n    bottom: 55px;\n    color: white;\n    cursor: default;\n    height: 195px;\n    left: 20px;\n    overflow: hidden;\n    padding-left: 10px;\n    padding-right: 10px;\n    position: absolute;\n    width: 600px; }\n  \n  .chatbox_text {\n    bottom: 8px;\n    position: absolute;\n    text-shadow: none; }\n  \n  .chatbox_entry {\n    background: rgba(0, 0, 0, 0.6);\n    border: none;\n    bottom: 18px;\n    color: white;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 16px;\n    height: 30px;\n    left: 20px;\n    outline: none;\n    padding-bottom: 2px;\n    padding-left: 10px;\n    position: absolute;\n    width: 610px; }\n  ","",{version:3,sources:["webpack://./pixos/less/pixos.css"],names:[],mappings:"AAAA;;;;;;;;;;oDAUoD;AACpD;IACI,yCAAyC;IACzC,eAAe;IACf,WAAW;IACX,gCAAgC;IAChC,kBAAkB;IAClB,cAAc;IACd,mBAAmB;IACnB,qBAAqB,EAAE;;EAEzB;IACE,YAAY;IACZ,OAAO;IACP,kBAAkB;IAClB,MAAM;IACN,WAAW,EAAE;;EAEf;IACE,8BAA8B;IAC9B,YAAY;IACZ,kBAAkB,EAAE;IACpB;MACE,YAAY,EAAE;IAChB;MACE,4BAA4B;MAC5B,eAAe;MACf,SAAS;MACT,YAAY;MACZ,UAAU;MACV,WAAW,EAAE;MACb;QACE,YAAY,EAAE;;EAEpB;IACE,cAAc;IACd,eAAe;IACf,SAAS;IACT,kBAAkB;IAClB,QAAQ;IACR,YAAY,EAAE;IACd;MACE,gBAAgB;MAChB,gCAAgC;MAChC,YAAY;MACZ,YAAY;MACZ,yCAAyC;MACzC,eAAe;MACf,aAAa;MACb,WAAW,EAAE;;EAEjB;IACE,cAAc;IACd,eAAe;IACf,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,QAAQ;IACR,UAAU,EAAE;;EAEd;IACE,8BAA8B;IAC9B,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,aAAa;IACb,UAAU;IACV,gBAAgB;IAChB,kBAAkB;IAClB,mBAAmB;IACnB,kBAAkB;IAClB,YAAY,EAAE;;EAEhB;IACE,WAAW;IACX,kBAAkB;IAClB,iBAAiB,EAAE;;EAErB;IACE,8BAA8B;IAC9B,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,yCAAyC;IACzC,eAAe;IACf,YAAY;IACZ,UAAU;IACV,aAAa;IACb,mBAAmB;IACnB,kBAAkB;IAClB,kBAAkB;IAClB,YAAY,EAAE",sourcesContent:["/*                                                 *** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n.pixos {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 16px;\n    width: 100%;\n    text-shadow: #3f3f3f 2px 2px 0px;\n    position: relative;\n    padding: 2.5em;\n    align-items: center;\n    align-content: center; }\n  \n  .renderSurface {\n    height: 100%;\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%; }\n  \n  .materialSelector {\n    background: rgba(0, 0, 0, 0.6);\n    margin: auto;\n    position: relative; }\n    .materialSelector tr {\n      height: 70px; }\n    .materialSelector td {\n      background-position: 0px 0px;\n      cursor: pointer;\n      margin: 0;\n      opacity: 0.3;\n      padding: 0;\n      width: 70px; }\n      .materialSelector td:hover {\n        opacity: 0.8; }\n  \n  .nickname {\n    color: #ffffff;\n    cursor: default;\n    left: 42%;\n    position: absolute;\n    top: 40%;\n    width: 300px; }\n    .nickname input {\n      background: none;\n      border-bottom: 1px solid #888888;\n      border: none;\n      color: white;\n      font-family: Arial, Helvetica, sans-serif;\n      font-size: 24px;\n      outline: none;\n      width: 100%; }\n  \n  .joininfo {\n    color: #ffffff;\n    cursor: default;\n    font-size: 24px;\n    position: absolute;\n    text-align: center;\n    top: 42%;\n    width: 99%; }\n  \n  .chatbox {\n    background: rgba(0, 0, 0, 0.6);\n    bottom: 55px;\n    color: white;\n    cursor: default;\n    height: 195px;\n    left: 20px;\n    overflow: hidden;\n    padding-left: 10px;\n    padding-right: 10px;\n    position: absolute;\n    width: 600px; }\n  \n  .chatbox_text {\n    bottom: 8px;\n    position: absolute;\n    text-shadow: none; }\n  \n  .chatbox_entry {\n    background: rgba(0, 0, 0, 0.6);\n    border: none;\n    bottom: 18px;\n    color: white;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 16px;\n    height: 30px;\n    left: 20px;\n    outline: none;\n    padding-bottom: 2px;\n    padding-left: 10px;\n    position: absolute;\n    width: 610px; }\n  "],sourceRoot:""}]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */"),s=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(s).concat([o]).join("\n")}return[e].join("\n")}},679:(t,e,n)=>{"use strict";var r=n(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var u=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var s=l(n);f&&(s=s.concat(f(n)));for(var a=c(e),y=c(n),g=0;g<s.length;++g){var v=s[g];if(!(o[v]||r&&r[v]||y&&y[v]||a&&a[v])){var m=h(n,v);try{u(e,v,m)}catch(t){}}}}return e}},703:(t,e,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},697:(t,e,n)=>{t.exports=n(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},921:(t,e)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,y=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,A=n?Symbol.for("react.scope"):60119;function L(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case l:case f:case o:case a:case s:case p:return t;default:switch(t=t&&t.$$typeof){case u:case h:case g:case y:case c:return t;default:return e}}case i:return e}}}function w(t){return L(t)===f}e.AsyncMode=l,e.ConcurrentMode=f,e.ContextConsumer=u,e.ContextProvider=c,e.Element=r,e.ForwardRef=h,e.Fragment=o,e.Lazy=g,e.Memo=y,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||L(t)===l},e.isConcurrentMode=w,e.isContextConsumer=function(t){return L(t)===u},e.isContextProvider=function(t){return L(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return L(t)===h},e.isFragment=function(t){return L(t)===o},e.isLazy=function(t){return L(t)===g},e.isMemo=function(t){return L(t)===y},e.isPortal=function(t){return L(t)===i},e.isProfiler=function(t){return L(t)===a},e.isStrictMode=function(t){return L(t)===s},e.isSuspense=function(t){return L(t)===p},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===f||t===a||t===s||t===p||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===y||t.$$typeof===c||t.$$typeof===u||t.$$typeof===h||t.$$typeof===m||t.$$typeof===b||t.$$typeof===A||t.$$typeof===v)},e.typeOf=L},864:(t,e,n)=>{"use strict";t.exports=n(921)},626:(t,e,n)=>{"use strict";n.d(e,{collect:()=>X});const r={currentComponent:null,isBatchUpdating:!1,isInBrowser:"undefined"!=typeof window,listeners:new Map,manualListeners:[],nextVersionMap:new WeakMap,proxyIsMuted:!1,redirectToNext:!0,store:{}},i=Symbol("PATH"),o=Symbol("ORIGINAL"),s="RR_DEBUG",a=t=>!!t&&"object"==typeof t&&t.constructor===Object,c=t=>Array.isArray(t),u=t=>t instanceof Map,l=t=>t instanceof Set,f=t=>a(t)||c(t)||u(t)||l(t),h=t=>t===i||"constructor"===t||"toJSON"===t||"@@toStringTag"===t||t===Symbol.toStringTag,p=t=>"function"==typeof t,d=t=>a(t)?Object.assign({},t):c(t)?t.slice():u(t)?new Map(t):l(t)?new Set(t):t,y=(t,e)=>u(t)?t.get(e):l(t)?e:(c(t),t[e]),g=(t,e,n)=>{if(a(t))t[e]=n;else if(c(t))t[e]=n;else if(u(t))t.set(e,n);else{if(!l(t))throw Error("Unexpected type");t.add(n)}},v=t=>{if(a(t))return Object.keys(t).length;if(c(t))return t.length;if(u(t)||l(t))return t.size;throw Error("Unexpected type")},m=(t,e)=>{const n=[],r=t=>{const i=e(t,n.slice()),o=void 0!==i?i:t,s=(t,e)=>{n.push(t);const i=r(e);n.pop(),g(o,t,i)};if(a(o))Object.entries(o).forEach((([t,e])=>{s(t,e)}));else if(c(o)||u(o))o.forEach(((t,e)=>{s(e,t)}));else if(l(o)){const t=Array.from(o);o.clear(),t.forEach((t=>{s(t,t)}))}return o};return r(t)},b=t=>{r.proxyIsMuted=!0;const e=t();return r.proxyIsMuted=!1,e},A=(t,e)=>t.map((t=>t.toString())).join(e),L=t=>A(t,"."),w=t=>A(t,"~~~"),T=(t,e)=>{const n=t[i]||[];return void 0===e?n:n.concat(e)},R=(t,e)=>L(T(t,e)),O=(t,e)=>{t&&Object.defineProperty(t,i,{value:e,writable:!0})},_=t=>t[i]||[],E="undefined"!=typeof window&&!!window.localStorage,x=(t,e)=>{if(E)try{const n="string"==typeof e?e:JSON.stringify(e);return localStorage.setItem(t,n)}catch(t){return}},P="on",S="off";let W=(t=>{if(!E)return;const e=localStorage.getItem("RR_DEBUG");if(!e)return e;try{return JSON.parse(e)}catch(t){return e}})()||S;W===P&&console.info("Recollect debugging is enabled. Type __RR__.debugOff() to turn it off.");const k=t=>{W===P&&t()},M=(t,e,n)=>{k((()=>{console.groupCollapsed(`GET: ${R(t,e)}`),console.info(`Component: <${r.currentComponent._name}>`),void 0!==n&&console.info("Value:",n),console.groupEnd()}))},Z=(t,e,n)=>{k((()=>{console.groupCollapsed(`SET: ${R(t,e)}`),console.info("From:",y(t,e)),console.info("To:  ",n),console.groupEnd()}))},C={},I=t=>C.UpdateNextStore(t),j=t=>{if(!r.currentComponent)return;const e=w(t),n=r.listeners.get(e)||new Set;n.add(r.currentComponent),r.listeners.set(e,n)},B=t=>{return new Proxy(t,u(e=t)||l(e)?{get(t,e){if(e===o)return t;let n=Reflect.get(t,e);if(p(n)&&(n=n.bind(t)),r.proxyIsMuted||h(e))return n;if(!r.currentComponent&&r.redirectToNext){const n=r.nextVersionMap.get(t);if(n)return Reflect.get(n,e)}return"set"===e?new Proxy(n,{apply:(n,r,[i,o])=>r.get(i)===o||I({target:r,prop:i,value:o,updater:(n,r)=>(Z(t,e,r),Reflect.apply(n[e],n,[i,r]))})}):"add"===e?new Proxy(n,{apply:(n,r,[i])=>!!r.has(i)||I({target:r,notifyTarget:!0,value:i,updater:(n,r)=>(Z(t,e,r),Reflect.apply(n[e],n,[r]))})}):"clear"===e||"delete"===e?new Proxy(n,{apply:(n,r,[i])=>!(!r.size||"delete"===e&&!r.has(i))&&I({target:r,notifyTarget:!0,updater:n=>(Z(t,e),Reflect.apply(n[e],n,[i]))})}):r.currentComponent&&u(t)&&"get"===e?new Proxy(n,{apply:(e,n,r)=>(j(T(t,r[0])),Reflect.apply(e,n,r))}):n}}:{get(t,e){if(e===o)return t;const n=Reflect.get(t,e);if(r.proxyIsMuted||h(e))return n;if(((t,e)=>c(t)&&["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].includes(e))(t,e))return new Proxy(n,{apply:(n,r,i)=>I({target:r,notifyTarget:!0,value:i,updater:(n,r)=>{Z(t,e,r);const i=Reflect.apply(n[e],n,r),o=_(t);return m(n,((t,e)=>{f(t)&&O(t,[...o,...e])})),i}})});if(p(t[e]))return n;if(r.currentComponent)c(t)&&"length"===e||(M(t,e,n),j(T(t,e)));else if(r.redirectToNext){const n=r.nextVersionMap.get(t);if(n)return Reflect.get(n,e)}return n},has(t,e){const n=Reflect.has(t,e);if(r.proxyIsMuted||h(e))return n;if(r.currentComponent)c(t)||(M(t,e),j(T(t,e)));else{const n=r.nextVersionMap.get(t);if(n)return Reflect.has(n,e)}return n},ownKeys(t){const e=Reflect.ownKeys(t);if(r.proxyIsMuted)return e;if(r.currentComponent)M(t),j(_(t));else{const e=r.nextVersionMap.get(t);if(e)return Reflect.ownKeys(e)}return e},set:(t,e,n)=>r.proxyIsMuted?Reflect.set(t,e,n):t[e]===n||I({target:t,prop:e,value:n,updater:(n,r)=>(Z(t,e,r),Reflect.set(n,e,r))}),deleteProperty:(t,e)=>r.proxyIsMuted?Reflect.deleteProperty(t,e):I({target:t,prop:e,notifyTarget:!0,updater:n=>(((t,e)=>{k((()=>{console.groupCollapsed(`DELETE: ${R(t,e)}`),console.info("Property: ",R(t,e)),console.groupEnd()}))})(t,e),Reflect.deleteProperty(n,e))})});var e},Y=require("react-dom"),N=n.n(Y)().unstable_batchedUpdates||(t=>{t()}),F={components:new Map,changedPaths:new Set};var D;r.store=B({}),D=({target:t,prop:e,value:n,notifyTarget:i=!1,updater:s})=>b((()=>{let a;const c=_(t),u=T(t,e);let l=!1;const h=v(t);let p=n;return f(p)&&(p=m(n,((t,e)=>{if(!f(t))return t;const n=d(t);return O(n,[...u,...e]),B(n)}))),c.length?c.reduce(((e,n,i)=>{const u=y(e,n);let f=d(u);return O(f,_(u)),f=B(f),g(e,n,f),i===c.length-1&&(a=s(f,p),l=v(f)!==h,r.nextVersionMap.set(t[o]||t,f)),f}),r.store):(a=s(r.store,p),l=v(r.store)!==h),(t=>{const e=w(t),n=L(t);F.changedPaths.add(n),r.listeners.forEach(((t,r)=>{""!==e&&e!==r||t.forEach((t=>{const e=F.components.get(t)||new Set;e.add(n),F.components.set(t,e)}))})),r.isBatchUpdating||(N((()=>{F.components.forEach(((t,e)=>{((t,e)=>{k((()=>{console.groupCollapsed(`UPDATE:  <${t._name}>`),console.info("Changed properties:",e),console.groupEnd()}))})(e,Array.from(t)),e.update()}))})),r.manualListeners.forEach((t=>t({changedProps:Array.from(F.changedPaths),renderedComponents:Array.from(F.components.keys()),store:r.store}))),F.components.clear(),F.changedPaths.clear())})(i||l?c:u),a})),C.UpdateNextStore=D;var z=n(974),U=n.n(z),V=n(679),K=n.n(V);const H=[],$=()=>{r.isInBrowser&&(k((()=>{console.groupEnd()})),H.pop(),r.currentComponent=H[H.length-1]||null)},G=()=>b((()=>{const t=Object.assign({},r.store);return r.nextVersionMap.set(t,r.store),B(t)})),X=t=>{const e=t.displayName||t.name||"NamelessComponent";class n extends U().PureComponent{constructor(){super(...arguments),this.state={store:G()},this._isMounted=!1,this._isMounting=!0,this._isRendering=!1,this._name=e}componentDidMount(){this._isMounted=!0,this._isMounting=!1,$(),this._isRendering=!1}componentDidUpdate(){$(),this._isRendering=!1}componentWillUnmount(){var t;t=this,r.listeners.forEach(((e,n)=>{const i=Array.from(e).filter((e=>e!==t));i.length?r.listeners.set(n,new Set(i)):r.listeners.delete(n)})),this._isMounted=!1}update(){(this._isMounted||this._isMounting)&&this.setState({store:G()})}render(){var e;this._isRendering||(e=this,r.isInBrowser&&(k((()=>{console.groupCollapsed(`RENDER: <${e._name}>`)})),r.currentComponent=e,H.push(r.currentComponent)),this._isRendering=!0);const n=Object.assign(Object.assign({},this.props),{store:this.state.store});return U().createElement(t,Object.assign({},n))}}return n.displayName=`Collected(${e})`,K()(n,t)};let q;q=n(697);const{store:J}=r;"undefined"!=typeof window&&("Proxy"in window?window.__RR__={debugOn:()=>{W=P,x(s,P)},debugOff:()=>{W=S,x(s,S)},internals:r}:console.warn("This browser doesn't support the Proxy object, which react-recollect needs. See https://caniuse.com/#search=proxy to find out which browsers do support it"))},565:(t,e,n)=>{t.exports=n(626)},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var c=t[a],u=r.base?c[0]+r.base:c[0],l=o[u]||0,f="".concat(u," ").concat(l);o[u]=l+1;var h=n(f),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var d=i(p,r);r.byIndex=a,e.splice(a,0,{identifier:f,updater:d,references:1})}s.push(f)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var c=r(t,i),u=0;u<o.length;u++){var l=n(o[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},636:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},333:(t,e,n)=>{var r={"./changezone.jsx":183,"./chat.jsx":317,"./dialogue.jsx":282,"./face.jsx":813,"./greeting.jsx":162,"./interact.jsx":544,"./move.jsx":897,"./patrol.jsx":704,"./script.jsx":744};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=333},194:(t,e,n)=>{var r={"./dungeon-bottom.map.jsx":715,"./dungeon-top.map.jsx":254};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=194},467:(t,e,n)=>{var r={"./characters/default.jsx":746,"./effects/waterspurt.jsx":359,"./npc/air-knight.jsx":378,"./npc/darkness.jsx":613,"./npc/earth-knight.jsx":532,"./npc/fire-knight.jsx":267,"./npc/water-knight.jsx":886};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=467},935:(t,e,n)=>{var r={"./sewer/tileset.jsx":507};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=935},974:t=>{"use strict";t.exports=require("react")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{default:()=>dt});var t=n(974),e=n.n(t),i=n(565),o=n(697),s=n.n(o),a=n(175),c=n(348),u=n(408);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=n,this.src=e,this.glTexture=n.gl.createTexture(),this.image=new Image,this.image.onload=this.onImageLoaded.bind(this),this.image.src=e,this.loaded=!1,this.onLoadActions=new u.Z}var e,n;return e=t,(n=[{key:"runWhenLoaded",value:function(t){this.loaded?t():this.onLoadActions.add(t)}},{key:"onImageLoaded",value:function(){var t=this.engine.gl;console.log("loaded image '"+this.src+"'"),t.bindTexture(t.TEXTURE_2D,this.glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),this.loaded=!0,this.onLoadActions.run()}},{key:"attach",value:function(){var t=this.engine.gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.glTexture),t.uniform1i(this.engine.shaderProgram.samplerUniform,0)}}])&&l(e.prototype,n),t}();function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=new FontFace("minecraftia","url(/pixos/font/minecraftia.ttf)"),d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.dirty=!0,this.scrollY=0,this.fontSize=24,this.font="minecraftia",this.align="left",this.background="#999",this.border={lineWidth:4,style:"white",corner:"round"},this.scrollBox={width:5,background:"#568",color:"#78a"},this.fontStyle="white",this.lines=[]}var e,n;return e=t,n=[{key:"init",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.text=t,this.x=e,this.y=n,this.width=r,this.height=i,this.setOptions(o),this.cleanit()}},{key:"cleanit",value:function(t){this.dirty&&(this.setFont(),this.getTextPos(),this.dirty=!1,t||this.fitText())}},{key:"setOptions",value:function(t){var e=this;Object.keys(this).forEach((function(n){void 0!==t[n]&&(e[n]=t[n],e.dirty=!0)}))}},{key:"setFont",value:function(){this.fontStr=this.fontSize+"px "+this.font,this.textHeight=this.fontSize+Math.ceil(.05*this.fontSize)}},{key:"getTextPos",value:function(){"left"===this.align?this.textPos=0:"right"===this.align?this.textPos=Math.floor(this.width-this.scrollBox.width-this.fontSize/4):this.textPos=Math.floor((this.width- -this.scrollBox.width)/2)}},{key:"fitText",value:function(){var t=this.ctx;this.cleanit(!0),t.font=this.fontStr,t.textAlign=this.align,t.textBaseline="top";var e=this.text.split(" ");this.lines.length=0;for(var n="",r="";e.length>0;){var i=e.shift();t.measureText(n+r+i).width<this.width-this.scrollBox.width-this.scrollBox.width?(n+=r+i,r=" "):(""===r?n+=i:e.unshift(i),this.lines.push(n),r="",n="")}""!==n&&this.lines.push(n),this.maxScroll=(this.lines.length+.5)*this.textHeight-this.height}},{key:"drawBorder",value:function(){var t=this.ctx,e=this.border.lineWidth/2;t.lineJoin=this.border.corner,t.lineWidth=this.border.lineWidth,t.strokeStyle=this.border.style,t.strokeRect(this.x-e,this.y-e,this.width+2*e,this.height+2*e)}},{key:"drawScrollBox",value:function(){var t=this.ctx,e=this.height/(this.lines.length*this.textHeight);t.fillStyle=this.scrollBox.background,t.fillRect(this.x+this.width-this.scrollBox.width,this.y,this.scrollBox.width,this.height),t.fillStyle=this.scrollBox.color;var n=this.height*e;n>this.height&&(n=this.height),t.fillRect(this.x+this.width-this.scrollBox.width,this.y-this.scrollY*e,this.scrollBox.width,n)}},{key:"scroll",value:function(t){this.cleanit(),this.scrollY=-t,this.scrollY>0?this.scrollY=0:this.scrollY<-this.maxScroll&&(this.scrollY=-this.maxScroll)}},{key:"scrollLines",value:function(t){this.cleanit(),this.scrollY=-this.textHeight*t,this.scrollY>0?this.scrollY=0:this.scrollY<-this.maxScroll&&(this.scrollY=-this.maxScroll)}},{key:"render",value:function(){var t=this.ctx;this.cleanit(),t.font=this.fontStr,t.textAlign=this.align,this.drawBorder(),t.save(),t.fillStyle=this.background,t.fillRect(this.x,this.y,this.width,this.height),this.drawScrollBox(),t.beginPath(),t.rect(this.x,this.y,this.width-this.scrollBox.width,this.height),t.clip(),t.setTransform(1,0,0,1,this.x,Math.floor(this.y+this.scrollY)),t.fillStyle=this.fontStyle;for(var e=0;e<this.lines.length;e++)t.fillText(this.lines[e],this.textPos,Math.floor(e*this.textHeight));t.restore()}}],n&&h(e.prototype,n),t}();function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=r,this.engine=n,this.canvas=e,this.ctx=e.getContext("2d"),this.glTexture=n.gl.createTexture(),this.loaded=!1,this.onLoadActions=new u.Z,this.loadImage()}var e,n;return e=t,n=[{key:"runWhenLoaded",value:function(t){this.loaded?t():this.onLoadActions.add(t)}},{key:"loadImage",value:function(){var t=this.engine.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.bindTexture(t.TEXTURE_2D,this.glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),console.log("loading canvas ",this.canvas),this.loaded=!0,this.onLoadActions.run()}},{key:"attach",value:function(){var t=this.engine.gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.glTexture),t.uniform1i(this.engine.shaderProgram.samplerUniform,0)}},{key:"clearHud",value:function(){var t=this.ctx;t.clearRect(0,0,t.canvas.width,t.canvas.height),this.loadImage()}},{key:"writeText",value:function(t,e,n){var r=this.ctx;r.save(),r.font="32px minecraftia",r.textAlign="center",r.textBaseline="middle",r.fillStyle="white",r.fillText(t,null!=e?e:r.canvas.width/2,null!=n?n:r.canvas.height/2),r.restore()}},{key:"scrollText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new d(this.ctx);return r.init(t,10,10,this.canvas.width-20,2*this.canvas.height/3-20,n),e&&r.scroll((Math.sin((new Date).getTime()/3e3)+1)*r.maxScroll*.5),r.render(),r}}],n&&y(e.prototype,n),t}();function v(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(e,n,r,i,o){var s,u,l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u=function(t,e){var n=e.vs,r=e.fs,i=l,o=l.loadShader(t,t.VERTEX_SHADER,n),s=l.loadShader(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error("WebGL unable to initialize the shader program: ".concat(t.getshaderProgramLog(a)));return t.useProgram(a),a.vertexPositionAttribute=t.getAttribLocation(a,"aVertexPosition"),t.enableVertexAttribArray(a.vertexPositionAttribute),a.textureCoordAttribute=t.getAttribLocation(a,"aTextureCoord"),t.enableVertexAttribArray(a.textureCoordAttribute),a.pMatrixUniform=t.getUniformLocation(a,"uPMatrix"),a.mvMatrixUniform=t.getUniformLocation(a,"uMVMatrix"),a.samplerUniform=t.getUniformLocation(a,"uSampler"),a.setMatrixUniforms=function(){t.uniformMatrix4fv(this.pMatrixUniform,!1,i.uProjMat),t.uniformMatrix4fv(this.mvMatrixUniform,!1,i.uViewMat)},l.shaderProgram=a,a},(s="initShaderProgram")in this?Object.defineProperty(this,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):this[s]=u,this.uViewMat=(0,a.Ue)(),this.uProjMat=(0,a.Ue)(),this.canvas=e,this.hud=n,this.mipmap=r,this.width=i,this.height=o,this.modelViewMatrixStack=[],this.globalStore={},this.textures=[],this.speeches=[],this.cameraAngle=45,this.cameraPosition=new c.OW(8,8,-1),this.cameraOffset=new c.OW(0,0,0),this.setCamera=this.setCamera.bind(this),this.render=this.render.bind(this)}var e,n,r,i;return e=t,n=[{key:"init",value:(r=regeneratorRuntime.mark((function t(e,n,r){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.hud.getContext("2d"),o=this.canvas.getContext("webgl")){t.next=4;break}throw new Error("WebGL : unable to initialize");case 4:if(i){t.next=6;break}throw new Error("Canvas : unable to initialize HUD");case 6:return this.gl=o,this.ctx=i,this.time=(new Date).getTime(),this.scene=e,this.keyboard=n,this.touch=r,i.canvas.width=this.canvas.width,i.canvas.height=this.canvas.height,o.viewportWidth=this.canvas.width,o.viewportHeight=this.canvas.height,o.clearColor(0,1,0,1),o.clearDepth(1),o.enable(o.DEPTH_TEST),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),this.initializedWebGl=!0,this.initShaderProgram(o,e.shaders),this.initProjection(o),t.next=26,e.init(this);case 26:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function s(t){v(o,n,i,s,a,"next",t)}function a(t){v(o,n,i,s,a,"throw",t)}s(void 0)}))},function(t,e,n){return i.apply(this,arguments)})},{key:"loadShader",value:function(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error("An error occurred compiling the shaders: ".concat(i))}return r}},{key:"initProjection",value:function(t){var e=this.degToRad(45),n=t.canvas.clientWidth/t.canvas.clientHeight;this.uProjMat=(0,a.G3)(e,n,.1,100),this.uViewMat=(0,a.Ue)(),this.uProjMat[5]*=-1}},{key:"setCamera",value:function(){(0,a.Iu)(this.uViewMat,this.uViewMat,[0,0,-15]),(0,a.U1)(this.uViewMat,this.uViewMat,this.degToRad(this.cameraAngle),[1,0,0]),(0,c.tk)(this.cameraPosition,this.cameraOffset),(0,a.Iu)(this.uViewMat,this.uViewMat,this.cameraOffset.toArray())}},{key:"clearScreen",value:function(){var t=this.gl;t.viewport(0,0,t.viewportWidth,t.viewportHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),(0,a.G3)(this.degToRad(45),t.viewportWidth/t.viewportHeight,.1,100,this.uProjMat),this.uViewMat=(0,a.Ue)()}},{key:"clearHud",value:function(){var t=this.ctx;t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"writeText",value:function(t,e,n){var r=this.ctx;r.save(),r.font="20px invasion2000",r.textAlign="center",r.textBaseline="middle",r.fillStyle="white",r.fillText(t,null!=e?e:r.canvas.width/2,null!=n?n:r.canvas.height/2),r.restore()}},{key:"setGreeting",value:function(t){this.globalStore.greeting=t}},{key:"scrollText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new d(this.ctx);return r.init(t,10,2*this.canvas.height/3,this.canvas.width-20,this.canvas.height/3-20,n),e&&r.scroll((Math.sin((new Date).getTime()/3e3)+1)*r.maxScroll*.5),r.render(),r}},{key:"drawButton",value:function(t,e,n,r,i){var o=this.ctx,s=r/2;o.save(),o.fillStyle=i.background,o.beginPath(),o.rect(t,e,n,r),o.rect(t,e,n,r),o.fill(),o.clip();var a=o.createLinearGradient(t,e,t,e+s);a.addColorStop(0,"rgb(221,181,155)"),a.addColorStop(1,"rgb(22,13,8)"),o.fillStyle=a,o.globalAlpha=.5,o.fillRect(t,e,n,r),o.fillStyle=i.top;for(var c=0;c<r;c+=s){o.fillStyle=0===c?i.top:i.bottom;for(var u=0;u<50;u++){var l=t+Math.random()*n,f=e+c+Math.random()*s,h=10*Math.random(),p=10*Math.random(),d=360*Math.random(),y=Math.random();o.save(),o.translate(l,f),o.rotate(d*Math.PI/180),o.translate(-l,-f),o.globalAlpha=y,o.fillRect(l,f,h,p),o.restore()}}o.restore()}},{key:"render",value:function(){this.requestId=requestAnimationFrame(this.render),this.clearScreen(),this.clearHud(),this.scene.render(this,(new Date).getTime())}},{key:"createBuffer",value:function(t,e,n){var r=this.gl,i=r.createBuffer();return i.itemSize=n,i.numItems=t.length/n,r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),e),r.bindBuffer(r.ARRAY_BUFFER,null),i}},{key:"updateBuffer",value:function(t,e){var n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferSubData(n.ARRAY_BUFFER,0,new Float32Array(e)),n.bindBuffer(n.ARRAY_BUFFER,null)}},{key:"bindBuffer",value:function(t,e){var n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,t),n.vertexAttribPointer(e,t.itemSize,n.FLOAT,!1,0,0)}},{key:"loadTexture",value:function(t){return this.textures[t]||(this.textures[t]=new f(t,this)),this.textures[t]}},{key:"loadSpeech",value:function(t,e){return console.log("requesting speech",t),this.speeches[t]||(this.speeches[t]=new g(e,this,t)),this.speeches[t]}},{key:"mvPushMatrix",value:function(){var t=(0,a.Ue)();(0,a.t8)(this.uViewMat,t),this.modelViewMatrixStack.push(t)}},{key:"initCanvasTexture",value:function(){var t=this.gl.createTexture();return this.handleLoadedTexture(t,this.mipmap),t}},{key:"handleLoadedTexture",value:function(t,e){var n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null)}},{key:"mvPopMatrix",value:function(){if(0==this.modelViewMatrixStack.length)throw"Invalid popMatrix!";this.uViewMat=this.modelViewMatrixStack.pop()}},{key:"close",value:function(){cancelAnimationFrame(this.requestId)}},{key:"degToRad",value:function(t){return t*Math.PI/180}}],n&&m(e.prototype,n),t}(),A=n(180);function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instance||(this.activeKeys=[],this.activeCodes=[],this.shift=!1,t._instance=this),t._instance}var e,n;return e=t,n=[{key:"onKeyDown",value:function(e){e.preventDefault();var n=String.fromCharCode(e.keyCode).toLowerCase();t._instance.activeKeys.indexOf(n)<0&&t._instance.activeKeys.push(n),t._instance.activeCodes.indexOf(e.key)<0&&t._instance.activeCodes.push(e.key),t._instance.shift=e.shiftKey}},{key:"onKeyUp",value:function(e){var n=String.fromCharCode(e.keyCode).toLowerCase(),r=t._instance.activeKeys.indexOf(n);t._instance.activeKeys.splice(r,1),t._instance.activeCodes.splice(r,1)}},{key:"lastPressed",value:function(e){for(var n=e.toLowerCase(),r=null,i=-1,o=0;o<e.length;o++){var s=n[o],a=t._instance.activeKeys.indexOf(s);a>i&&(r=s,i=a)}return r}},{key:"lastPressedCode",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t._instance.activeCodes.pop(),r=e.toLowerCase(),i=0;i<r.length;i++){var o=t._instance.activeKeys.indexOf(n);o<0&&(n=t._instance.activeCodes.pop())}return n}},{key:"lastPressedKey",value:function(){return t._instance.activeKeys[t._instance.activeKeys.length-1]}}],n&&L(e.prototype,n),t}();function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var R=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instance||(this.x=0,this.y=0,this.isDragging=!1,this.activeDirection=[],t._instance=this),t._instance}var e,n;return e=t,(n=[{key:"onTouch",value:function(t){t.touches&&(this.x=t.touches[0].pageX,this.y=t.touches[0].pageY,console.log("Touch:  x: ".concat(this.x,", y: ").concat(this.y)),t.preventDefault())}}])&&T(e.prototype,n),t}();function O(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function _(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){O(o,r,i,s,a,"next",t)}function a(t){O(o,r,i,s,a,"throw",t)}s(void 0)}))}}var E=function(n){var r=n.width,i=n.height,o=n.SceneProvider,s=n.class,a=(0,t.useRef)(),c=(0,t.useRef)(),u=(0,t.useRef)(),l=new w,f=new R,h=o.onMouseEvent,d=o.onKeyEvent,y=o.onTouchEvent;function g(){return v.apply(this,arguments)}function v(){return(v=_(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.load();case 2:document.fonts.add(p);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,t.useEffect)(_(regeneratorRuntime.mark((function t(){var e,n,s,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.current,n=c.current,s=u.current,h=new b(e,n,s,r,i),t.next=6,g();case 6:return t.next=8,h.init(o,l,f);case 8:return h.render(),t.abrupt("return",(function(){h.close()}));case 10:case"end":return t.stop()}}),t)}))),[o]),e().createElement("div",{style:{position:"relative"}},e().createElement("canvas",{style:{position:"absolute",zIndex:1,top:0,left:0},ref:a,width:r,height:i,className:s}),e().createElement("canvas",{style:{zIndex:2,top:0,left:0,background:"none"},tabIndex:0,ref:c,width:r,height:i,className:s,onTouchMoveCapture:function(t){return y(t.nativeEvent)},onTouchCancelCapture:function(t){return y(t.nativeEvent)},onTouchStartCapture:function(t){return y(t.nativeEvent)},onTouchEndCapture:function(t){return y(t.nativeEvent)},onKeyDownCapture:function(t){return d(t.nativeEvent)},onKeyUpCapture:function(t){return d(t.nativeEvent)},onContextMenu:function(t){return h(t.nativeEvent.clientX,t.nativeEvent.clientY,A.T.UP,!0,t)},onMouseUp:function(t){return h(t.nativeEvent.clientX,t.nativeEvent.clientY,A.T.UP,3==t.nativeEvent.button,t)},onMouseDown:function(t){return h(t.nativeEvent.clientX,t.nativeEvent.clientY,A.T.DOWN,3==t.nativeEvent.button,t)},onMouseMove:function(t){return h(t.nativeEvent.clientX,t.nativeEvent.clientY,A.T.MOVE,3==t.nativeEvent.button,t)}}),e().createElement("canvas",{style:{display:"none"},ref:u,width:256,height:256}))};E.propTypes={width:s().number.isRequired,height:s().number.isRequired,SceneProvider:s().object.isRequired,class:s().string.isRequired};const x=E;var P=n(185),S=n(337);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){M(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){C(o,r,i,s,a,"next",t)}function a(t){C(o,r,i,s,a,"throw",t)}s(void 0)}))}}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.world=n,this.data={},this.spriteDict={},this.spriteList=[],this.engine=n.engine,this.onLoadActions=new u.Z,this.spriteLoader=new S.jf(n.engine),this.tsLoader=new S.e5(n.engine),this.onTilesetDefinitionLoaded=this.onTilesetDefinitionLoaded.bind(this),this.onTilesetOrSpriteLoaded=this.onTilesetOrSpriteLoaded.bind(this),this.loadSprite=this.loadSprite.bind(this),this.checkInput=this.checkInput.bind(this)}var e,r,i,o,s,a,c;return e=t,r=[{key:"loadRemote",value:(c=I(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(P.Z.zoneRequestUrl(this.id));case 2:if(!(e=t.sent).ok){t.next=25;break}return t.prev=4,t.next=7,e.json();case 7:return n=t.sent,this.bounds=n.bounds,this.size=[n.bounds[2]-n.bounds[0],n.bounds[3]-n.bounds[1]],this.cells=n.cells,t.next=13,this.tsLoader.load(n.tileset);case 13:return this.tileset=t.sent,this.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this)),this.tileset.runWhenLoaded(this.onTilesetOrSpriteLoaded.bind(this)),t.next=18,Promise.all(n.sprites.map(this.loadSprite));case 18:this.spriteList.forEach((function(t){return t.runWhenLoaded(r.onTilesetOrSpriteLoaded.bind(r))})),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),console.error("Error parsing zone "+this.id),console.error(t.t0);case 25:case"end":return t.stop()}}),t,this,[[4,21]])}))),function(){return c.apply(this,arguments)})},{key:"load",value:(a=I(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=n(194)("./"+this.id+".map.jsx").default,Object.assign(this,e),this.audioSrc&&(this.audio=new S.mT(this.audioSrc,!0)),this.size=[this.bounds[2]-this.bounds[0],this.bounds[3]-this.bounds[1]],t.next=7,this.tsLoader.load(this.tileset);case 7:return this.tileset=t.sent,this.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this)),this.tileset.runWhenLoaded(this.onTilesetOrSpriteLoaded.bind(this)),t.next=12,Promise.all(this.sprites.map(this.loadSprite));case 12:this.spriteList.forEach((function(t){return t.runWhenLoaded(r.onTilesetOrSpriteLoaded.bind(r))})),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("Error parsing zone "+this.id),console.error(t.t0);case 19:case"end":return t.stop()}}),t,this,[[0,15]])}))),function(){return a.apply(this,arguments)})},{key:"runWhenLoaded",value:function(t){this.loaded?t():this.onLoadActions.add(t)}},{key:"onTilesetDefinitionLoaded",value:function(){this.vertexPosBuf=[],this.vertexTexBuf=[],this.walkability=[];for(var t=0,e=0;t<this.size[1];t++){for(var n=[],r=[],i=0;i<this.size[0];i++,e++){var o=this.cells[e];this.walkability[e]=A.N.All;for(var s=Math.floor(o.length/3),a=0;a<s;a++){var c=[this.bounds[0]+i,this.bounds[1]+t,o[3*a+2]];this.walkability[e]&=this.tileset.getWalkability(o[3*a]),n=n.concat(this.tileset.getTileVertices(o[3*a],c)),r=r.concat(this.tileset.getTileTexCoords(o[3*a],o[3*a+1]))}o.length==3*s+1&&(this.walkability[e]=o[3*s])}this.vertexPosBuf[t]=this.engine.createBuffer(n,this.engine.gl.STATIC_DRAW,3),this.vertexTexBuf[t]=this.engine.createBuffer(r,this.engine.gl.STATIC_DRAW,2)}}},{key:"onTilesetOrSpriteLoaded",value:function(){var t=this;if(!this.loaded&&this.tileset.loaded&&this.spriteList.every((function(t){return t.loaded}))){console.log("Initialized zone '"+this+"'");var e=this;this.scripts.forEach((function(n){"load-scene"===n.id&&t.runWhenLoaded(n.trigger.bind(e))})),this.loaded=!0,this.onLoadActions.run()}}},{key:"loadSprite",value:(s=I(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.zone=this,t.next=3,this.spriteLoader.load(e.type,(function(t){return t.onLoad(e)}));case 3:n=t.sent,this.spriteDict[e.id]=n,this.spriteList.push(n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"addSprite",value:function(t){t.zone=this,this.spriteDict[t.id]=t,this.spriteList.push(t)}},{key:"removeSprite",value:function(t){this.spriteList=this.spriteList.filter((function(e){return e.id!==t})),delete this.spriteDict[t]}},{key:"getSpriteById",value:function(t){return this.spriteDict[t]}},{key:"triggerScript",value:function(t){var e=this;this.scripts.forEach((function(n){n.id===t&&e.runWhenLoaded(n.trigger.bind(e))}))}},{key:"playScene",value:function(t){var e=this;e.scenes.forEach((function n(r){if(r.currentStep||(r.currentStep=0),!(r.currentStep>e.scenes.length)&&r.id===t){var i=r.actions[r.currentStep];if(i.scope||(i.scope=e),i.sprite){var o=i.scope.getSpriteById(i.sprite);if(i.action){console.log("playing scene action in zone");var s=i.args,a=s.pop();o.addAction(new S.aW(e.engine,i.action,[].concat(function(t){if(Array.isArray(t))return Z(t)}(u=s)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(u)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[k(k({},a),{},{onClose:function(){return r.currentStep+=1}})]),o,n.bind(e,r)))}}if(i.trigger){console.log("trigger");var c=i.scope.getSpriteById("avatar");c.addAction(new S.aW(e.engine,"script",[i.trigger,i.scope,function(){return r.currentStep+=1}],c,n.bind(e,r)))}}var u}))}},{key:"getHeight",value:function(t,e){if(!this.isInZone(t,e))return console.error("Requesting height for ["+t+", "+e+"] outside zone bounds"),0;for(var n=Math.floor(t),r=Math.floor(e),i=[t-n,e-r],o=function(t,e){var n=[t[1][0]-t[0][0],t[1][1]-t[0][1]],r=[t[2][0]-t[0][0],t[2][1]-t[0][1]],i=1/(n[0]*r[1]-n[1]*r[0]),o=[i*r[1],-i*r[0],-i*n[1],i*n[0]];return[n=(e[0]-t[0][0])*o[0]+(e[1]-t[0][1])*o[1],r=(e[0]-t[0][0])*o[2]+(e[1]-t[0][1])*o[3]]},s=this.cells[(r-this.bounds[1])*this.size[0]+n-this.bounds[0]],a=Math.floor(s.length/3),c=0;c<a;c++){var u=this.tileset.getTileWalkPoly(s[3*c]);if(u)for(var l=0;l<u.length;l++){var f=o(u[l],i),h=f[0]+f[1];if(h<=1)return s[3*c+2]+(1-h)*u[l][0][2]+f[0]*u[l][1][2]+f[1]*u[l][2][2]}}return s[2]}},{key:"drawRow",value:function(t){this.engine.bindBuffer(this.vertexPosBuf[t],this.engine.shaderProgram.vertexPositionAttribute),this.engine.bindBuffer(this.vertexTexBuf[t],this.engine.shaderProgram.textureCoordAttribute),this.tileset.texture.attach(),this.engine.shaderProgram.setMatrixUniforms(),this.engine.gl.drawArrays(this.engine.gl.TRIANGLES,0,this.vertexPosBuf[t].numItems)}},{key:"draw",value:function(){if(this.loaded){this.spriteList.sort((function(t,e){return t.pos.y-e.pos.y})),this.engine.mvPushMatrix(),this.engine.setCamera();for(var t=0,e=0;e<this.size[1];e++)for(this.drawRow(e);t<this.spriteList.length&&this.spriteList[t].pos.y-this.bounds[1]<=e;)this.spriteList[t++].draw(this.engine);for(;t<this.spriteList.length;)this.spriteList[t++].draw(this.engine);this.engine.mvPopMatrix()}}},{key:"tick",value:function(t){this.loaded&&(this.checkInput(t),this.spriteList.forEach(function(){var e=I(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.tickOuter(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"checkInput",value:function(t){"o"===this.engine.keyboard.lastPressedKey("o")&&this.audio&&this.audio.playAudio()}},{key:"isInZone",value:function(t,e){return t>=this.bounds[0]&&e>=this.bounds[1]&&t<this.bounds[2]&&e<this.bounds[3]}},{key:"isWalkable",value:function(t,e,n){if(!this.isInZone(t,e))return null;for(var r in this.spriteDict)if(!this.spriteDict[r].walkable&&this.spriteDict[r].pos.x===t&&this.spriteDict[r].pos.y===e)return!1;return 0!=(this.walkability[(e-this.bounds[1])*this.size[0]+t-this.bounds[0]]&n)}},{key:"moveSprite",value:(o=I(regeneratorRuntime.mark((function t(e,n){var r,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],t.abrupt("return",new Promise((function(t,o){var s=i.getSpriteById(e);s.addAction(new S.aW(i.engine,"patrol",[s.pos.toArray(),n,r?200:600,i],s,t))})));case 2:case"end":return t.stop()}}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"spriteDialogue",value:(i=I(regeneratorRuntime.mark((function t(e,n){var r,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{autoclose:!0},t.abrupt("return",new Promise((function(t,o){var s=i.getSpriteById(e);s.addAction(new S.aW(i.engine,"dialogue",[n,!1,r],s,t))})));case 2:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})}],r&&j(e.prototype,r),t}();function Y(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e,this.zoneDict={},this.zoneList=[],this.afterTickActions=new u.Z,this.sortZones=this.sortZones.bind(this),this.canWalk=this.canWalk.bind(this),this.pathFind=this.pathFind.bind(this)}var e,n,r,i;return e=t,n=[{key:"runAfterTick",value:function(t){this.afterTickActions.add(t)}},{key:"sortZones",value:function(){this.zoneList.sort((function(t,e){return t.bounds[1]-e.bounds[1]}))}},{key:"loadZone",value:(r=regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.zoneDict[e]){t.next=2;break}return t.abrupt("return",this.zoneDict[e]);case 2:return n=new B(e,this),t.next=5,n.load();case 5:return this.zoneDict[e]=n,this.zoneList.push(n),n.runWhenLoaded(this.sortZones),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function s(t){F(o,n,i,s,a,"next",t)}function a(t){F(o,n,i,s,a,"throw",t)}s(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"removeZone",value:function(t){this.zoneList=this.zoneList.filter((function(e){return e.id!==t})),delete this.zoneDict[t]}},{key:"tick",value:function(t){for(var e in this.zoneDict)this.zoneDict[e].tick(t);this.afterTickActions.run(t)}},{key:"draw",value:function(){for(var t in this.zoneDict)this.zoneDict[t].draw(this.engine)}},{key:"zoneContaining",value:function(t,e){for(var n in this.zoneDict){var r=this.zoneDict[n];if(r.loaded&&r.isInZone(t,e))return r}return null}},{key:"pathFind",value:function(t,e){var n=[],r=!1,i=this,o=t[0],s=t[1];function a(t,o){var s=JSON.stringify([t[0],t[1]]);return!r&&(t[0]==e[0]&&t[1]==e[1]?(r=!0,i.canWalk(t,s,n)?[r,[].concat(Y(o),[e])]:[r,Y(o)]):!!i.canWalk(t,s,n)&&(n.push(s),i.getNeighbours.apply(i,Y(t)).map((function(e){return a(e,[].concat(Y(o),[[t[0],t[1],600]]))})).filter((function(t){return t})).flat()))}return i.getNeighbours(o,s).map((function(e){return a(e,[[t[0],t[1],600]])})).filter((function(t){return t[0]})).flat()}},{key:"getNeighbours",value:function(t,e){var n=[t,e+1,A.N.Up],r=[t,e-1,A.N.Down];return[n,[t-1,e,A.N.Left],[t+1,e,A.N.Right],r]}},{key:"canWalk",value:function(t,e,n){var r=this.zoneContaining.apply(this,Y(t));return!(n.indexOf(e)>=0||!r||!r.isWalkable.apply(r,Y(t))||!r.isWalkable(t[0],t[1],A.N.reverse(t[2])))}}],n&&D(e.prototype,n),t}();function U(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){U(o,r,i,s,a,"next",t)}function a(t){U(o,r,i,s,a,"throw",t)}s(void 0)}))}}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H=function t(){var e=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,"init",function(){var e=V(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._instance.engine=n,r=t._instance.world=new z(n),e.next=4,r.loadZone("dungeon-top");case 4:return e.next=6,r.loadZone("dungeon-bottom");case 6:r.zoneList.forEach((function(t){return t.runWhenLoaded((function(){return console.log("loading...done")}))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K(this,"loadSceneManifest",function(){var t=V(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),K(this,"loadAvatar",function(){var t=V(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),K(this,"exportAvatar",V(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))),K(this,"render",(function(n,r){t._instance.world.tick(r),e.draw(n)})),K(this,"draw",(function(e){t._instance.world.draw(e)})),K(this,"onKeyEvent",(function(e){"keydown"===e.type?t._instance.engine.keyboard.onKeyDown(e):t._instance.engine.keyboard.onKeyUp(e)})),K(this,"onTouchEvent",(function(e){switch(e.type){case"touchstart":case"touchend":case"touchmove":case"touchcancel":t._instance.engine.touch.onTouch(e)}})),K(this,"onMouseEvent",(function(t,e,n,r,i){})),this.shaders={fs:"\n  precision mediump float;\n  varying vec2 vTextureCoord;\n  uniform sampler2D uSampler;\n  \n  void main(void) {\n    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n    if(gl_FragColor.a < 0.1)\n        discard;\n  }\n",vs:"\n  attribute vec3 aVertexPosition;\n  attribute vec2 aTextureCoord;\n  \n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  \n  varying vec2 vTextureCoord;\n  \n  void main(void) {\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n  }\n"},t._instance||(t._instance=this),t._instance},$=n(379),G=n.n($),X=n(795),q=n.n(X),J=n(569),Q=n.n(J),tt=n(636),et=n.n(tt),nt=n(216),rt=n.n(nt),it=n(589),ot=n.n(it),st=n(913),at={};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e){return lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},lt(t,e)}function ft(t,e){if(e&&("object"===ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}at.styleTagTransform=ot(),at.setAttributes=et(),at.insert=Q().bind(null,"head"),at.domAPI=q(),at.insertStyleElement=rt(),G()(st.Z,at),st.Z&&st.Z.locals&&st.Z.locals;var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(a,t);var n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ht(i);if(o){var n=ht(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ft(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=s.call(this,t)).state={networkString:t.networkString,scene:new H,updated:Date.now()},e}return n=a,(r=[{key:"componentWillReceiveProps",value:function(t){console.log(t),JSON.stringify(this.props.networkString)!=JSON.stringify(t.networkString)&&this.setState({networkString:t.networkString,updated:Date.now()})}},{key:"render",value:function(){var t=this.state,n=t.networkString,r=t.updated,i=t.scene;return e().createElement(e().Fragment,null,e().createElement(x,{class:"pixos",key:r,width:640,height:480,SceneProvider:i,networkString:n}))}}])&&ut(n.prototype,r),a}(t.Component);const dt=(0,i.collect)(pt)})(),module.exports["calliope-pixos"]=r})();
//# sourceMappingURL=bundle.js.map