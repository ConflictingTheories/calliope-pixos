{"version":3,"file":"bundle.js","mappings":"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AAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,QDnJJC,QAAS,CACP,CAAEzZ,GAAI,QAAS6R,KAAM,mBAAoBjS,IAAK,EAAIN,EAAAA,GAAU,CAAC,EAAG,GAAI,IAAKpB,OAAQqB,EAAAA,EAAAA,IACjF,CAAES,GAAI,SAAU6R,KAAM,qBAAsBjS,IAAK,EAAIN,EAAAA,GAAU,CAAC,EAAG,IAAK,MAAOpB,OAAQqB,EAAAA,EAAAA,IACvF,CAAES,GAAI,SAAU6R,KAAM,qBAAsBjS,IAAK,EAAIN,EAAAA,GAAU,CAAC,GAAI,IAAK,MAAOpB,OAAQqB,EAAAA,EAAAA,KAG1F0G,QAAS,CACP,CACEjG,GAAI,aACJmG,QAAS,WACPvI,QAAQC,IAAI,gBAMlB6b,OAAQ,unBEvBV,SACEL,OAAQ,CAAC,EAAG,EAAG,GAAI,IAEnB5P,QAAS,QAET8P,MCpBG,CACDC,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAlBJ,OAoBK,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,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,WACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,OACAA,EAAAA,EAAAA,OAEC,CACDA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,WACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EAAAA,EAAAA,MACAA,EA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","sources":["webpack://calliope-pixos/./pixos/jsx/engine/actions/animate.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/changezone.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/chat.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/dance.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/dialogue.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/face.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/greeting.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/interact.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/move.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/patrol.jsx","webpack://calliope-pixos/./pixos/jsx/engine/actions/script.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/avatar.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/queue.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/sprite.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/npc/base/NPC.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/objects/chests/base.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/enums.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/object.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/tileset.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/action.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/loaders.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/math/matrix4.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/math/vector.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/resources.jsx","webpack://calliope-pixos/./pixos/jsx/scene/maps/dungeon-bottom/map.jsx","webpack://calliope-pixos/./pixos/jsx/scene/maps/dungeon-bottom/cells.jsx","webpack://calliope-pixos/./pixos/jsx/scene/maps/dungeon-top/map.jsx","webpack://calliope-pixos/./pixos/jsx/scene/maps/dungeon-top/cells.jsx","webpack://calliope-pixos/./pixos/jsx/scene/maps/room/map.jsx","webpack://calliope-pixos/./pixos/jsx/scene/maps/room/cells.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/characters/copy.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/characters/default.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/effects/fireplace.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/effects/fireplace.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/effects/base/animatedSprite.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/effects/waterspurt.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/effects/spurt.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/effects/base/animatedTile.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/furniture/door.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/furniture/door.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/furniture/fireplace.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/furniture/fireplace.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/furniture/tree.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/furniture/xmas-tree.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/npc/air-knight.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/npc/air-knight.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/npc/darkness.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/npc/darkness.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/npc/earth-knight.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/npc/earth-knight.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/npc/fire-knight.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/npc/fire-knight.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/npc/water-knight.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/npc/water-knight.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/objects/chests/blue.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/objects/chests/blue.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/objects/chests/metal.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/objects/chests/iron.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/objects/chests/red.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/objects/chests/red.jsx","webpack://calliope-pixos/./pixos/jsx/scene/sprites/objects/chests/wood.jsx","webpack://calliope-pixos/./pixos/jsx/engine/sprites/objects/chests/wood.jsx","webpack://calliope-pixos/./pixos/jsx/scene/tilesets/sewer/tiles.jsx","webpack://calliope-pixos/./pixos/jsx/scene/tilesets/sewer/tileset.jsx","webpack://calliope-pixos/./pixos/less/pixos.css","webpack://calliope-pixos/./node_modules/css-loader/dist/runtime/api.js","webpack://calliope-pixos/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://calliope-pixos/./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack://calliope-pixos/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://calliope-pixos/./node_modules/prop-types/index.js","webpack://calliope-pixos/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://calliope-pixos/./node_modules/react-is/cjs/react-is.production.min.js","webpack://calliope-pixos/./node_modules/react-is/index.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/state.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/constants.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/utils.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/paths.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/ls.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/debug.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/pubSub.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/proxyManager.js","webpack://calliope-pixos/external commonjs2 {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/batchedUpdates.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/updateManager.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/store.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/collect.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/shared/propTypes.js","webpack://calliope-pixos/./node_modules/react-recollect/dist/esm/production/index.js","webpack://calliope-pixos/./node_modules/react-recollect/index.esm.js","webpack://calliope-pixos/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://calliope-pixos/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://calliope-pixos/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://calliope-pixos/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://calliope-pixos/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://calliope-pixos/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://calliope-pixos//Users/src/Git/calliope-pixos/pixos/jsx/engine/actions|sync|/^\\.\\/.*\\.jsx$/","webpack://calliope-pixos/./pixos/jsx/engine/utils/obj/index.js","webpack://calliope-pixos/./pixos/jsx/engine/utils/obj/layout.js","webpack://calliope-pixos/./pixos/jsx/engine/utils/obj/material.js","webpack://calliope-pixos/./pixos/jsx/engine/utils/obj/mesh.js","webpack://calliope-pixos/./pixos/jsx/engine/utils/obj/utils.js","webpack://calliope-pixos//Users/src/Git/calliope-pixos/pixos/jsx/scene/maps|sync|/^\\.\\/.*\\/map\\.jsx$/","webpack://calliope-pixos//Users/src/Git/calliope-pixos/pixos/jsx/scene/sprites|sync|/^\\.\\/.*\\.jsx$/","webpack://calliope-pixos//Users/src/Git/calliope-pixos/pixos/jsx/scene/tilesets|sync|/^\\.\\/.*\\/tileset\\.jsx$/","webpack://calliope-pixos/external commonjs2 {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://calliope-pixos/webpack/bootstrap","webpack://calliope-pixos/webpack/runtime/compat get default export","webpack://calliope-pixos/webpack/runtime/define property getters","webpack://calliope-pixos/webpack/runtime/hasOwnProperty shorthand","webpack://calliope-pixos/webpack/runtime/make namespace object","webpack://calliope-pixos/./pixos/jsx/engine/core/texture.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/hud.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/gamepad.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/speech.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/index.jsx","webpack://calliope-pixos/./pixos/jsx/engine/utils/keyboard.jsx","webpack://calliope-pixos/./pixos/jsx/components/WebGLView.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/zone.jsx","webpack://calliope-pixos/./pixos/jsx/engine/core/world.jsx","webpack://calliope-pixos/./pixos/jsx/scene/index.jsx","webpack://calliope-pixos/./pixos/jsx/engine/shaders/fs.jsx","webpack://calliope-pixos/./pixos/jsx/engine/shaders/vs.jsx","webpack://calliope-pixos/./pixos/less/pixos.css?f46e","webpack://calliope-pixos/./pixos/jsx/index.jsx"],"sourcesContent":["/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n// Animate a sprite without moving them\nexport default {\n  init: function (length, untilFrame, finish) {\n    console.log(\"loading - animate\");\n    this.length = length;\n    this.untilFrame = untilFrame;\n    this.finish = finish;\n  },\n  tick: function (time) {\n    if (!this.loaded) return;\n    // Set facing\n    if (this.facing && this.facing != this.sprite.facing) this.sprite.setFacing(this.facing);\n    // Transition & Move\n    let endTime = this.startTime + this.length;\n    let frac = (time - this.startTime) / this.length;\n    if (time >= endTime) {\n      frac = 1;\n      if (this.finish) this.finish(true);\n    }\n    // Get next frame\n    let newFrame = Math.floor(frac * this.untilFrame);\n    if (newFrame != this.sprite.animFrame) this.sprite.setFrame(newFrame);\n\n    return time >= endTime;\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector, set, lerp } from \"../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../engine/utils/enums.jsx\";\n\nexport default {\n  init: async function (fromZoneId, from, toZoneId, to, length) {\n    console.log(\"loading - change zone\");\n    this.fromZone = await this.sprite.zone.world.loadZone(fromZoneId);\n    this.toZone = await this.sprite.zone.world.loadZone(toZoneId);\n    this.from = new Vector(...from);\n    this.to = new Vector(...to);\n    this.facing = Direction.fromOffset([Math.round(to.x - from.x), Math.round(to.y - from.y)]);\n    this.length = length;\n  },\n  tick: function (time) {\n    if (!this.toZone.loaded || !this.fromZone.loaded) return;\n    // Set facing\n    if (this.facing && this.facing != this.sprite.facing) {\n      this.sprite.facing = this.facing;\n      this.sprite.setFrame(0);\n    }\n    // Time Animation\n    let endTime = this.startTime + this.length;\n    let frac = (time - this.startTime) / this.length;\n    if (time >= endTime) {\n      set(this.to, this.sprite.pos);\n      frac = 1;\n    } else lerp(this.from, this.to, frac, this.sprite.pos);\n    // New Frame\n    let newFrame = Math.floor(frac * 4);\n    if (newFrame != this.sprite.animFrame) this.sprite.setFrame(newFrame);\n    // Move into the new zone\n    if (!this.sprite.zone.isInZone(this.sprite.pos.x, this.sprite.pos.y)) {\n      this.fromZone.removeSprite(this.sprite.id);\n      // Defer until aftertick to stop the sprite being ticked twice\n      this.sprite.zone.world.runAfterTick(\n        function () {\n          this.toZone.addSprite(this.sprite);\n          console.log(\n            \"sprite '\" + this.sprite.id + \"' changed zone from '\" + this.fromZone.id + \"' to '\" + this.toZone.id + \"'\"\n          );\n        }.bind(this)\n      );\n    }\n    // Calculate new height\n    let hx = this.sprite.pos.x + this.sprite.hotspotOffset.x;\n    let hy = this.sprite.pos.y + this.sprite.hotspotOffset.y;\n    if (!this.switchRenderZone && !this.fromZone.isInZone(hx, hy)) {\n      this.switchRenderZone = true;\n    }\n    this.sprite.pos.z = (this.switchRenderZone ? this.toZone : this.fromZone).getHeight(hx, hy);\n\n    return time >= endTime;\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default {\n  // Initialize Dialogue Object\n  init: function (prompt, scrolling = true, options = {}) {\n    console.log(\"loading - chat\");\n    this.engine = this.sprite.engine;\n    this.text = \"\";\n    this.prompt = prompt;\n    this.scrolling = scrolling;\n    this.line = 0;\n    this.options = options;\n    this.completed = false;\n    this.lastKey = new Date().getTime();\n  },\n  // Update & Scroll\n  tick: function (time) {\n    if (!this.loaded) return;\n    // Check for Dialogue Completion (TODO - manual triggers + scroll / sections)\n    if (this.options && this.options.autoclose) {\n      this.endTime = this.endTime ? this.endTime : this.options.endTime ?? new Date().getTime() + 10000; // 10 seconds default if autoclose\n      if (time > this.endTime) {\n        this.completed = true;\n      }\n    }\n    // Handle Input\n    this.checkInput(time);\n    this.textbox = this.engine.scrollText(this.prompt + this.text, this.scrolling, this.options);\n    return this.completed;\n  },\n  // Handle Keyboard\n  checkInput: function (time) {\n    if (time > this.lastKey + 100) {\n      let skipChar = false;\n      switch (this.engine.keyboard.lastPressedCode()) {\n        case \"Escape\":\n          this.completed = true;\n          skipChar = true;\n          break;\n        case \"Backspace\":\n          let arr = this.text.split(\"\");\n          arr.pop();\n          this.text = arr.join(\"\");\n          this.lastKey = time;\n          skipChar = true;\n          break;\n        case \"Enter\":\n          this.engine.setGreeting(this.text);\n          this.sprite.speech.clearHud();\n          this.speechbox = this.sprite.speech.scrollText(this.text);\n          this.sprite.speech.loadImage();\n          this.completed = true;\n          skipChar = true;\n          break;\n      }\n      // debounce keypresses\n      // write to chat box\n      if (!skipChar) {\n        let char = this.engine.keyboard.lastPressedKey();\n        if (char) {\n          this.lastKey = time;\n          this.text += \"\" + char;\n        }\n      }\n    }\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../engine/utils/enums.jsx\";\nimport { AudioLoader } from \"../utils/loaders.jsx\";\n\nexport default {\n  init: function (moveLength, zone) {\n    console.log(\"loading - dance\", arguments);\n    this.zone = zone;\n    this.moveLength = moveLength;\n    this.startTime = new Date().getTime();\n    this.lastKey = new Date().getTime();\n    this.completed = false;\n    this.audio = new AudioLoader(\"/pixos/audio/seed.mp3\");\n    if (this.zone.audio) this.zone.audio.pauseAudio();\n    this.audio.playAudio();\n    this.audioContext = new AudioContext();\n    this.analyser = this.audioContext.createAnalyser();\n    this.audioSource = this.audioContext.createMediaElementSource(this.audio.audio);\n    this.audioSource.connect(this.analyser);\n    this.analyser.connect(this.audioContext.destination);\n  },\n  tick: function (time) {\n    if (!this.loaded) return;\n    // listen to audio freq data\n    let fbc_array = new Uint8Array(this.analyser.frequencyBinCount);\n    this.analyser.getByteFrequencyData(fbc_array);\n    this.checkInput(time);\n    // load up moves - todo (improve this and make it less manual)\n    let endTime = this.startTime + this.moveLength;\n    if (time > endTime) {\n      // set facing based on audio\n      let bar_pos,bar_width,bar_height = null;\n      for (var i = 0; i < 16; i++) {\n        bar_pos = i * 4;\n        bar_width = 2;\n        bar_height = -(fbc_array[i] / 2);\n      }\n      console.log(bar_pos, bar_width, bar_height);\n      let facing = this.sprite.facing == Direction.Right ? Direction.Left : Direction.Right;\n      this.sprite.addAction(this.sprite.faceDir(facing));\n      this.startTime = time;\n    }\n    // next move\n    return this.completed; // loop\n  },\n\n  tick: function (time) {\n    if (!this.loaded) return;\n    // listen to audio freq data\n    let fbc_array = new Uint8Array(this.analyser.frequencyBinCount);\n    this.analyser.getByteFrequencyData(fbc_array);\n    this.checkInput(time);\n    // load up moves - todo (improve this and make it less manual)\n    let endTime = this.startTime + this.moveLength;\n    if (time > endTime) {\n      // set facing based on audio\n      let facing = this.sprite.facing == Direction.Right ? Direction.Left : Direction.Right;\n     \n\n      let bar_pos,bar_width,bar_height = null;\n      for (var i = 0; i < 16; i++) {\n        bar_pos = i * 4;\n        bar_width = 2;\n        bar_height = -(fbc_array[i] / 2);\n      }\n      if (bar_height > 80) {\n        facing = this.sprite.facing == Direction.Right ? Direction.Down : Direction.Left;\n      } else {\n        facing = this.sprite.facing == Direction.Up ? Direction.Left : Direction.Down;\n      }\n      console.log(bar_pos, bar_width, bar_height);\n      console.log(facing);\n      this.sprite.addAction(this.sprite.faceDir(facing));\n      this.startTime = time;\n    }\n    // next move\n    return this.completed; // loop\n  },\n\n  // Handle Keyboard\n  checkInput: function (time) {\n    if (time > this.lastKey + this.moveLength) {\n      switch (this.sprite.engine.keyboard.lastPressed(\"q\")) {\n        // close dialogue on q key press\n        case \"q\":\n          console.log(\"stopping dance\");\n          this.audio.pauseAudio();\n          this.completed = true; // toggle\n        default:\n          this.lastKey = new Date().getTime();\n          return null;\n      }\n    }\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default {\n  // Initialize Dialogue Object\n  init: function (text, scrolling = true, options = {}) {\n    console.log(\"loading - dialogue\");\n    this.engine = this.sprite.engine;\n    this.text = text; // holds queue of dialogue\n    this.displayText = typeof text === \"string\" ? text : this.text.shift(); // current statement\n    this.scrolling = scrolling;\n    this.options = options;\n    this.completed = false;\n    this.lastText = false;\n    this.lastKey = new Date().getTime();\n    this.loaded = true;\n  },\n  // Update & Scroll\n  tick: function (time) {\n    if (!this.loaded) return;\n    // Check for Dialogue Completion (TODO - manual triggers + scroll / sections)\n    if (this.options && this.options.autoclose) {\n      this.endTime = this.endTime ? this.endTime : this.options.endTime ?? new Date().getTime() + 10000; // 10 seconds default if autoclose\n      if (time > this.endTime) {\n        this.completed = true;\n      }\n    }\n    // Handle Input\n    this.checkInput(time);\n\n    // Dialogue\n    this.sprite.speak(this.displayText);\n\n    // Callback on Completion\n    if (this.completed && this.options.onClose) {\n      this.sprite.speech.clearHud();\n      this.options.onClose();\n    }\n    return this.completed;\n  },\n  // Handle Keyboard\n  checkInput: function (time) {\n    if (time > this.lastKey + 100) {\n      let touchmap = this.engine.gamepad.checkInput();\n      switch (this.engine.keyboard.lastPressedCode()) {\n        case \"Escape\":\n          console.log(\"closing dialogue\");\n          this.sprite.speak(false);\n          this.completed = true; // toggle\n          break;\n        case \"Enter\":\n          if (typeof this.text === \"string\" || this.text.length === 0) {\n            this.completed = true;\n          } else {\n            this.completed = false;\n            this.displayText = this.text.shift();\n            this.sprite.speak(this.displayText);\n          }\n          break;\n      }\n      // gamepad\n      if (touchmap[\"a\"] === 1) {\n        if (typeof this.text === \"string\" || this.text.length === 0) {\n          this.completed = true;\n        } else {\n          this.completed = false;\n          this.displayText = this.text.shift();\n          this.sprite.speak(this.displayText);\n        }\n        return;\n      }\n      if (touchmap[\"x\"] === 1) {\n        console.log(\"closing dialogue\");\n        this.sprite.speak(false);\n        this.completed = true; // toggle\n        return;\n      }\n    }\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default {\n  init: function (facing) {\n    console.log(\"loading - face\");\n    this.facing = facing;\n  },\n  tick: function (time) {\n    if (this.facing && this.facing != this.sprite.facing) this.sprite.setFacing(this.facing);\n    return true;\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default {\n  // Initialize Dialogue Object\n  init: function (greeting, options = {}) {\n    console.log(\"loading - greeting\");\n    this.engine = this.sprite.engine;\n    this.greeting = greeting;\n    this.options = options;\n    this.completed = false;\n  },\n  // Update & Scroll\n  tick: function (time) {\n    if (!this.loaded) return;\n    this.engine.setGreeting(this.text)\n    return true;\n  }\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../engine/utils/enums.jsx\";\n\nexport default {\n  init: function (from, facing, world) {\n    console.log(\"loading - interact\", arguments);\n    this.world = world;\n    this.from = new Vector(...from);\n    this.facing = facing;\n    this.offset = Direction.toOffset(facing);\n    this.lastKey = new Date().getTime();\n    this.completed = false;\n    // Determine Tile\n    this.to = [from[0] + this.offset[0], from[1] + this.offset[1]];\n    // Check for Sprites at that point\n    this.zone = world.zoneContaining(...this.to);\n    // Trigger interaction on Sprite\n    this.spriteList = this.zone.spriteList.filter((sprite) => sprite.pos.x === this.to[0] && sprite.pos.y === this.to[1]);\n    // -- pass through reference to \"finish()\" callback\n    this.finish = this.finish.bind(this);\n    // Trigger\n    this.interact();\n  },\n  // Trigger interactions in sprites\n  interact: function () {\n    if (this.spriteList.length === 0) this.completed = true;\n    this.spriteList.forEach((sprite) => {\n      let faceChange = sprite.faceDir(Direction.reverse(this.facing));\n      if (faceChange) {\n        sprite.addAction(faceChange); // face towards avatar\n      }\n      return sprite.interact ? this.zone.spriteDict[sprite.id].interact(this.sprite, this.finish) : null;\n    });\n  },\n  // Callback to clear interaction\n  finish: function (result) {\n    if (result) this.completed = true;\n  },\n  // check input and completion\n  tick: function (time) {\n    if (!this.loaded) return;\n    this.checkInput(time);\n    return this.completed; // loop\n  },\n  // Handle Keyboard\n  checkInput: function (time) {\n    if (time > this.lastKey + this.length) {\n      let touchmap = this.sprite.engine.gamepad.checkInput();\n      switch (this.sprite.engine.keyboard.lastPressed(\"q\")) {\n        // close dialogue on q key press\n        case \"q\":\n          // Needs to Cancel the Interaction on the Affected Sprite as well\n          // -- todo\n          //\n          console.log(\"stopping interaction\");\n          this.completed = true; // toggle\n          break;\n        default:\n          this.lastKey = new Date().getTime();\n          return null;\n      }\n      // gamepad\n      if (touchmap[\"x\"] === 1) {\n        this.completed = true;\n      }\n    }\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector, set, lerp } from \"../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../engine/utils/enums.jsx\";\n\nexport default {\n  init: function (from, to, length, zone) {\n    console.log(\"loading - move\");\n    this.zone = zone;\n    this.from = new Vector(...from);\n    this.to = new Vector(...to);\n    this.facing = Direction.fromOffset([Math.round(to.x - from.x), Math.round(to.y - from.y)]);\n    this.length = length;\n    // interactions\n    console.log(this.zone)\n    this.spriteList = this.zone.spriteList.filter((sprite) => sprite.pos.x === this.to.x && sprite.pos.y === this.to.y);\n  },\n  // move\n  tick: function (time) {\n    if (!this.loaded) return;\n    // Set facing\n    if (this.facing && this.facing != this.sprite.facing) this.sprite.setFacing(this.facing);\n    // Transition & Move\n    let endTime = this.startTime + this.length;\n    let frac = (time - this.startTime) / this.length;\n    if (time >= endTime) {\n      set(this.to, this.sprite.pos);\n      frac = 1;\n      this.onStep();\n    } else lerp(this.from, this.to, frac, this.sprite.pos);\n    // Get next frame\n    let newFrame = Math.floor(frac * 4);\n    if (newFrame != this.sprite.animFrame) this.sprite.setFrame(newFrame);\n    // Determine height\n    let hx = this.sprite.pos.x + this.sprite.hotspotOffset.x;\n    let hy = this.sprite.pos.y + this.sprite.hotspotOffset.y;\n    this.sprite.pos.z = this.sprite.zone.getHeight(hx, hy);\n\n    return time >= endTime;\n  },\n   // Trigger interactions in sprite when finished moving\n   onStep: function () {\n     console.log('on steppping', this.spriteList)\n    if (this.spriteList.length === 0) this.completed = true;\n    this.spriteList.forEach((sprite) => {\n      console.log(sprite);\n      return sprite.onStep ? this.zone.spriteDict[sprite.id].onStep(this.sprite) : null;\n    });\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../engine/utils/math/vector.jsx\";\nimport { ActionLoader } from \"../utils/loaders.jsx\";\nimport { Direction } from \"../../engine/utils/enums.jsx\";\nimport { AudioLoader } from \"../utils/loaders.jsx\";\n\nexport default {\n  init: function (from, to, moveLength, zone) {\n    console.log(\"loading - patrol\", arguments);\n    this.zone = zone;\n    this.from = new Vector(...from);\n    this.to = new Vector(...to);\n    this.lastKey = new Date().getTime();\n    this.completed = false;\n    this.direction = 1;\n    this.audio = new AudioLoader('/pixos/audio/seed.mp3');\n    // Determine Path to Walk\n    [this.hasMoves, this.moveList] = this.sprite.zone.world.pathFind(from, to);\n    if (!this.hasMoves) {\n      this.completed = true; // no path - do not patrol\n    }\n    this.moveIndex = 1; // holds index position\n    this.moveLength = moveLength; // length of time per move\n    if(this.zone.audio)\n      this.zone.audio.pauseAudio();\n    this.audio.playAudio();\n  },\n  tick: function (time) {\n    if (!this.loaded) return;\n    this.checkInput(time);\n    // load up moves - todo (improve this and make it less manual)\n    let endTime = this.startTime + this.moveLength;\n    if (time > endTime ) {\n      let move = this.moveList[this.moveIndex];\n      if (this.moveList.length > 2) {\n        // last position (for facing)\n        let last =\n          this.moveIndex == 0\n            ? this.moveList[this.moveIndex + 1]\n            : this.moveIndex + 1 >= this.moveList.length\n            ? this.moveList[this.moveList.length - 1]\n            : this.moveList[this.moveIndex - 1];\n        let facing = Direction.fromOffset([Math.round(move[0] - last[0]), Math.round(move[1] - last[1])]);\n        // Check for zone change\n        if (!this.sprite.zone.isInZone(move[0], move[1])) {\n          let zone = this.sprite.zone.world.zoneContaining(move[0], move[1]);\n          if (!zone || !zone.loaded || !zone.isWalkable(move[0], move[1], Direction.reverse(facing))) {\n            this.currentAction = this.sprite.faceDir(facing);\n          } else {\n            this.currentAction = new ActionLoader(\n              this.sprite.engine,\n              \"changezone\",\n              [this.sprite.zone.id, this.sprite.pos.toArray(), zone.id, move, this.moveLength],\n              this.sprite\n            );\n          }\n        } else {\n          // Load Next move\n          this.currentAction = new ActionLoader(this.sprite.engine, \"move\", [last, move, this.moveLength, this.zone], this.sprite);\n        }\n        // set facing\n        if (this.currentAction) {\n          this.currentAction.facing = facing;\n          this.sprite.addAction(this.currentAction);\n        }\n      }\n      // stop when done\n      if (this.moveIndex + this.direction >= this.moveList.length) {\n        this.direction *= -1;\n        this.completed = true;\n        if(this.zone.audio)\n          this.zone.audio.playAudio();\n        this.audio.pauseAudio();\n      }\n      this.moveIndex += this.direction;\n      this.startTime = time;\n    }\n    return this.completed; // loop\n  },\n  // Handle Keyboard\n  checkInput: function (time) {\n    if (time > this.lastKey + this.moveLength) {\n      switch (this.sprite.engine.keyboard.lastPressed(\"q\")) {\n        // close dialogue on q key press\n        case \"q\":\n          console.log(\"stopping patrol\");\n          this.audio.pauseAudio();\n          this.completed = true; // toggle\n        default:\n          this.lastKey = new Date().getTime();\n          return null;\n      }\n    }\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default {\n  init: function (triggerId, zone, onCompleted = null) {\n    console.log(\"loading - script\", arguments);\n    this.zone = zone;\n    this.world = zone.world;\n    this.lastKey = new Date().getTime();\n    this.completed = false;\n    this.onCompleted = () => console.log(\"script finished\");\n    if (onCompleted) this.onCompleted = onCompleted;\n    // Determine Tile\n    this.triggerId = triggerId;\n    // Trigger\n    this.triggerScript();\n  },\n  // Trigger interactions in sprites\n  triggerScript: function () {\n    if (!this.triggerId) this.completed = true;\n    Promise.all(this.zone.scripts.filter((x) => x.id === this.triggerId).map(async (x) => await x.trigger.call(this.zone))).then(\n      () => {\n        this.completed = true;\n      }\n    );\n  },\n  // check input and completion\n  tick: function (time) {\n    if (!this.loaded) return;\n    if (this.completed) this.onCompleted();\n    return this.completed; // loop\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector, set } from \"../utils/math/vector.jsx\";\nimport { Direction } from \"../utils/enums.jsx\";\nimport { ActionLoader } from \"../utils/loaders.jsx\";\nimport Sprite from \"./sprite.jsx\";\n\n// Special class of Sprite which is controlled by the player\n//\n// -- Additional methods such as saving / importing and input handling\n//\nexport default class Avatar extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.handleWalk = this.handleWalk.bind(this);\n  }\n  // Initialization Hook\n  init() {\n    console.log(\"- avatar hook\", this.id, this.pos);\n  }\n  // Update\n  tick(time) {\n    // ONLY ONE MOVE AT A TIME\n    if (!this.actionList.length) {\n      let ret = this.checkInput();\n      if (ret) {\n        this.addAction(ret);\n      }\n    }\n    if (this.bindCamera) set(this.pos, this.engine.cameraPosition);\n  }\n  // Reads for Input to Respond to\n  checkInput() {\n    // Action Keys\n    let key = this.engine.keyboard.lastPressedCode();\n    let touchmap = this.engine.gamepad.checkInput();\n    // Keyboard\n    switch (key) {\n      // Bind Camera\n      case \"b\":\n        this.bindCamera = true;\n        break;\n      // Fixed Camera\n      case \"c\":\n        this.bindCamera = false;\n        break;\n      case \"z\":\n        // this.zone.world.removeZone(\"room\");\n        this.zone.world.removeZone(\"room\");\n        this.zone.world.loadZone(\"dungeon-top\");\n        this.zone.world.loadZone(\"dungeon-bottom\");\n        break;\n      case \"y\":\n        this.zone.world.removeZone(\"dungeon-top\");\n        this.zone.world.removeZone(\"dungeon-bottom\");\n        this.zone.world.loadZone(\"room\");\n        break;\n      // Interact with tile\n      case \"k\":\n      case \"Enter\":\n        return new ActionLoader(this.engine, \"interact\", [this.pos.toArray(), this.facing, this.zone.world], this);\n      // Help Dialogue\n      case \"h\":\n        return new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Welcome! You pressed help! Press Escape to close\", false, { autoclose: true }],\n          this\n        );\n      // Chat Message\n      case \"m\":\n      case \" \":\n        return new ActionLoader(this.engine, \"chat\", [\">:\", true, { autoclose: false }], this);\n      // Clear Speech\n      case \"q\":\n      case \"Escape\":\n        this.speech.clearHud();\n        break;\n    }\n    // Gamepad controls - TODO\n    if (touchmap[\"a\"] === 1) {\n      // select\n      return new ActionLoader(this.engine, \"interact\", [this.pos.toArray(), this.facing, this.zone.world], this);\n    }\n    if (touchmap[\"x\"] === 1) {\n      // camera\n      this.bindCamera = !this.bindCamera;\n    }\n    // Walk\n    return this.handleWalk(this.engine.keyboard.lastPressedKey(), touchmap);\n  }\n  // walk between tiles\n  handleWalk(key, touchmap) {\n    let moveTime = 600; // move time in ms\n    let facing = Direction.None;\n    // Read Key presses\n    switch (key) {\n      // Movement\n      case \"w\":\n        facing = Direction.Up;\n        break;\n      case \"s\":\n        facing = Direction.Down;\n        break;\n      case \"a\":\n        facing = Direction.Left;\n        break;\n      case \"d\":\n        facing = Direction.Right;\n        break;\n      // Patrol\n      case \"u\":\n        return new ActionLoader(this.engine, \"dance\", [300, this.zone], this);\n      // Patrol\n      case \"p\":\n        return new ActionLoader(\n          this.engine,\n          \"patrol\",\n          [this.pos.toArray(), new Vector(8, 13, this.pos.z).toArray(), 600, this.zone],\n          this\n        );\n      // Run\n      case \"r\":\n        return new ActionLoader(\n          this.engine,\n          \"patrol\",\n          [this.pos.toArray(), new Vector(8, 13, this.pos.z).toArray(), 200, this.zone],\n          this\n        );\n    }\n\n    // Mobile Gamepad\n    // X axis - joystick\n    if (touchmap[\"x-dir\"] === 1) {\n      // right\n      facing = Direction.Right;\n    }\n    if (touchmap[\"x-dir\"] === -1) {\n      // left\n      facing = Direction.Left;\n    }\n    // Y axis - joystick\n    if (touchmap[\"y-dir\"] === 1) {\n      // down\n      facing = Direction.Down;\n    }\n    if (touchmap[\"y-dir\"] === -1) {\n      // up\n      facing = Direction.Up;\n    }\n\n    // Running?\n    if (this.engine.keyboard.shift || touchmap[\"y\"] === 1) {\n      moveTime = 200;\n    } else {\n      moveTime = 600;\n    }\n    // Check Direction\n    if (this.facing !== facing) {\n      return this.faceDir(facing);\n    }\n    // Determine Location\n    let from = this.pos;\n    let dp = Direction.toOffset(facing);\n    let to = new Vector(...[Math.round(from.x + dp[0]), Math.round(from.y + dp[1]), 0]);\n    // Check zones if changing\n    if (!this.zone.isInZone(to.x, to.y)) {\n      let z = this.zone.world.zoneContaining(to.x, to.y);\n      if (!z || !z.loaded || !z.isWalkable(to.x, to.y, Direction.reverse(facing))) {\n        return this.faceDir(facing);\n      }\n      return new ActionLoader(this.engine, \"changezone\", [this.zone.id, this.pos.toArray(), z.id, to.toArray(), moveTime], this);\n    }\n    // Check Walking\n    if (!this.zone.isWalkable(to.x, to.y, Direction.reverse(facing))) {\n      return this.faceDir(facing);\n    }\n    return new ActionLoader(this.engine, \"move\", [this.pos.toArray(), to.toArray(), moveTime, this.zone], this);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default class ActionQueue {\n  constructor() {\n    this.actions = [];\n  }\n  // Add to Queue\n  add(action) {\n    this.actions.push(action);\n  }\n  // Run Action\n  run() {\n    let args = arguments;\n    this.actions = this.actions.filter((action) => {\n      return action(args);\n    });\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nimport { Vector, set } from \"../utils/math/vector.jsx\";\nimport { Direction } from \"../utils/enums.jsx\";\nimport ActionQueue from \"./queue.jsx\";\nimport { ActionLoader } from \"../utils/loaders.jsx\";\nimport { rotate, translate } from \"../utils/math/matrix4.jsx\";\n\nexport default class Sprite {\n  constructor(engine) {\n    this.engine = engine;\n    this.templateLoaded = false;\n    this.drawOffset = new Vector(0, 0, 0);\n    this.hotspotOffset = new Vector(0, 0, 0);\n    this.animFrame = 0;\n    this.fixed = false;\n    this.pos = new Vector(0, 0, 0);\n    this.scale = new Vector(1, 1, 1);\n    this.facing = Direction.Right;\n    this.actionDict = {};\n    this.actionList = [];\n    this.speech = {};\n    this.portrait = null;\n    this.onLoadActions = new ActionQueue();\n    this.getTexCoords = this.getTexCoords.bind(this);\n    this.inventory = [];\n    this.onTilesetOrTextureLoaded = this.onTilesetOrTextureLoaded.bind(this);\n    this.blocking = true; // default - cannot passthrough\n    this.override = false;\n  }\n\n  update(data) {\n    Object.assign(this, data);\n  }\n\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // Load Texture / Location\n  onLoad(instanceData) {\n    if (this.loaded) return;\n    if (!this.src || !this.sheetSize || !this.tileSize || !this.frames) {\n      console.error(\"Invalid sprite definition\");\n      return;\n    }\n    console.log(\"zoning ---->>\");\n    // Zone Information\n    this.zone = instanceData.zone;\n    if (instanceData.id) this.id = instanceData.id;\n    if (instanceData.pos) set(instanceData.pos, this.pos);\n    if (instanceData.facing && instanceData.facing !== 0) this.facing = instanceData.facing;\n    if (instanceData.zones && instanceData.zones !== null) this.zones = instanceData.zones;\n    console.log(\"facing\", Direction.spriteSequence(this.facing));\n    // Texture Buffer\n    this.texture = this.engine.loadTexture(this.src);\n    console.log(\"texture ---->>\");\n    this.texture.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n    this.vertexTexBuf = this.engine.createBuffer(this.getTexCoords(), this.engine.gl.DYNAMIC_DRAW, 2);\n\n    // // Speech bubble\n    if (this.enableSpeech) {\n      this.speech = this.engine.loadSpeech(this.id, this.engine.mipmap);\n      console.log(\"speech ---->>\");\n      this.speech.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n      this.speechTexBuf = this.engine.createBuffer(this.getSpeechBubbleTexture(), this.engine.gl.DYNAMIC_DRAW, 2);\n    }\n    // load Portrait\n    if (this.portraitSrc) {\n      this.portrait = this.engine.loadTexture(this.portraitSrc);\n      console.log(\"portrait ---->>\");\n      this.portrait.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n    }\n    //\n    this.zone.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this));\n  }\n\n  // Definition Loaded\n  onTilesetDefinitionLoaded() {\n    let s = this.zone.tileset.tileSize;\n    let ts = [this.tileSize[0] / s, this.tileSize[1] / s];\n    let v = [\n      [0, 0, 0],\n      [ts[0], 0, 0],\n      [ts[0], 0, ts[1]],\n      [0, 0, ts[1]],\n    ];\n    let poly = [\n      [v[2], v[3], v[0]],\n      [v[2], v[0], v[1]],\n    ].flat(3);\n    this.vertexPosBuf = this.engine.createBuffer(poly, this.engine.gl.STATIC_DRAW, 3);\n    if (this.enableSpeech) {\n      this.speechVerBuf = this.engine.createBuffer(this.getSpeechBubbleVertices(), this.engine.gl.STATIC_DRAW, 3);\n    }\n    this.zone.tileset.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n  }\n\n  // After Tileset / Texture Loaded\n  onTilesetOrTextureLoaded() {\n    if (\n      !this ||\n      this.loaded ||\n      !this.zone.tileset.loaded ||\n      !this.texture.loaded ||\n      (this.enableSpeech && this.speech && !this.speech.loaded) ||\n      (this.portrait && !this.portrait.loaded)\n    )\n      return;\n\n    this.init(); // Hook for sprite implementations\n    if (this.enableSpeech && this.speech) {\n      if (this.speech.clearHud) {\n        this.speech.clearHud();\n        this.speech.writeText(this.id);\n        this.speech.loadImage();\n      }\n    }\n    this.loaded = true;\n    this.onLoadActions.run();\n    console.log(\"Initialized sprite '\" + this.id + \"' in zone '\" + this.zone.id + \"'\");\n  }\n\n  // Get Texture Coordinates\n  getTexCoords() {\n    if (this.id == \"chest\") console.log(\"texture frames\", this.facing, Direction.spriteSequence(this.facing));\n    let frames = this.frames[Direction.spriteSequence(this.facing)] ?? this.frames[\"up\"]; //default up\n    let length = this.frames[Direction.spriteSequence(this.facing)].length;\n    let t = frames[this.animFrame % length];\n    let ss = this.sheetSize;\n    let ts = this.tileSize;\n    let bl = [(t[0] + ts[0]) / ss[0], t[1] / ss[1]];\n    let tr = [t[0] / ss[0], (t[1] + ts[1]) / ss[1]];\n    let v = [bl, [tr[0], bl[1]], tr, [bl[0], tr[1]]];\n    let poly = [\n      [v[0], v[1], v[2]],\n      [v[0], v[2], v[3]],\n    ];\n    return poly.flat(3);\n  }\n\n  // Speech Area texture\n  getSpeechBubbleTexture() {\n    return [\n      [1.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 0.0],\n      [1.0, 1.0],\n      [0.0, 0.0],\n      [1.0, 0.0],\n    ].flat(3);\n  }\n\n  // speech bubble position\n  getSpeechBubbleVertices() {\n    return [\n      new Vector(...[2, 0, 4]).toArray(),\n      new Vector(...[0, 0, 4]).toArray(),\n      new Vector(...[0, 0, 2]).toArray(),\n      new Vector(...[2, 0, 4]).toArray(),\n      new Vector(...[0, 0, 2]).toArray(),\n      new Vector(...[2, 0, 2]).toArray(),\n    ].flat(3);\n  }\n\n  // Draw Sprite Sprite\n  draw() {\n    if (!this.loaded) return;\n    // this.engine.disableObjAttributes();\n    this.engine.mvPushMatrix();\n    // Undo rotation so that character plane is normal to LOS\n    translate(this.engine.uViewMat, this.engine.uViewMat, this.drawOffset.toArray());\n    translate(this.engine.uViewMat, this.engine.uViewMat, this.pos.toArray());\n    // scale & rotate sprite to handle walls\n    // if (!this.fixed) this.engine.shaderProgram.setMatrixUniforms(new Vector(1, Math.cos(this.engine.cameraAngle / 180), 1));\n    rotate(this.engine.uViewMat, this.engine.uViewMat, this.engine.degToRad(this.engine.cameraAngle), [1, 0, 0]);\n    // Bind texture\n    this.engine.bindBuffer(this.vertexPosBuf, this.engine.shaderProgram.aVertexPosition);\n    this.engine.bindBuffer(this.vertexTexBuf, this.engine.shaderProgram.aTextureCoord);\n    this.engine.bindBuffer(\n      this.engine.createBuffer([1, 1, 1], this.engine.gl.DYNAMIC_DRAW, 3),\n      this.engine.shaderProgram.aDiffuse\n    );\n    this.engine.bindBuffer(\n      this.engine.createBuffer([0,0,0], this.engine.gl.DYNAMIC_DRAW, 3),\n      this.engine.shaderProgram.aSpecular\n    );\n    this.engine.bindBuffer(\n      this.engine.createBuffer([0, 0, 0], this.engine.gl.DYNAMIC_DRAW, 1),\n      this.engine.shaderProgram.aSpecularExponentAttribute\n    );\n    this.texture.attach();\n    // Draw\n    // if (this.fixed)\n    this.engine.shaderProgram.setMatrixUniforms();\n    this.engine.gl.depthFunc(this.engine.gl.ALWAYS);\n    this.engine.gl.drawArrays(this.engine.gl.TRIANGLES, 0, this.vertexPosBuf.numItems);\n    this.engine.gl.depthFunc(this.engine.gl.LESS);\n    this.engine.mvPopMatrix();\n    // Draw Speech\n    if (this.enableSpeech) {\n      this.engine.mvPushMatrix();\n      // Undo rotation so that character plane is normal to LOS\n      translate(this.engine.uViewMat, this.engine.uViewMat, this.drawOffset.toArray());\n      translate(this.engine.uViewMat, this.engine.uViewMat, this.pos.toArray());\n      rotate(this.engine.uViewMat, this.engine.uViewMat, this.engine.degToRad(this.engine.cameraAngle), [1, 0, 0]);\n      // Bind texture for speech bubble\n      this.engine.bindBuffer(this.speechVerBuf, this.engine.shaderProgram.aVertexPosition);\n      this.engine.bindBuffer(this.speechTexBuf, this.engine.shaderProgram.aTextureCoord);\n      this.speech.attach();\n      // // Draw Speech\n      this.engine.shaderProgram.setMatrixUniforms();\n      this.engine.gl.depthFunc(this.engine.gl.ALWAYS);\n      this.engine.gl.drawArrays(this.engine.gl.TRIANGLES, 0, this.speechVerBuf.numItems);\n      this.engine.gl.depthFunc(this.engine.gl.LESS);\n      this.engine.mvPopMatrix();\n    }\n  }\n\n  // Set Frame\n  setFrame(frame) {\n    this.animFrame = frame;\n    this.engine.updateBuffer(this.vertexTexBuf, this.getTexCoords());\n  }\n\n  // Set Facing\n  setFacing(facing) {\n    console.log(\"setting face to \" + Direction.spriteSequence(facing));\n    if (facing) this.facing = facing;\n    this.setFrame(this.animFrame);\n  }\n\n  // Add Action to Queue\n  addAction(action) {\n    console.log(\"adding action to sprite\", action.id);\n    if (this.actionDict[action.id]) this.removeAction(action.id);\n    this.actionDict[action.id] = action;\n    this.actionList.push(action);\n  }\n\n  // Remove Action\n  removeAction(id) {\n    console.log(\"removing action\");\n    this.actionList = this.actionList.filter((action) => action.id !== id);\n    delete this.actionDict[id];\n  }\n\n  // Remove Action\n  removeAllActions() {\n    this.actionList = [];\n    this.actionDict = {};\n  }\n\n  // Tick\n  tickOuter(time) {\n    if (!this.loaded) return;\n    // Sort activities by increasing startTime, then by id\n    this.actionList.sort((a, b) => {\n      let dt = a.startTime - b.startTime;\n      if (!dt) return dt;\n      return a.id > b.id ? 1 : -1;\n    });\n    // Run & Queue for Removal when complete\n    let toRemove = [];\n    this.actionList.forEach((action) => {\n      if (!action.loaded || action.startTime > time) return;\n      if (action.tick(time)) {\n        toRemove.push(action); // remove from backlog\n        action.onComplete(); // call completion handler\n      }\n    });\n    // clear completed activities\n    toRemove.forEach((action) => this.removeAction(action.id));\n    // tick\n    if (this.tick) this.tick(time);\n  }\n\n  // Hook for sprite implementations\n  init() {\n    console.log(\"- sprite hook\", this.id, this.pos);\n  }\n\n  // speak\n  speak(text, showBubble = false) {\n    if (!text) this.speech.clearHud();\n    else {\n      this.textbox = this.engine.scrollText(this.id + \":> \" + text, true, { portrait: this.portrait ?? false });\n      if (showBubble && this.speech) {\n        this.speech.scrollText(text, false, { portrait: this.portrait ?? false });\n        this.speech.loadImage();\n      }\n    }\n  }\n\n  // handles interaction -- default (should be overridden in definition)\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      default:\n        break;\n    }\n    // If completion handler passed through - call it when done\n    if (finish) finish(true);\n    return ret;\n  }\n\n  // Set Facing\n  faceDir(facing) {\n    if (this.facing == facing || facing === Direction.None) return null;\n    return new ActionLoader(this.engine, \"face\", [facing], this);\n  }\n\n  // set message (for chat bubbles)\n  setGreeting(greeting) {\n    this.speech.clearHud();\n    this.speech.writeText(greeting);\n    this.speech.loadImage();\n    return new ActionLoader(this.engine, \"greeting\", [greeting, { autoclose: true }], this);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../utils/loaders.jsx\";\nimport Sprite from \"../../../core/sprite.jsx\";\n\nexport default class NPC extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"intro\";\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      case \"intro\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Buying stuff eh?!\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        if (typeof window.ethereum !== 'undefined') {\n          console.log('MetaMask is installed!');\n        }\n        break;\n      case \"loop\":\n        this.state = \"loop2\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"I heard about a strange legend once.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop2\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Sorry, I don't remember the story at the moment\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    console.log(ret);\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../utils/math/vector.jsx\";\nimport Resources from \"../../../utils/resources.jsx\";\nimport Sprite from \"../../../core/sprite.jsx\";\nimport { ActionLoader } from \"../../../utils/loaders.jsx\";\n\nexport default class Chest extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"closed\";\n    // Inventory\n    this.inventory = [];\n    this.fixed = true;\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    this.startTime = Date.now();\n    // React based on internal state\n    switch (this.state) {\n      case \"closed\":\n        this.state = \"open\";\n        ret = new ActionLoader(\n          this.engine,\n          \"animate\",\n          [\n            600,\n            3,\n            () => {\n              if(sprite.inventory){\n                sprite.inventory.push(...this.inventory);\n              }\n              finish(true);\n            },\n          ],\n          this\n        );\n        break;\n      case \"open\":\n        this.state = \"open\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Empty.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\n// Mouse event enumeration\nexport const Mouse = {\n  DOWN: 1,\n  UP: 2,\n  MOVE: 3,\n};\n\n// Directions enumeration & methods\nexport const Direction = {\n  None: 0,  //0000\n  Right: 1, //0001\n  Up: 2,    //0010\n  Left: 4,  //0100\n  Down: 8,  //1000\n  All: 15,  //1111\n\n  fromOffset(dp) {\n    if (dp[0] > 0) return Direction.Right;\n    if (dp[0] < 0) return Direction.Left;\n    if (dp[1] > 0) return Direction.Down;\n    if (dp[1] < 0) return Direction.Up;\n    return 0;\n  },\n\n  toOffset(dir) {\n    switch (dir) {\n      case Direction.Right:\n        return [1, 0];\n      case Direction.Up:\n        return [0, -1];\n      case Direction.Left:\n        return [-1, 0];\n      case Direction.Down:\n        return [0, 1];\n    }\n    return [0, 0];\n  },\n\n  reverse(dir) {\n    switch (dir) {\n      case Direction.Right:\n        return Direction.Left;\n      case Direction.Up:\n        return Direction.Down;\n      case Direction.Left:\n        return Direction.Right;\n      case Direction.Down:\n        return Direction.Up;\n    }\n    return Direction.None;\n  },\n\n  rotate(dir, ccw = false) {\n    switch (dir) {\n      case Direction.Right:\n        return ccw ? Direction.Top : Direction.Down;\n      case Direction.Up:\n        return ccw ? Direction.Left : Direction.Right;\n      case Direction.Left:\n        return ccw ? Direction.Down : Direction.Top;\n      case Direction.Down:\n        return ccw ? Direction.Right : Direction.Left;\n    }\n    return Direction.None;\n  },\n\n  spriteSequence(dir) {\n    switch (dir) {\n      case Direction.Right:\n        return \"right\";\n      case Direction.Up:\n        return \"up\";\n      case Direction.Left:\n        return \"left\";\n      case Direction.Down:\n        return \"down\";\n    }\n    return \"down\";\n  },\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nimport { Vector, set } from \"../utils/math/vector.jsx\";\nimport { Direction } from \"../utils/enums.jsx\";\nimport ActionQueue from \"./queue.jsx\";\nimport { ActionLoader } from \"../utils/loaders.jsx\";\nimport { rotate, translate } from \"../utils/math/matrix4.jsx\";\nimport { _buildBuffer } from \"../utils/obj/utils.js\";\nimport * as OBJ from \"../utils/obj\";\nimport { ColorTexture, Texture } from \"./texture.jsx\";\nexport default class ModelObject {\n  constructor(engine) {\n    this.engine = engine;\n    this.templateLoaded = false;\n    this.drawOffset = new Vector(0, 0, 0);\n    this.hotspotOffset = new Vector(0, 0, 0);\n    this.pos = new Vector(0, 0, 0);\n    this.size = new Vector(1, 1, 1);\n    this.scale = new Vector(1, 1, 1);\n    this.facing = Direction.Right;\n    this.actionDict = {};\n    this.actionList = [];\n    this.speech = {};\n    this.portrait = null;\n    this.onLoadActions = new ActionQueue();\n    this.inventory = [];\n    this.onTilesetOrTextureLoaded = this.onTilesetOrTextureLoaded.bind(this);\n    this.blocking = true; // default - cannot passthrough\n    this.override = false;\n  }\n\n  update(data) {\n    Object.assign(this, data);\n  }\n\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // Load Object and Materials\n  onLoad(instanceData) {\n    console.log(\"loading\", instanceData);\n    if (this.loaded) return;\n    // Zone Information\n    this.zone = instanceData.zone;\n    if (instanceData.id) this.id = instanceData.id;\n    if (instanceData.pos) set(instanceData.pos, this.pos);\n    if (instanceData.facing && instanceData.facing !== 0) this.facing = instanceData.facing;\n    if (instanceData.zones && instanceData.zones !== null) this.zones = instanceData.zones;\n    let mesh = instanceData.mesh;\n    // Mesh bounds\n    let maxX,\n      minX = null;\n    let maxY,\n      minY = null;\n    let maxZ,\n      minZ = null;\n    for (let i = 0; i < mesh.vertices.length; i = i + 3) {\n      let v = mesh.vertices.slice(i, i + 3);\n      // calculate size\n      if (maxX == null || v[0] > maxX) maxX = v[0];\n      if (minX == null || v[0] < minX) minX = v[0];\n      if (maxY == null || v[1] > maxY) maxY = v[1];\n      if (minY == null || v[1] < minY) minY = v[1];\n      if (maxZ == null || v[2] > maxZ) maxZ = v[2];\n      if (minZ == null || v[2] < minZ) minZ = v[2];\n    }\n    // normalize x, y to fit in tile (todo)\n    let size = new Vector(maxX - minX, maxZ - minZ, maxY - minY);\n    this.size = size;\n    this.scale = new Vector(1 / Math.max(size.x, size.z), 1 / Math.max(size.x, size.z), 1 / Math.max(size.x, size.z));\n    this.drawOffset = new Vector(0.5, 0.5, 0);\n\n    this.mesh = mesh;\n    this.engine.objLoader.initMeshBuffers(this.engine.gl, this.mesh);\n    let layout = new OBJ.Layout(\n      OBJ.Layout.POSITION,\n      OBJ.Layout.NORMAL,\n      OBJ.Layout.DIFFUSE,\n      OBJ.Layout.UV,\n      OBJ.Layout.SPECULAR,\n      OBJ.Layout.SPECULAR_EXPONENT\n    );\n    mesh.vertexBuffer.layout = layout;\n    // Speech bubble\n    if (this.enableSpeech) {\n      this.speech = this.engine.loadSpeech(this.id, this.engine.mipmap);\n      this.speech.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n      this.speechTexBuf = this.engine.createBuffer(this.getSpeechBubbleTexture(), this.engine.gl.DYNAMIC_DRAW, 2);\n    }\n    // load Portrait\n    if (this.portraitSrc) {\n      this.portrait = this.engine.loadTexture(this.portraitSrc);\n      this.portrait.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n    }\n    //\n    this.zone.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this));\n  }\n\n  // Definition Loaded\n  onTilesetDefinitionLoaded() {\n    this.zone.tileset.runWhenLoaded(this.onTilesetOrTextureLoaded.bind(this));\n  }\n\n  // After Tileset / Texture Loaded\n  onTilesetOrTextureLoaded() {\n    if (\n      !this ||\n      this.loaded ||\n      (this.enableSpeech && this.speech && !this.speech.loaded) ||\n      (this.portrait && !this.portrait.loaded)\n    )\n      return;\n\n    this.init(); // Hook for sprite implementations\n    if (this.enableSpeech && this.speech) {\n      if (this.speech.clearHud) {\n        this.speech.clearHud();\n        this.speech.writeText(this.id);\n        this.speech.loadImage();\n      }\n    }\n    this.loaded = true;\n    this.onLoadActions.run();\n    console.log(\"Initialized object '\" + this.id + \"' in zone '\" + this.zone.id + \"'\");\n  }\n\n  // Speech Area texture\n  getSpeechBubbleTexture() {\n    return [\n      [1.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 0.0],\n      [1.0, 1.0],\n      [0.0, 0.0],\n      [1.0, 0.0],\n    ].flat(3);\n  }\n\n  // speech bubble position\n  getSpeechBubbleVertices() {\n    return [\n      new Vector(...[2, 0, 4]).toArray(),\n      new Vector(...[0, 0, 4]).toArray(),\n      new Vector(...[0, 0, 2]).toArray(),\n      new Vector(...[2, 0, 4]).toArray(),\n      new Vector(...[0, 0, 2]).toArray(),\n      new Vector(...[2, 0, 2]).toArray(),\n    ].flat(3);\n  }\n\n  // draw materials individually to screen from obj\n  attach() {\n    Object.values(this.mesh.materialsByIndex).map((mtl, i) => {\n      let { engine, mesh } = this;\n      let { gl } = this.engine;\n      // Vertices\n      engine.bindBuffer(mesh.vertexBuffer, engine.shaderProgram.aVertexPosition);\n      // Diffuse\n      engine.bindBuffer(\n        _buildBuffer(gl, this.engine.gl.ARRAY_BUFFER, mtl.diffuse, 3),\n        engine.shaderProgram.aDiffuse\n      );\n      // Specular\n      engine.bindBuffer(\n        _buildBuffer(gl, this.engine.gl.ARRAY_BUFFER, mtl.specular, 3),\n        engine.shaderProgram.aSpecular\n      );\n      // Specular Exponent\n      engine.bindBuffer(\n        _buildBuffer(gl, this.engine.gl.ARRAY_BUFFER, mtl.specularExponent, 1),\n        engine.shaderProgram.aSpecularExponent\n      );\n      // attach material texture TODO\n      engine.bindBuffer(mesh.textureBuffer, engine.shaderProgram.aTextureCoord);\n      // normal\n      engine.bindBuffer(mesh.normalBuffer, engine.shaderProgram.aVertexNormal);\n      // attach indices\n      let bufferInfo = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indicesPerMaterial[i], 1);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferInfo);\n      // draw\n      engine.shaderProgram.setMatrixUniforms(this.scale, 0.0);\n      gl.drawElements(gl.TRIANGLES, bufferInfo.numItems, gl.UNSIGNED_SHORT, 0);\n    });\n  }\n\n  // attempt to draw obj buffer\n  drawObj() {\n    let { engine, mesh } = this;\n    let { gl } = engine;\n    // vertices\n    var vertexData = mesh.makeBufferData(mesh.vertexBuffer.layout);\n    gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);\n    // attributes\n    engine.shaderProgram.applyAttributePointers(this);\n    // material indices\n    let materialBuffer = mesh.makeIndexBufferDataForMaterials(...Object.values(mesh.materialIndices))\n    console.log(mesh, materialBuffer);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, mesh.indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, materialBuffer, gl.STATIC_DRAW);\n    // draw\n    engine.shaderProgram.setMatrixUniforms(this.scale, 0.0);\n    gl.drawElements(gl.TRIANGLES, materialBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n  }\n\n  // Draw Object\n  draw() {\n    if (!this.loaded) return;\n    let { engine, mesh } = this;\n    // setup obj attributes\n    engine.gl.enableVertexAttribArray(engine.shaderProgram.aVertexNormal);\n    // initialize buffers\n    engine.mvPushMatrix();\n    // position object\n    translate(this.engine.uViewMat, this.engine.uViewMat, this.drawOffset.toArray());\n    translate(this.engine.uViewMat, this.engine.uViewMat, this.pos.toArray());\n    rotate(this.engine.uViewMat, this.engine.uViewMat, this.engine.degToRad(90), [1, 0, 0]);\n\n    // disable texture attribute (none applied to obj)\n    if (!mesh.textures.length) {\n      engine.gl.disableVertexAttribArray(engine.shaderProgram.aTextureCoord);\n      engine.bindBuffer(mesh.vertexBuffer, engine.shaderProgram.aVertexPosition);\n      engine.bindBuffer(mesh.normalBuffer, engine.shaderProgram.aVertexNormal);\n      engine.gl.bindBuffer(engine.gl.ELEMENT_ARRAY_BUFFER, mesh.indexBuffer);\n      engine.shaderProgram.setMatrixUniforms(this.scale, 1.0);\n      engine.gl.drawElements(engine.gl.TRIANGLES, mesh.indexBuffer.numItems, engine.gl.UNSIGNED_SHORT, 0);\n    } else {\n      engine.bindBuffer(mesh.textureBuffer, engine.shaderProgram.aTextureCoord);\n      // this.attach();\n      engine.gl.enableVertexAttribArray(engine.shaderProgram.aDiffuse);\n      engine.gl.enableVertexAttribArray(engine.shaderProgram.aSpecular);\n      engine.gl.enableVertexAttribArray(engine.shaderProgram.aSpecularExponent);\n      this.drawObj();\n    }\n\n    // Draw\n    engine.mvPopMatrix();\n    // clear obj rendering attributes\n    engine.gl.enableVertexAttribArray(engine.shaderProgram.aTextureCoord);\n    engine.gl.disableVertexAttribArray(engine.shaderProgram.aVertexNormal);\n    engine.gl.disableVertexAttribArray(engine.shaderProgram.aDiffuse);\n    engine.gl.disableVertexAttribArray(engine.shaderProgram.aSpecular);\n    engine.gl.disableVertexAttribArray(engine.shaderProgram.aSpecularExponent);\n  }\n\n  // Set Facing\n  setFacing(facing) {\n    console.log(\"setting face to \" + Direction.spriteSequence(facing));\n    // todo -- apply rotation\n    if (facing) this.facing = facing;\n    this.setFrame(this.animFrame);\n  }\n\n  // Add Action to Queue\n  addAction(action) {\n    console.log(\"adding action to sprite\", action.id);\n    if (this.actionDict[action.id]) this.removeAction(action.id);\n    this.actionDict[action.id] = action;\n    this.actionList.push(action);\n  }\n\n  // Remove Action\n  removeAction(id) {\n    console.log(\"removing action\");\n    this.actionList = this.actionList.filter((action) => action.id !== id);\n    delete this.actionDict[id];\n  }\n\n  // Remove Action\n  removeAllActions() {\n    this.actionList = [];\n    this.actionDict = {};\n  }\n\n  // Tick\n  tickOuter(time) {\n    if (!this.loaded) return;\n    // Sort activities by increasing startTime, then by id\n    this.actionList.sort((a, b) => {\n      let dt = a.startTime - b.startTime;\n      if (!dt) return dt;\n      return a.id > b.id ? 1 : -1;\n    });\n    // Run & Queue for Removal when complete\n    let toRemove = [];\n    this.actionList.forEach((action) => {\n      if (!action.loaded || action.startTime > time) return;\n      if (action.tick(time)) {\n        toRemove.push(action); // remove from backlog\n        action.onComplete(); // call completion handler\n      }\n    });\n    // clear completed activities\n    toRemove.forEach((action) => this.removeAction(action.id));\n    // tick\n    if (this.tick) this.tick(time);\n  }\n\n  // Hook for sprite implementations\n  init() {\n    console.log(\"- sprite hook\", this.id, this.pos);\n  }\n\n  // speak\n  speak(text, showBubble = false) {\n    if (!text) this.speech.clearHud();\n    else {\n      this.textbox = this.engine.scrollText(this.id + \":> \" + text, true, { portrait: this.portrait ?? false });\n      if (showBubble && this.speech) {\n        this.speech.scrollText(text, false, { portrait: this.portrait ?? false });\n        this.speech.loadImage();\n      }\n    }\n  }\n\n  // handles interaction -- default (should be overridden in definition)\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      default:\n        break;\n    }\n    // If completion handler passed through - call it when done\n    if (finish) finish(true);\n    return ret;\n  }\n\n  // Set Facing\n  faceDir(facing) {\n    if (this.facing == facing || facing === Direction.None) return null;\n    return new ActionLoader(this.engine, \"face\", [facing], this);\n  }\n\n  // set message (for chat bubbles)\n  setGreeting(greeting) {\n    this.speech.clearHud();\n    this.speech.writeText(greeting);\n    this.speech.loadImage();\n    return new ActionLoader(this.engine, \"greeting\", [greeting, { autoclose: true }], this);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nimport ActionQueue from \"./queue.jsx\";\nexport default class Tileset {\n  constructor(engine) {\n    this.engine = engine;\n    this.src = null;\n    this.sheetSize = [0, 0];\n    this.tileSize = 0;\n    this.tiles = {};\n    this.loaded = false;\n    this.onLoadActions = new ActionQueue();\n    this.onDefinitionLoadActions = new ActionQueue();\n    this.onTextureLoaded = this.onTextureLoaded.bind(this);\n  }\n\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // Actions to run after the tileset definition has loaded,\n  // but before the texture is ready\n  runWhenDefinitionLoaded(action) {\n    if (this.definitionLoaded) action();\n    else this.onDefinitionLoadActions.add(action);\n  }\n\n  // Received tileset definition JSON\n  onJsonLoaded(data) {\n    // Merge tileset definition into this object\n    Object.keys(data).map((k) => {\n      this[k] = data[k];\n    });\n    // Definition actions must always run before loaded actions\n    this.definitionLoaded = true;\n    this.onDefinitionLoadActions.run();\n    // load texture\n    this.texture = this.engine.loadTexture(this.src);\n    this.texture.runWhenLoaded(this.onTextureLoaded);\n    // set background colour\n    if (this.bgColor) this.engine.gl.clearColor(this.bgColor[0] / 255, this.bgColor[1] / 255, this.bgColor[2] / 255, 1.0);\n  }\n\n  // run when loaded\n  onTextureLoaded() {\n    console.log(\"Initialized tileset '\" + this.name + \"'\");\n    this.loaded = true;\n    this.onLoadActions.run();\n  }\n\n  // Get vertices for tile\n  getTileVertices(id, offset) {\n    return this.geometry[id].vertices\n      .map((poly) => poly.map((vertex) => [vertex[0] + offset[0], vertex[1] + offset[1], vertex[2] + offset[2]]))\n      .flat(3);\n  }\n\n  // get texture coordinates\n  getTileTexCoords(id, texId) {\n    let tileOffset = this.textures[texId];\n    let size = [this.tileSize / this.sheetSize[0], this.tileSize / this.sheetSize[1]];\n    return this.geometry[id].surfaces\n      .map((poly) => poly.map((vertex) => [(vertex[0] + tileOffset[0]) * size[0], (vertex[1] + tileOffset[1]) * size[1]]))\n      .flat(3);\n  }\n\n  // determine walkability\n  getWalkability(tileId) {\n    return this.geometry[tileId].type;\n  }\n\n  // get poly for walk\n  getTileWalkPoly(tileId) {\n    return this.geometry[tileId].walkPoly;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nexport default class Action {\n  constructor(type, sprite, callback) {\n    this.type = type;\n    this.sprite = sprite;\n    this.callback = callback;\n    this.time = new Date().getTime();\n    this.id = sprite.id + \"-\" + type + \"-\" + this.time;\n  }\n  // configure action\n  configure(type, sprite, id, time, args) {\n    this.sprite = sprite;\n    this.id = id;\n    this.type = type;\n    this.startTime = time;\n    this.creationArgs = args;\n  }\n  // initialize on load\n  onLoad(args) {\n    this.init.apply(this, args);\n    this.loaded = true;\n  }\n  // serialize\n  serialize() {\n    return {\n      id: this.id,\n      time: this.startTime,\n      zone: this.sprite.zone.id,\n      sprite: this.sprite.id,\n      type: this.type,\n      args: this.creationArgs,\n    };\n  }\n  // callback on completion\n  onComplete() {\n    return this.callback ? this.callback() : null;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Resources from \"./resources.jsx\";\nimport Sprite from \"../core/sprite.jsx\";\nimport ModelObject from \"../core/object.jsx\";\nimport Tileset from \"../core/tileset.jsx\";\nimport Action from \"../core/action.jsx\";\n\n// Helps Loads New Tileset Instance\nexport class TilesetLoader {\n  constructor(engine) {\n    this.engine = engine;\n    this.tilesets = {};\n  }\n  // Load tileset asynchronously over network\n  async loadRemote(name) {\n    let tileset = this.tilesets[name];\n    if (tileset) return tileset;\n    // Generate Tileset\n    this.tilesets[name] = tileset = new Tileset(this.engine);\n    tileset.name = name;\n    // Fetch Image and Apply\n    const fileResponse = await fetch(Resources.tilesetRequestUrl(name));\n    if (fileResponse.ok) {\n      try {\n        let content = await fileResponse.json();\n        await tileset.onJsonLoaded(content);\n      } catch (e) {\n        console.error(\"Error parsing tileset '\" + tileset.name + \"' definition\");\n        console.error(e);\n      }\n    }\n    return this.tilesets[name];\n  }\n\n  // Load Tileset Directly (precompiled)\n  async load(type) {\n    let tileset = this.tilesets[type];\n    if (tileset) return tileset;\n    let instance = new Tileset(this.engine);\n    this.tilesets[type] = instance;\n    let json = require(\"../../scene/tilesets/\" + type + \"/tileset.jsx\")[\"default\"];\n    instance.onJsonLoaded(json);\n    return instance;\n  }\n}\n\n// Helps Loads New Sprite Instance\nexport class SpriteLoader {\n  constructor(engine) {\n    this.engine = engine;\n    this.definitions = [];\n    this.instances = {};\n  }\n  // Load Sprite\n  async load(type) {\n    let afterLoad = arguments[1];\n    let runConfigure = arguments[2];\n    if (!this.instances[type]) {\n      this.instances[type] = [];\n    }\n    // New Instance\n    let Type = require(\"../../scene/sprites/\" + type + \".jsx\")[\"default\"];\n    console.log(Type, type);\n    let instance = new Type(this.engine);\n    instance.templateLoaded = true;\n    // Update Existing\n    this.instances[type].forEach(function (instance) {\n      if (instance.afterLoad) instance.afterLoad(instance.instance);\n    });\n    // Configure if needed\n    if (runConfigure) runConfigure(instance);\n    // once loaded\n    if (afterLoad) {\n      console.log(\"after load\");\n      if (instance.templateLoaded) afterLoad(instance);\n      else this.instances[type].push({ instance, afterLoad });\n    }\n\n    return instance;\n  }\n}\n\n//helps load sprite\nexport class ObjectLoader {\n  constructor(engine) {\n    this.engine = engine;\n    this.definitions = [];\n    this.instances = {};\n  }\n  // Load Sprite\n  async load(model) {\n    let afterLoad = arguments[1];\n    let runConfigure = arguments[2];\n    if (!this.instances[model.id]) {\n      this.instances[model.id] = [];\n    }\n    let instance = new ModelObject(this.engine);\n    instance.update(model);\n    // New Instance\n    let modelreq = {\n      obj: `pixos/models/${instance.type}.obj`,\n      mtl: model.mtl ?? false,\n      mtlTextureRoot: \"/pixos/models\",\n      downloadMtlTextures: true,\n      enableWTextureCoord: false,\n      name: instance.id,\n    };\n    let models = (await this.engine.objLoader.downloadModels(this.engine.gl, [modelreq]));\n    console.log('downloading models ---> ', models);\n    instance.mesh = models[model.id];\n    instance.templateLoaded = true;\n    console.log(\"loaded model\", instance);\n    // Update Existing\n    this.instances[instance.id].forEach(function (instance) {\n      if (instance.afterLoad) instance.afterLoad(instance.instance);\n    });\n    // Configure if needed\n    if (runConfigure) runConfigure(instance);\n    // once loaded\n    if (afterLoad) {\n      console.log(\"after load\");\n      if (instance.templateLoaded) afterLoad(instance);\n      else this.instances[instance.id].push({ instance, afterLoad });\n    }\n    instance.loaded = true;\n    return instance;\n  }\n}\n\n// Helps Loads New Action Instance\nexport class ActionLoader {\n  constructor(engine, type, args, sprite, callback) {\n    this.engine = engine;\n    this.type = type;\n    this.args = args;\n    this.sprite = sprite;\n    this.callback = callback;\n    this.instances = {};\n    this.definitions = [];\n\n    let time = new Date().getTime();\n    let id = sprite.id + \"-\" + type + \"-\" + time;\n    return this.load(\n      type,\n      function (action) {\n        action.onLoad(args);\n      },\n      function (action) {\n        action.configure(type, sprite, id, time, args);\n      }\n    );\n  }\n  // Load Action\n  load(type) {\n    let afterLoad = arguments[1];\n    let runConfigure = arguments[2];\n    if (!this.instances[type]) {\n      this.instances[type] = [];\n    }\n    // New Instance (assigns properties loaded by type)\n    let instance = new Action(this.type, this.sprite, this.callback);\n    Object.assign(instance, require(\"../actions/\" + type + \".jsx\")[\"default\"]);\n    instance.templateLoaded = true;\n    // Notify existing\n    this.instances[type].forEach(function (instance) {\n      if (instance.afterLoad) instance.afterLoad(instance.instance);\n    });\n    // construct\n    if (runConfigure) runConfigure(instance);\n    // load\n    if (afterLoad) {\n      if (instance.templateLoaded) afterLoad(instance);\n      else this.instances[type].push({ instance, afterLoad });\n    }\n\n    return instance;\n  }\n}\n// Loads Audio\nexport class AudioLoader {\n  constructor(src, loop = false) {\n    this.src = src;\n    this.playing = false;\n    this.audio = new Audio(src);\n    // loop if set\n    if (loop) {\n      this.audio.addEventListener(\n        \"ended\",\n        function () {\n          this.currentTime = 0;\n          this.play();\n        },\n        false\n      );\n    }\n    this.audio.load();\n  }\n  isPlaying() {\n    return this.playing;\n  }\n  playAudio() {\n    const audioPromise = this.audio.play();\n    this.playing = true;\n    if (audioPromise !== undefined) {\n      audioPromise\n        .then((_) => {\n          // autoplay started\n        })\n        .catch((err) => {\n          // catch dom exception\n          console.info(err);\n        });\n    }\n  }\n  pauseAudio() {\n    const audioPromise = this.audio.pause();\n    this.playing = false;\n    if (audioPromise !== undefined) {\n      audioPromise\n        .then((_) => {\n          // autoplay started\n        })\n        .catch((err) => {\n          // catch dom exception\n          console.info(err);\n        });\n    }\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nconst EPSILON = 0.000001;\n\nconst from = (mat) => {\n  let dest = new Float32Array(16);\n  dest[0] = mat[0];\n  dest[1] = mat[1];\n  dest[2] = mat[2];\n  dest[3] = mat[3];\n  dest[4] = mat[4];\n  dest[5] = mat[5];\n  dest[6] = mat[6];\n  dest[7] = mat[7];\n  dest[8] = mat[8];\n  dest[9] = mat[9];\n  dest[10] = mat[10];\n  dest[11] = mat[11];\n  dest[12] = mat[12];\n  dest[13] = mat[13];\n  dest[14] = mat[14];\n  dest[15] = mat[15];\n  return dest;\n};\n\nconst create = () => {\n  let matrix = new Float32Array(16);\n  matrix[0] = 1;\n  matrix[5] = 1;\n  matrix[10] = 1;\n  matrix[15] = 1;\n  return matrix;\n};\n\n\nconst create3 = () => {\n  let matrix = new Float32Array(9);\n  matrix[0] = 1;\n  matrix[4] = 1;\n  matrix[8] = 1;\n  return matrix;\n};\n\nconst perspective = (fovy, aspect, near, far) => {\n  let matrix = new Float32Array(16);\n  let f = 1.0 / Math.tan(fovy / 2);\n  matrix[0] = f / aspect;\n  matrix[1] = 0;\n  matrix[2] = 0;\n  matrix[3] = 0;\n  matrix[4] = 0;\n  matrix[5] = f;\n  matrix[6] = 0;\n  matrix[7] = 0;\n  matrix[8] = 0;\n  matrix[9] = 0;\n  matrix[10] = -1;\n  matrix[11] = -1;\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = -2 * near;\n  matrix[15] = 0;\n  if (far != null && far !== Infinity && far !== near) {\n    const nf = 1 / (near - far);\n    matrix[10] = (far + near) * nf;\n    matrix[14] = 2 * far * near * nf;\n  }\n  return matrix;\n};\n\nconst translate = (m1, m2, v) => {\n  let matrix = m1;\n  let [x, y, z] = v;\n\n  let [a00, a01, a02, a03, a10, a11, a12, a13, a20, a21, a22, a23] = m2;\n  if (m1 !== m2) {\n    matrix[0] = a00;\n    matrix[1] = a01;\n    matrix[2] = a02;\n    matrix[3] = a03;\n    matrix[4] = a10;\n    matrix[5] = a11;\n    matrix[6] = a12;\n    matrix[7] = a13;\n    matrix[8] = a20;\n    matrix[9] = a21;\n    matrix[10] = a22;\n    matrix[11] = a23;\n  }\n  matrix[12] = a00 * x + a10 * y + a20 * z + m2[12];\n  matrix[13] = a01 * x + a11 * y + a21 * z + m2[13];\n  matrix[14] = a02 * x + a12 * y + a22 * z + m2[14];\n  matrix[15] = a03 * x + a13 * y + a23 * z + m2[15];\n  return matrix;\n};\n\nconst rotate = (m1, m2, rad, axis) => {\n  let matrix = m1;\n  let [x, y, z] = axis;\n  let len = Math.hypot(x, y, z);\n\n  if (len < EPSILON) {\n    throw new Error('Matrix4*4 rotate has wrong axis');\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let t = 1 - c;\n\n  let [a00, a01, a02, a03, a10, a11, a12, a13, a20, a21, a22, a23] = m2;\n\n  let b00 = x * x * t + c;\n  let b01 = y * x * t + z * s;\n  let b02 = z * x * t - y * s;\n  let b10 = x * y * t - z * s;\n  let b11 = y * y * t + c;\n  let b12 = z * y * t + x * s;\n  let b20 = x * z * t + y * s;\n  let b21 = y * z * t - x * s;\n  let b22 = z * z * t + c;\n\n  matrix[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  matrix[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  matrix[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  matrix[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  matrix[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  matrix[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  matrix[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  matrix[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  matrix[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  matrix[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  matrix[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  matrix[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (m2 !== m1) {\n    matrix[12] = m2[12];\n    matrix[13] = m2[13];\n    matrix[14] = m2[14];\n    matrix[15] = m2[15];\n  }\n  return matrix;\n};\n\nfunction isPowerOf2(value) {\n  return (value & (value - 1)) == 0;\n}\n\nfunction set(mat, dest) {\n  dest[0] = mat[0];\n  dest[1] = mat[1];\n  dest[2] = mat[2];\n  dest[3] = mat[3];\n  dest[4] = mat[4];\n  dest[5] = mat[5];\n  dest[6] = mat[6];\n  dest[7] = mat[7];\n  dest[8] = mat[8];\n  dest[9] = mat[9];\n  dest[10] = mat[10];\n  dest[11] = mat[11];\n  dest[12] = mat[12];\n  dest[13] = mat[13];\n  dest[14] = mat[14];\n  dest[15] = mat[15];\n  return dest;\n};\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nfunction normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n  return out;\n}\n\nexport { from, normalFromMat4, create, create3, perspective, translate, rotate, isPowerOf2, set };\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport class Coord {\n  constructor(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n\n  add(vec) {\n    return new Coord(this.x + vec.x, this.y + vec.y);\n  }\n\n  sub(vec) {\n    return new Coord(this.x - vec.x, this.y - vec.y);\n  }\n\n  mul(n) {\n    return new Coord(this.x * n, this.y * n);\n  }\n\n  length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  distance(vec) {\n    return this.sub(vec).length();\n  }\n\n  normal() {\n    if (this.x === 0 && this.y === 0) return new Coord(0, 0);\n    const l = this.length();\n    return new Coord(this.x / l, this.y / l);\n  }\n\n  dot(vec) {\n    return this.x * vec.x + this.y * vec.y;\n  }\n\n  toArray() {\n    return [this.x, this.y];\n  }\n\n  toString() {\n    return `( ${this.x}, ${this.y} )`;\n  }\n\n  negate() {\n    return new Vector(this.x * -1, this.y * -1);\n  }\n}\n\nexport class Vector {\n  constructor(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  add(vec) {\n    return new Vector(this.x + vec.x, this.y + vec.y, this.z + vec.z);\n  }\n\n  sub(vec) {\n    return new Vector(this.x - vec.x, this.y - vec.y, this.z - vec.z);\n  }\n\n  mul(n) {\n    return new Vector(this.x * n, this.y * n, this.z * n);\n  }\n\n  length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  }\n\n  distance(vec) {\n    return this.sub(vec).length();\n  }\n\n  normal() {\n    if (this.x === 0 && this.y === 0 && this.z === 0) return new Vector(0, 0, 0);\n    const l = this.length();\n    return new Vector(this.x / l, this.y / l, this.z / l);\n  }\n\n  dot(vec) {\n    return this.x * vec.x + this.y * vec.y + this.z * vec.z;\n  }\n\n  toArray() {\n    return [this.x, this.y, this.z];\n  }\n\n  toString() {\n    return `( ${this.x}, ${this.y}, ${this.z} )`;\n  }\n  negate() {\n    return new Vector(this.x * -1, this.y * -1, this.z * -1);\n  }\n}\n\nexport class Vector4 {\n  constructor(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n  }\n\n  add(vec) {\n    return new Vector4(this.x + vec.x, this.y + vec.y, this.z + vec.z, this.w + vec.w);\n  }\n\n  sub(vec) {\n    return new Vector4(this.x - vec.x, this.y - vec.y, this.z - vec.z, this.w - vec.w);\n  }\n\n  mul(n) {\n    return new Vector4(this.x * n, this.y * n, this.z * n, this.w * n);\n  }\n\n  length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n  }\n\n  distance(vec) {\n    return this.sub(vec).length();\n  }\n\n  normal() {\n    if (this.x === 0 && this.y === 0 && this.z === 0 && this.w === 0) return new Vector4(0, 0, 0, 0);\n    const l = this.length();\n    return new Vector4(this.x / l, this.y / l, this.z / l, this.w / l);\n  }\n\n  dot(vec) {\n    return this.x * vec.x + this.y * vec.y + this.z * vec.z + this.w * vec.w;\n  }\n\n  toArray() {\n    return [this.x, this.y, this.z, this.w];\n  }\n\n  toString() {\n    return `( ${this.x}, ${this.y}, ${this.z}, ${this.w} )`;\n  }\n\n  negate() {\n    return new Vector(this.x * -1, this.y * -1, this.z * -1, this.w * -1);\n  }\n}\n\n// lineRectCollide( line, rect )\n//\n// Checks if an axis-aligned line and a bounding box overlap.\n// line = { y, x1, x2 } or line = { x, y1, y2 }\n// rect = { x, y, size }\n\nexport function lineRectCollide(line, rect) {\n  return (\n    rect.y > line.y - rect.size / 2 &&\n    rect.y < line.y + rect.size / 2 &&\n    rect.x > line.x1 - rect.size / 2 &&\n    rect.x < line.x2 + rect.size / 2\n  );\n}\n\n// rectRectCollide( r1, r2 )\n//\n// Checks if two rectangles (x1, y1, x2, y2) overlap.\n\nexport function rectRectCollide(r1, r2) {\n  if (r2.x1 > r1.x1 && r2.x1 < r1.x2 && r2.y1 > r1.y1 && r2.y1 < r1.y2) return true;\n  if (r2.x2 > r1.x1 && r2.x2 < r1.x2 && r2.y1 > r1.y1 && r2.y1 < r1.y2) return true;\n  if (r2.x2 > r1.x1 && r2.x2 < r1.x2 && r2.y2 > r1.y1 && r2.y2 < r1.y2) return true;\n  if (r2.x1 > r1.x1 && r2.x1 < r1.x2 && r2.y2 > r1.y1 && r2.y2 < r1.y2) return true;\n  return false;\n}\n\n// Push a Qua\nexport function pushQuad(v, p1, p2, p3, p4) {\n  v.push(p1[0], p1[1], p1[2], p1[3], p1[4], p1[5], p1[6], p1[7], p1[8]);\n  v.push(p2[0], p2[1], p2[2], p2[3], p2[4], p2[5], p2[6], p2[7], p2[8]);\n  v.push(p3[0], p3[1], p3[2], p3[3], p3[4], p3[5], p3[6], p3[7], p3[8]);\n\n  v.push(p3[0], p3[1], p3[2], p3[3], p3[4], p3[5], p3[6], p3[7], p3[8]);\n  v.push(p4[0], p4[1], p4[2], p4[3], p4[4], p4[5], p4[6], p4[7], p4[8]);\n  v.push(p1[0], p1[1], p1[2], p1[3], p1[4], p1[5], p1[6], p1[7], p1[8]);\n}\n\n// apply values from one vector to another\nexport function set(w, v) {\n  v.x = w.x;\n  v.y = w.y;\n  v.z = w.z;\n}\n\nexport function negate(vec, dest) {\n  if(!dest) dest = new Vector(-vec.x,-vec.y,-vec.z);\n  dest.x = -vec.x\n  dest.y = -vec.y\n  dest.z = -vec.z;\n  return dest;\n}\n\nexport function lerp(vec, vec2, lerp, dest) {\n  if (!dest) {\n    dest = vec;\n  }\n\n  dest.x = vec.x + lerp * (vec2.x - vec.x);\n  dest.y = vec.y + lerp * (vec2.y - vec.y);\n  dest.z = vec.z + lerp * (vec2.z - vec.z);\n\n  return dest;\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default {\n  tilesetRequestUrl: (id) => \"/pixos/tilesets/\" + id + \"/tileset.jsx\",\n  zoneRequestUrl: (id) => \"/pixos/maps/\" + id + \"/map.jsx\",\n  artResourceUrl: (art) => \"/pixos/art/\" + art,\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\n// Tet\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../../engine/utils/enums.jsx\";\nimport cells from \"./cells.jsx\";\n// Map\nexport default {\n  bounds: [0, 10, 17, 19],\n  tileset: \"sewer\",\n  audioSrc: \"/pixos/audio/blue-fields.mp3\",\n  // (0,10) -> (17,19) (X, Y) (9 Rows x 17 Column)\n  cells: cells,\n  // Sprites and Objects to be Loaded in the Scene & their Starting Points\n  sprites: [\n    { id: \"water\", type: \"npc/water-knight\", pos: new Vector(...[8, 13, 0]), facing: Direction.Up },\n    { id: \"spurt8\", type: \"effects/waterspurt\", pos: new Vector(...[7, 10, -1.5]), facing: Direction.Up },\n    { id: \"spurt9\", type: \"effects/waterspurt\", pos: new Vector(...[10, 10, -1.5]), facing: Direction.Up },\n  ],\n  // Scripts / Triggers\n  scripts: [\n    {\n      id: \"load-scene\",\n      trigger: () => {\n        console.log(\"Triggered\");\n      },\n    },\n  ],\n  // TODO - Add in Scenes / Dialogue\n  //\n  scenes: [],\n};\n","import T from \"../../tilesets/sewer/tiles.jsx\";\n\nexport default [\n    ...[\n      T.SLW_CORNER,\n      T.SLW_COLUMN,\n      T.FLOOR,\n      T.FLOOR,\n      T.LW_LPIT,\n      T.WATER,\n      T.WATER,\n      T.WATER,\n      T.V_WALKWAY,\n      T.WATER,\n      T.WATER,\n      T.WATER,\n      T.RW_RPIT,\n      T.FLOOR,\n      T.FLOOR,\n      T.SRW_COLUMN,\n      T.SRW_CORNER,\n    ],\n    ...[\n      T.EMPTY,\n      T.SLW_CORNER,\n      T.S_WALL,\n      T.S_WALL,\n      T.S_WALL,\n      T.SLW_WATER_COLUMN,\n      T.WATER,\n      T.WATER,\n      T.S_STAIR,\n      T.WATER,\n      T.WATER,\n      T.SRW_WATER_COLUMN,\n      T.S_WALL,\n      T.S_WALL,\n      T.S_WALL,\n      T.SRW_CORNER,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.L_WALL,\n      T.SW_SPIT,\n      T.SW_SPIT,\n      T.S_STAIRWALL,\n      T.SW_SPIT,\n      T.SW_SPIT,\n      T.R_WALL,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.L_WALL,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.R_WALL,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.L_WALL,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.R_WALL,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.SLW_CORNER,\n      T.SLW_COLUMN,\n      T.FLOOR,\n      T.FLOOR,\n      T.FLOOR,\n      T.SRW_COLUMN,\n      T.SRW_CORNER,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.SLW_CORNER,\n      T.S_WALL,\n      T.S_WALL,\n      T.S_WALL,\n      T.SRW_CORNER,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n    ...[\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n      T.EMPTY,\n    ],\n  ]","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../../engine/utils/enums.jsx\";\nimport cells from \"./cells.jsx\";\n// Use Tileset\n// Map Information\nexport default {\n  bounds: [0, 0, 17, 10],\n  // Determines the tileset to load\n  tileset: \"sewer\",\n  // (0,0) -> (17,10) (X, Y) (10 Rows x 17 Column)\n  cells: cells,\n  // Sprites and Objects to be Loaded in the Scene & their Starting Points (includes effect tiles)\n  sprites: [\n    // NPCs\n    { id: \"darkness\", type: \"npc/darkness\", pos: new Vector(...[10, 4, 0]), facing: Direction.Down },\n    { id: \"air\", type: \"npc/air-knight\", pos: new Vector(...[8, 4, 0]), facing: Direction.Down },\n    { id: \"fire\", type: \"npc/fire-knight\", pos: new Vector(...[2, 9, 0]), facing: Direction.Right },\n    { id: \"earth\", type: \"npc/earth-knight\", pos: new Vector(...[14, 7, 0]), facing: Direction.Left },\n    // Doorway\n    {\n      id: \"door\",\n      type: \"furniture/door\",\n      pos: new Vector(...[2, 5, 0]),\n      facing: Direction.Down,\n      zones: [\"room\"],\n    },\n    // Effect tiles\n    { id: \"spurt1\", type: \"effects/waterspurt\", pos: new Vector(...[10, 7, -1.5]), facing: Direction.Up },\n    { id: \"spurt2\", type: \"effects/waterspurt\", pos: new Vector(...[9, 6, -1.5]), facing: Direction.Up },\n    { id: \"spurt3\", type: \"effects/waterspurt\", pos: new Vector(...[10, 5, -1.5]), facing: Direction.Up },\n    { id: \"spurt4\", type: \"effects/waterspurt\", pos: new Vector(...[7, 6, -1.5]), facing: Direction.Up },\n    { id: \"spurt5\", type: \"effects/waterspurt\", pos: new Vector(...[6, 7, -1.5]), facing: Direction.Up },\n    { id: \"spurt6\", type: \"effects/waterspurt\", pos: new Vector(...[6, 9, -1.5]), facing: Direction.Up },\n    { id: \"spurt7\", type: \"effects/waterspurt\", pos: new Vector(...[9, 9, -1.5]), facing: Direction.Up },\n    // avatar\n    { id: \"avatar\", type: \"characters/default\", pos: new Vector(...[2, 6, 0]), facing: Direction.Down },\n  ],\n  // Scenes + Scenarios\n  scenes: [],\n  // Scripts / Triggers for the Zone\n  scripts: [],\n};\n","import T from \"../../tilesets/sewer/tiles.jsx\";\n\nexport default [\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.NLW_CORNER,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.NRW_CORNER,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.NLW_CORNER,\n    T.NLW_COLUMN,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.NRW_COLUMN,\n    T.NRW_CORNER,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.L_WALL,\n    T.NW_NPIT,\n    T.NW_NPIT,\n    T.N_STAIRWALL,\n    T.NW_NPIT,\n    T.NW_NPIT,\n    T.R_WALL,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.NLW_CORNER,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.NLW_WATER_COLUMN,\n    T.WATER,\n    T.WATER,\n    T.N_STAIR,\n    T.WATER,\n    T.WATER,\n    T.NRW_WATER_COLUMN,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.NRW_CORNER,\n    T.EMPTY,\n  ],\n  ...[\n    T.NLW_CORNER,\n    T.NLW_COLUMN,\n    T.FLOOR,\n    T.FLOOR,\n    T.LW_LPIT,\n    T.WATER,\n    T.WATER,\n    T.WATER,\n    T.V_WALKWAY,\n    T.WATER,\n    T.WATER,\n    T.WATER,\n    T.RW_RPIT,\n    T.FLOOR,\n    T.FLOOR,\n    T.NRW_COLUMN,\n    T.NRW_CORNER,\n  ],\n  ...[\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.LW_LPIT,\n    T.WATER,\n    T.WATER,\n    T.WATER,\n    T.V_WALKWAY,\n    T.WATER,\n    T.WATER,\n    T.WATER,\n    T.RW_RPIT,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n  ],\n  ...[\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.L_STAIRWALL,\n    T.L_STAIR,\n    T.H_WALKWAY,\n    T.H_WALKWAY,\n    T.C_WALKWAY,\n    T.H_WALKWAY,\n    T.H_WALKWAY,\n    T.R_STAIR,\n    T.R_STAIRWALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n  ],\n  ...[\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.LW_LPIT,\n    T.WATER,\n    T.WATER,\n    T.WATER,\n    T.V_WALKWAY,\n    T.WATER,\n    T.WATER,\n    T.WATER,\n    T.RW_RPIT,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n  ],\n];\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport { Direction } from \"../../../engine/utils/enums.jsx\";\nimport cells from \"./cells.jsx\";\n// Use Tileset\n// Map Information\nexport default {\n  bounds: [0, 0, 17, 19],\n  // Determines the tileset to load\n  tileset: \"sewer\",\n  // (0,0) -> (17,19) (X, Y) (20 Rows x 17 Column)\n  cells: cells,\n  // Sprites and Objects to be Loaded in the Scene & their Starting Points (includes effect tiles)\n  sprites: [\n    // Objects\n    { id: \"chest\", type: \"objects/chests/wood\", pos: new Vector(...[8, 14, 0]), facing: Direction.Down },\n    { id: \"chestmetal\", type: \"objects/chests/metal\", pos: new Vector(...[9, 13, 0]), facing: Direction.Right },\n    { id: \"chestred\", type: \"objects/chests/red\", pos: new Vector(...[9, 14, 0]), facing: Direction.Down },\n    { id: \"chestblue\", type: \"objects/chests/blue\", pos: new Vector(...[7, 13, 0]), facing: Direction.Left },\n    // Doorway\n    {\n      id: \"door\",\n      type: \"furniture/door\",\n      pos: new Vector(...[9, 1, 0]),\n      facing: Direction.Down,\n      zones: [\"dungeon-top\", \"dungeon-bottom\"],\n    },\n    // Tree\n    { id: \"tree\", type: \"furniture/tree\", fixed: true, pos: new Vector(...[8, 13, 0]), facing: Direction.Up },\n    // Furniture / Wall Decorations\n    { id: \"fireplace\", type: \"furniture/fireplace\", fixed: true, pos: new Vector(...[11, 1, 0]), facing: Direction.Up },\n    { id: \"fireplace\", type: \"effects/fireplace\", fixed: true, pos: new Vector(...[11, 1, 0]), facing: Direction.Up },\n    // NPCs\n    { id: \"darkness\", type: \"npc/darkness\", pos: new Vector(...[6, 5, 0]), facing: Direction.Down },\n    { id: \"air\", type: \"npc/air-knight\", pos: new Vector(...[8, 2, 0]), facing: Direction.Down },\n    { id: \"fire\", type: \"npc/fire-knight\", pos: new Vector(...[2, 8, 0]), facing: Direction.Right },\n    { id: \"earth\", type: \"npc/earth-knight\", pos: new Vector(...[14, 8, 0]), facing: Direction.Left },\n    // Presently - avatar is treated like a normal sprite (TODO - needs to be loaded dynamically via entry point)\n    { id: \"avatar\", type: \"characters/default\", pos: new Vector(...[9, 2, 0]), facing: Direction.Down },\n  ],\n  // Scenes + Scenarios\n  scenes: [\n    {\n      id: \"strange-legend\",\n      actions: [\n        // manual actions\n        // Scripted Dialogue Action Controls directly on sprites\n        {\n          sprite: \"air\",\n          action: \"dialogue\",\n          args: [\n            [\n              \"Long ago, in a dungeon far far away\",\n              \"The sewer was backing up, and well...everyone was losing their $%#t\",\n              \"But one had a plan...\",\n            ],\n            false,\n            { autoclose: true },\n          ],\n          scope: this, // scoped to the zone\n        },\n        {\n          sprite: \"air\",\n          action: \"dialogue\",\n          args: [[\"But what was that plan?...\"], false, { autoclose: true }],\n          scope: this, // scoped to the zone\n        },\n        // or call premade events and bundle many things and trigger them\n        { trigger: \"custom\", scope: this },\n      ],\n    },\n  ],\n  // Scripts / Triggers for the Zone\n  scripts: [\n    {\n      id: \"load-scene\", // **runs automatically when loaded\n      trigger: async function () {\n        await this.playScene(\"strange-legend\");\n      },\n    },\n    {\n      id: \"custom\", // manually called custom script\n      trigger: async function () {\n        await this.spriteDialogue(\"earth\", [\"Lets get in there!\"]);\n      },\n    },\n    {\n      id: \"clear-path\", // manually called custom script\n      trigger: async function () {\n        await this.moveSprite(\"darkness\", [8, 3, 0], true);\n      },\n    },\n  ],\n  // objects // 3d\n  objects: [\n    {\n      id: \"test-obj\",\n      type: \"person\",\n      mtl: false,\n      pos: new Vector(...[10, 15, 0]),\n    },\n    {\n      id: \"test-bed\",\n      type: \"bed\",\n      mtl: true,\n      pos: new Vector(...[14, 10, 0]),\n    },\n    {\n      id: \"test-cube\",\n      type: \"cube\",\n      mtl: false,\n      pos: new Vector(...[6, 4, 0]),\n    },\n  ],\n};\n","import T from \"../../tilesets/sewer/tiles.jsx\";\n// Map\nexport default [\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.NLW_CORNER,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.N_WALL,\n    T.NRW_CORNER,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.NLW_CORNER,\n    T.NLW_COLUMN,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.NRW_COLUMN,\n    T.NRW_CORNER,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.L_WALL,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.R_WALL,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.SLW_CORNER,\n    T.SLW_COLUMN,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.FLOOR,\n    T.SRW_COLUMN,\n    T.SRW_CORNER,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.SLW_CORNER,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.S_WALL,\n    T.SRW_CORNER,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n  ...[\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n    T.EMPTY,\n  ],\n];\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport Avatar from \"../../../engine/core/avatar.jsx\";\nexport default class Default extends Avatar {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // PROPERTIES\n    this.src = Resources.artResourceUrl(\"player.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"hero_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    this.state = \"intro\";\n    // Frames\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Should the camera follow the avatar?\n    this.bindCamera = true;\n    this.enableSpeech = true; // speech bubble\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport Avatar from \"../../../engine/core/avatar.jsx\";\nexport default class Default extends Avatar {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // PROPERTIES\n    this.src = Resources.artResourceUrl(\"player.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"hero_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    this.state = \"intro\";\n    // Frames\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Should the camera follow the avatar?\n    this.bindCamera = true;\n    this.enableSpeech = true; // speech bubble\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Fireplace from \"../../../engine/sprites/effects/fireplace.jsx\";\nexport default class MyFireplace extends Fireplace {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../utils/math/vector.jsx\";\nimport Resources from \"../../utils/resources.jsx\";\nimport AnimatedSprite from \"./base/animatedSprite.jsx\";\n\nexport default class Fireplace extends AnimatedSprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.src = Resources.artResourceUrl(\"room.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [48, 32];\n    this.fixed = true;\n    // Frames\n    this.frames = {\n      up: [\n        [0, 144],\n        [48, 144],\n        [0, 176],\n        [48, 176],\n      ],\n    };\n    this.drawOffset = new Vector(0, 1.8, 0.001);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    this.frameTime = 150;\n  }\n  // Initialize\n  init() {\n    this.triggerTime = 1000;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { translate, rotate } from \"../../../utils/math/matrix4.jsx\";\nimport Sprite from \"../../../core/sprite.jsx\";\nimport { Vector } from \"../../../utils/math/vector.jsx\";\n\nexport default class AnimatedSprite extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.enableSpeech = false;\n    this.lastTime = 0;\n    this.accumTime = 0;\n    this.triggerTime = 400;\n    this.frameTime = 250;\n  }\n  // Initialize\n  init() {\n    this.triggerTime = 1000 + Math.floor(Math.random() * 5000);\n  }\n  // Update each frame\n  tick(time) {\n    if (this.lastTime == 0) {\n      this.lastTime = time;\n      return;\n    }\n    // wait enough time\n    this.accumTime += time - this.lastTime;\n    if (this.accumTime < this.frameTime || (this.animFrame == 0 && this.accumTime < this.triggerTime)) return;\n    // reset animation\n    if (this.animFrame == 5) {\n      this.setFrame(0);\n      this.triggerTime = 1000 + Math.floor(Math.random() * 4000);\n    } else {\n      this.setFrame(this.animFrame + 1);\n      this.accumTime = 0;\n      this.lastTime = time;\n    }\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Spurt from \"../../../engine/sprites/effects/spurt.jsx\";\nexport default class WaterSpurt extends Spurt {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../utils/math/vector.jsx\";\nimport Resources from \"../../utils/resources.jsx\";\nimport AnimatedTile from \"./base/animatedTile.jsx\";\n\nexport default class Spurt extends AnimatedTile {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.src = Resources.artResourceUrl(\"sewer.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [16, 16];\n    // Frames\n    this.frames = {\n      up: [\n        [0, 144],\n        [16, 144],\n        [32, 144],\n        [48, 144],\n        [64, 144],\n        [80, 144],\n      ],\n    };\n    this.drawOffset = new Vector(0, 1, 0.001);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    this.frameTime = 150;\n  }\n  // Initialize\n  init() {\n    this.triggerTime = 1000 + Math.random() * 5000;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { translate, rotate } from \"../../../utils/math/matrix4.jsx\";\nimport Sprite from \"../../../core/sprite.jsx\";\n\nexport default class AnimatedTile extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.enableSpeech = false;\n    this.lastTime = 0;\n    this.accumTime = 0;\n    this.triggerTime = 400;\n    this.frameTime = 250;\n    this.blocking = false; // can passthrough\n  }\n  // Initialize\n  init() {\n    this.triggerTime = 2000 ;\n  }\n  // Update each frame\n  tick(time) {\n    if (this.lastTime == 0) {\n      this.lastTime = time;\n      return;\n    }\n    // wait enough time\n    this.accumTime += time - this.lastTime;\n    if (this.accumTime < this.frameTime || (this.animFrame == 0 && this.accumTime < this.triggerTime)) return;\n    // reset animation\n    if (this.animFrame == 4) {\n      this.setFrame(0);\n      this.triggerTime = 2000 + Math.floor(Math.random() * 4000);\n    } else {\n      this.setFrame(this.animFrame + 1);\n      this.accumTime = 0;\n      this.lastTime = time;\n    }\n  }\n  // Draw Frame\n  draw(engine) {\n    if (!this.loaded) return;\n    engine.mvPushMatrix();\n    translate(engine.uViewMat, engine.uViewMat, this.pos.toArray());\n    // Lie flat on the ground\n    translate(engine.uViewMat, engine.uViewMat, this.drawOffset.toArray());\n    rotate(engine.uViewMat, engine.uViewMat, engine.degToRad(90), [1, 0, 0]);\n    engine.bindBuffer(this.vertexPosBuf, engine.shaderProgram.aVertexPosition);\n    engine.bindBuffer(this.vertexTexBuf, engine.shaderProgram.aTextureCoord);\n    this.texture.attach();\n    // Draw\n    engine.shaderProgram.setMatrixUniforms();\n    engine.gl.drawArrays(engine.gl.TRIANGLES, 0, this.vertexPosBuf.numItems);\n    engine.mvPopMatrix();\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../utils/math/vector.jsx\";\nimport Resources from \"../../utils/resources.jsx\";\nimport Sprite from \"../../core/sprite.jsx\";\nimport { ActionLoader } from \"../../utils/loaders.jsx\";\n\nexport default class Door extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.src = Resources.artResourceUrl(\"room.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [16, 32];\n    // this.fixed = true;\n    // Frames\n    this.frames = {\n      up: [\n        [48, 64],\n        [48, 96],\n      ],\n      right: [\n        [48, 64],\n        [48, 96],\n      ],\n      left: [\n        [48, 64],\n        [48, 96],\n      ],\n      down: [\n        [48, 64],\n        [48, 96],\n      ],\n    };\n    this.drawOffset = new Vector(0, 1.001, 0.001);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    this.state = \"closed\";\n  }\n\n  // Interaction\n  interact(sprite, finish) {\n    console.log(\"opening door\", sprite);\n    let ret = null;\n    this.startTime = Date.now();\n    // React based on internal state\n    switch (this.state) {\n      case \"closed\":\n        this.state = \"open\";\n        this.blocking = false;\n        this.override = true;\n        ret = new ActionLoader(\n          this.engine,\n          \"animate\",\n          [\n            600,\n            3,\n            () => {\n              console.log(\"OPENED!!!\");\n              finish(true);\n            },\n          ],\n          this\n        );\n        break;\n      case \"open\":\n        this.state = \"open\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Its already Open!.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n\n  // when stepping on tile position (if not blocking)\n  onStep(sprite) {\n    console.log(\"walking out....\", sprite);\n    let world = this.zone.world;\n    world.removeAllZones();\n    if (this.zones) this.zones.forEach((z) => world.loadZone(z));\n    return null;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Door from \"../../../engine/sprites/furniture/door.jsx\";\nexport default class MyDoor extends Door {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Fireplace from \"../../../engine/sprites/furniture/fireplace.jsx\";\nexport default class MyFireplace extends Fireplace {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../utils/math/vector.jsx\";\nimport Resources from \"../../utils/resources.jsx\";\nimport Sprite from \"../../core/sprite.jsx\";\n\nexport default class Fireplace extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.src = Resources.artResourceUrl(\"room.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [48, 80];\n    this.fixed = true;\n    // Frames\n    this.frames = {\n      up: [\n        [160, 80]\n      ],\n    };\n    this.drawOffset = new Vector(0, 1.8, 0.001);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport XMasTree from \"../../../engine/sprites/furniture/xmas-tree.jsx\";\nexport default class MyTree extends XMasTree {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../utils/math/vector.jsx\";\nimport Resources from \"../../utils/resources.jsx\";\nimport Sprite from \"../../core/sprite.jsx\";\n\nexport default class XMasTree extends Sprite {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.src = Resources.artResourceUrl(\"trees.png\");\n    this.sheetSize = [512, 512];\n    this.tileSize = [96, 144];\n    this.fixed = true;\n    // Frames\n    this.frames = {\n      up: [\n        [96, 160]\n      ],\n    };\n    this.drawOffset = new Vector(-2.5, 2.15, -0.85);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    this.blocking = true;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../engine/utils/loaders.jsx\";\nimport AirKnight from \"../../../engine/sprites/npc/air-knight.jsx\";\n\nexport default class MyAirKnight extends AirKnight {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      case \"intro\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Buying eh?!\", false, { autoclose: true, onClose: () => finish(true) }],\n          this,\n          async () => {\n            // Eth Account\n            const account = (await ethereum.request({ method: \"eth_requestAccounts\" }))[0];\n            // Params\n            const msgParams = JSON.stringify({\n              domain: {\n                // Defining the chain aka Rinkeby testnet or Ethereum Main Net\n                chainId: 1,\n                // Give a user friendly name to the specific contract you are signing for.\n                name: \"Pixos\",\n                // If name isn't enough add verifying contract to make sure you are establishing contracts with the proper entity\n                verifyingContract: \"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC\",\n                // Just let's you know the latest version. Definitely make sure the field name is correct.\n                version: \"1\",\n              },\n              // Defining the message signing data content.\n              message: {\n                game: \"Example\",\n                contents: \"Quest Item\",\n                from: {\n                  sprite: \"air-knight\",\n                  wallet: \"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826\",\n                },\n                to: {\n                  sprite: \"avatar\",\n                  wallet: account,\n                },\n              },\n              // Refers to the keys of the *types* object below.\n              primaryType: \"Item\",\n              types: {\n                EIP712Domain: [\n                  { name: \"name\", type: \"string\" },\n                  { name: \"version\", type: \"string\" },\n                  { name: \"chainId\", type: \"uint256\" },\n                  { name: \"verifyingContract\", type: \"address\" },\n                ],\n                // Refer to PrimaryType\n                Item: [\n                  { name: \"game\", type: \"string\" },\n                  { name: \"contents\", type: \"string\" },\n                  { name: \"from\", type: \"Person\" },\n                  { name: \"to\", type: \"Person\" },\n                ],\n                Person: [\n                  { name: \"sprite\", type: \"string\" },\n                  { name: \"wallet\", type: \"address\" },\n                ],\n              },\n            });\n            // Setup\n            var from = account;\n            var params = [from, msgParams];\n            var method = \"eth_signTypedData_v4\";\n            // Sign\n            web3.currentProvider.sendAsync(\n              {\n                method,\n                params,\n                from,\n              },\n              function (err, result) {\n                if (err) return console.dir(err);\n                if (result.error) {\n                  alert(result.error.message);\n                }\n                if (result.error) return console.error(\"ERROR\", result);\n                console.log(\"TYPED SIGNED:\" + JSON.stringify(result.result));\n\n                const recovered = sigUtil.recoverTypedSignature_v4({\n                  data: JSON.parse(msgParams),\n                  sig: result.result,\n                });\n\n                if (ethUtil.toChecksumAddress(recovered) === ethUtil.toChecksumAddress(from)) {\n                  alert(\"Successfully recovered signer as \" + from);\n                } else {\n                  alert(\"Failed to verify signer when comparing \" + result + \" to \" + from);\n                }\n              }\n            );\n          }\n        );\n\n        break;\n      case \"loop\":\n        this.state = \"loop2\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"I heard about a strange legend once.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop2\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Sorry, I don't remember the story at the moment\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    console.log(ret);\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport NPC from \"./base/NPC.jsx\";\n\nexport default class AirKnight extends NPC {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"air-knight.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"air_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"intro\";\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../engine/utils/loaders.jsx\";\nimport Darkness from \"../../../engine/sprites/npc/darkness.jsx\";\nexport default class MyDarkness extends Darkness {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      case \"intro\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Join me....!\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop\":\n        this.state = \"loop2\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"I need a partner for squash.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop2\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Seriously - you swing?\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport NPC from \"./base/NPC.jsx\";\n\nexport default class Darkness extends NPC {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"darkness.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"dark_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"intro\";\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../engine/utils/loaders.jsx\";\nimport EarthKnight from \"../../../engine/sprites/npc/earth-knight.jsx\";\nexport default class MyEarthKnight extends EarthKnight {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      case \"intro\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Welcome!\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop\":\n        this.state = \"loop2\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"I heard about a strange legend once.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop2\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Sorry, I don't remember the story at the moment\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    console.log(ret);\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport NPC from \"./base/NPC.jsx\";\n\nexport default class EarthKnight extends NPC {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"earth-knight.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"earth_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"intro\";\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../engine/utils/loaders.jsx\";\nimport FireKnight from \"../../../engine/sprites/npc/fire-knight.jsx\";\nexport default class MyFireKnight extends FireKnight {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      case \"intro\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Welcome!\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop\":\n        this.state = \"loop2\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"I heard about a strange legend once.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop2\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Sorry, I don't remember the story at the moment\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    console.log(ret);\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport NPC from \"./base/NPC.jsx\";\n\nexport default class FireKnight extends NPC {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"fire-knight.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"fire_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"intro\";\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../engine/utils/loaders.jsx\";\nimport WaterKnight from \"../../../engine/sprites/npc/water-knight.jsx\";\nexport default class MyWaterKnight extends WaterKnight {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n  }\n  // Interaction\n  interact(sprite, finish) {\n    let ret = null;\n    // React based on internal state\n    switch (this.state) {\n      case \"intro\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [[\"I am the Water Knight!\", \"Here is my home.\", \"yo\"], false, { autoclose: false, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop\":\n        this.state = \"loop2\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"I heard about a strange legend once.\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      case \"loop2\":\n        this.state = \"loop\";\n        ret = new ActionLoader(\n          this.engine,\n          \"dialogue\",\n          [\"Sorry, I don't remember the story at the moment\", false, { autoclose: true, onClose: () => finish(true) }],\n          this\n        );\n        break;\n      default:\n        break;\n    }\n    if (ret) this.addAction(ret);\n    // If completion handler passed through - call it when done\n    if (finish) finish(false);\n    return ret;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../engine/utils/math/vector.jsx\";\nimport Resources from \"../../../engine/utils/resources.jsx\";\nimport NPC from \"./base/NPC.jsx\";\n\nexport default class WaterKnight extends NPC {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"water-knight.gif\");\n    this.portraitSrc = Resources.artResourceUrl(\"water_portrait.gif\");\n    this.sheetSize = [128, 256];\n    this.tileSize = [24, 32];\n    // Offsets\n    this.drawOffset = new Vector(-0.25, 1, 0.125);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      up: [\n        [0, 0],\n        [24, 0],\n        [48, 0],\n        [24, 0],\n      ],\n      right: [\n        [0, 32],\n        [24, 32],\n        [48, 32],\n        [24, 32],\n      ],\n      down: [\n        [0, 64],\n        [24, 64],\n        [48, 64],\n        [24, 64],\n      ],\n      left: [\n        [0, 96],\n        [24, 96],\n        [48, 96],\n        [24, 96],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"intro\";\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../../engine/utils/loaders.jsx\";\nimport BlueChest from \"../../../../engine/sprites/objects/chests/blue.jsx\";\n\nexport default class MyBlueChest extends BlueChest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.enableSpeech = false;\n    // todo - plan and implement an inventory system\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nimport { Vector } from \"../../../utils/math/vector.jsx\";\nimport Resources from \"../../../utils/resources.jsx\";\nimport Chest from \"./base.jsx\";\nexport default class BlueChest extends Chest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"chests.gif\");\n    this.sheetSize = [256, 256]; // (actually 512 - gives 2x up-res)\n    this.tileSize = [16, 24]; // (relative to other sprites)\n    // Offsets\n    this.drawOffset = new Vector(0, 1, 0.2);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      down: [\n        [48, 0],\n        [48, 24],\n        [48, 48],\n        [48, 72],\n      ],\n      right: [\n        [112, 0],\n        [112, 24],\n        [112, 48],\n        [112, 72],\n      ],\n      up: [\n        [48, 96],\n        [48, 120],\n        [48, 144],\n        [48, 168],\n      ],\n      left: [\n        [176, 0],\n        [176, 24],\n        [176, 48],\n        [176, 72],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"closed\";\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../../engine/utils/loaders.jsx\";\nimport IronChest from \"../../../../engine/sprites/objects/chests/iron.jsx\";\n\nexport default class MyMetalChest extends IronChest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.enableSpeech = false;\n    // todo - plan and implement an inventory system\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nimport { Vector } from \"../../../utils/math/vector.jsx\";\nimport Resources from \"../../../utils/resources.jsx\";\nimport Chest from \"./base.jsx\";\nexport default class IronChest extends Chest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"chests.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [16, 24];\n    // Offsets\n    this.drawOffset = new Vector(0, 1, 0.2);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      down: [\n        [16, 0],\n        [16, 24],\n        [16, 48],\n        [16, 72],\n      ],\n      right: [\n        [80, 0],\n        [80, 24],\n        [80, 48],\n        [80, 72],\n      ],\n      up: [\n        [16, 96],\n        [16, 120],\n        [16, 144],\n        [16, 168],\n      ],\n      left: [\n        [144, 0],\n        [144, 24],\n        [144, 48],\n        [144, 72],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"closed\";\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../../engine/utils/loaders.jsx\";\nimport RedChest from \"../../../../engine/sprites/objects/chests/red.jsx\";\n\nexport default class MyRedChest extends RedChest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.enableSpeech = false;\n    // todo - plan and implement an inventory system\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../utils/math/vector.jsx\";\nimport Resources from \"../../../utils/resources.jsx\";\nimport Chest from \"./base.jsx\";\nexport default class RedChest extends Chest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"chests.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [16, 24];\n    // Offsets\n    this.drawOffset = new Vector(0, 1, 0.2);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      down: [\n        [32, 0],\n        [32, 24],\n        [32, 48],\n        [32, 72],\n      ],\n      right: [\n        [96, 0],\n        [96, 24],\n        [96, 48],\n        [96, 72],\n      ],\n      up: [\n        [32, 96],\n        [32, 120],\n        [32, 144],\n        [32, 168],\n      ],\n      left: [\n        [160, 0],\n        [160, 24],\n        [160, 48],\n        [160, 72],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"closed\";\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { ActionLoader } from \"../../../../engine/utils/loaders.jsx\";\nimport WoodChest from \"../../../../engine/sprites/objects/chests/wood.jsx\";\n\nexport default class MyWoodChest extends WoodChest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    this.enableSpeech = false;\n    // todo - plan and implement an inventory system\n    this.inventory = [\n      {\n        id: \"sword\",\n        type: \"object\",\n      },\n    ];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { Vector } from \"../../../utils/math/vector.jsx\";\nimport Resources from \"../../../utils/resources.jsx\";\nimport { ActionLoader } from \"../../../utils/loaders.jsx\";\nimport Chest from \"./base.jsx\";\n\nexport default class WoodChest extends Chest {\n  constructor(engine) {\n    // Initialize Sprite\n    super(engine);\n    // Character art from http://opengameart.org/content/chara-seth-scorpio\n    this.src = Resources.artResourceUrl(\"chests.gif\");\n    this.sheetSize = [256, 256];\n    this.tileSize = [16, 24];\n    // Offsets\n    this.drawOffset = new Vector(0, 1, 0.2);\n    this.hotspotOffset = new Vector(0.5, 0.5, 0);\n    // Frames & Faces\n    this.frames = {\n      down: [\n        [0, 0],\n        [0, 24],\n        [0, 48],\n        [0, 72],\n      ],\n      right: [\n        [64, 0],\n        [64, 24],\n        [64, 48],\n        [64, 72],\n      ],\n      up: [\n        [0, 96],\n        [0, 120],\n        [0, 144],\n        [0, 168],\n      ],\n      left: [\n        [128, 0],\n        [128, 24],\n        [128, 48],\n        [128, 72],\n      ],\n    };\n    // Should the camera follow the avatar?\n    this.bindCamera = false;\n    // enable speech\n    this.enableSpeech = true;\n    // Interaction Management\n    this.state = \"closed\";\n    // Inventory\n    this.inventory = [];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\n// Tile Types Supported (Labels for Easy Use)\nexport default {\n  FLOOR: [\"FLAT_ALL\", \"FLOOR\", 0],\n  WATER: [\"FLAT_NONE\", \"WATER\", -1.5],\n  EMPTY: [\"FLAT_ALL\", \"EMPTY\", 2],\n  // Stairs\n  N_STAIR: [\"FLAT_ALL\", \"FLOOR_V\", -1, \"WALL_R\", \"WATER_WALL\", -1, \"WALL_L\", \"WATER_WALL\", -1, \"STAIR_T\", \"STAIR\", -1],\n  N_STAIRWALL: [\"FLAT_ALL\", \"FLOOR_B\", 0, \"WALL_T\", \"WALL_WATER\", 0, 15],\n  S_STAIR: [\"FLAT_ALL\", \"FLOOR_V\", -1, \"WALL_R\", \"WATER_WALL\", -1, \"WALL_L\", \"WATER_WALL\", -1, \"STAIR_B\", \"STAIR\", -1],\n  S_STAIRWALL: [\"FLAT_ALL\", \"FLOOR_T\", 0, \"WALL_B\", \"WALL\", 0, 15],\n  L_STAIR: [\"FLAT_ALL\", \"FLOOR_H\", -1, \"WALL_T\", \"WATER_WALL\", -1, \"WALL_B\", \"WATER_WALL\", -1, \"STAIR_L\", \"STAIR\", -1],\n  L_STAIRWALL: [\"FLAT_ALL\", \"FLOOR_R\", 0, \"WALL_L\", \"WALL_WATER\", 0, 15],\n  R_STAIR: [\"FLAT_ALL\", \"FLOOR_H\", -1, \"WALL_T\", \"WATER_WALL\", -1, \"WALL_B\", \"WATER_WALL\", -1, \"STAIR_R\", \"STAIR\", -1],\n  R_STAIRWALL: [\"FLAT_ALL\", \"FLOOR_L\", 0, \"WALL_R\", \"WALL_WATER\", 0, 15],\n  // Walls\n  N_WALL: [\"WALL_T\", \"WALL\", 2, \"FLAT_ALL\", \"EMPTY_B\", 2],\n  S_WALL: [\"WALL_B\", \"WALL\", 2, \"FLAT_ALL\", \"EMPTY_T\", 2],\n  L_WALL: [\"WALL_L\", \"WALL\", 2, \"FLAT_ALL\", \"EMPTY_R\", 2],\n  R_WALL: [\"WALL_R\", \"WALL\", 2, \"FLAT_ALL\", \"EMPTY_L\", 2],\n  // Corner Blend Empty\n  NLW_CORNER: [\"FLAT_ALL\", \"EMPTY_CTL\", 2],\n  NRW_CORNER: [\"FLAT_ALL\", \"EMPTY_CTR\", 2],\n  SLW_CORNER: [\"FLAT_ALL\", \"EMPTY_CBL\", 2],\n  SRW_CORNER: [\"FLAT_ALL\", \"EMPTY_CBR\", 2],\n  // Columns (Wall Corners)\n  NLW_COLUMN: [\"WALL_T\", \"WALL\", 2, \"WALL_L\", \"WALL\", 2, \"FLAT_NONE\", \"EMPTY_BR\", 2],\n  NRW_COLUMN: [\"WALL_R\", \"WALL\", 2, \"WALL_T\", \"WALL\", 2, \"FLAT_NONE\", \"EMPTY_BL\", 2],\n  SLW_COLUMN: [\"WALL_L\", \"WALL\", 2, \"WALL_B\", \"WALL\", 2, \"FLAT_NONE\", \"EMPTY_TR\", 2],\n  SRW_COLUMN: [\"WALL_R\", \"WALL\", 2, \"WALL_B\", \"WALL\", 2, \"FLAT_NONE\", \"EMPTY_TL\", 2],\n  // Columns over WATER\n  NRW_WATER_COLUMN: [\"WALL_R\", \"WALL\", 2, \"WALL_R\", \"WALL_WATER\", 0, \"WALL_T\", \"WALL\", 2, \"WALL_T\", \"WALL_WATER\", 0, \"FLAT_ALL\", \"EMPTY_BL\", 2],\n  NLW_WATER_COLUMN: [\"WALL_T\", \"WALL\", 2, \"WALL_L\", \"WALL\", 2, \"FLAT_ALL\", \"EMPTY_BR\", 2, \"WALL_L\", \"WALL_WATER\", 0, \"WALL_T\", \"WALL_WATER\", 0],\n  SLW_WATER_COLUMN: [\"WALL_L\", \"WALL\", 2, \"WALL_B\", \"WALL\", 2, \"FLAT_ALL\", \"EMPTY_TR\", 2, \"WALL_L\", \"WALL_WATER\", 0, \"WALL_B\", \"WALL_WATER\", 0],\n  SRW_WATER_COLUMN: [\"WALL_R\", \"WALL\", 2, \"WALL_R\", \"WALL_WATER\", 0, \"WALL_B\", \"WALL\", 2, \"WALL_B\", \"WALL_WATER\", 0, \"FLAT_ALL\", \"EMPTY_TL\", 2],\n  // Pits\n  NW_NPIT: [\"FLAT_ALL\", \"FLOOR_B\", 0, \"WALL_T\", \"WALL_WATER\", 0],\n  LW_LPIT: [\"FLAT_ALL\", \"FLOOR_R\", 0, \"WALL_L\", \"WALL_WATER\", 0],\n  RW_RPIT: [\"FLAT_ALL\", \"FLOOR_L\", 0, \"WALL_R\", \"WALL_WATER\", 0],\n  SW_SPIT: [\"FLAT_ALL\", \"FLOOR_T\", 0, \"WALL_B\", \"WALL_WATER\", 0],\n  // Walkway rampart\n  C_WALKWAY: [\"FLAT_ALL\", \"FLOOR_C\", -1],\n  V_WALKWAY: [\"FLAT_ALL\", \"FLOOR_V\", -1, \"WALL_R\", \"WATER_WALL\", -1, \"WALL_L\", \"WATER_WALL\", -1],\n  H_WALKWAY: [\"FLAT_ALL\", \"FLOOR_H\", -1, \"WALL_T\", \"WATER_WALL\", -1, \"WALL_B\", \"WATER_WALL\", -1],\n};\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Resources from \"../../../engine/utils/resources.jsx\";\n// Tileset Schema\nexport default {\n  src: Resources.artResourceUrl(\"sewer.gif\"),\n  sheetSize: [256, 256],\n  tileSize: 16,\n  bgColor: [31, 20, 29],\n  // Tile Locations on resource (based on size)\n  textures: {\n    FLOOR: [1, 1],\n    FLOOR_BR: [2, 2],\n    FLOOR_R: [2, 1],\n    FLOOR_TR: [2, 0],\n    FLOOR_T: [1, 0],\n    FLOOR_TL: [0, 0],\n    FLOOR_L: [0, 1],\n    FLOOR_BL: [0, 2],\n    FLOOR_B: [1, 2],\n    FLOOR_CBR: [4, 1],\n    FLOOR_CTR: [4, 0],\n    FLOOR_CTL: [3, 0],\n    FLOOR_CBL: [3, 1],\n    FLOOR_V: [3, 2],\n    WATER: [0.5, 7.5],\n    FLOOR_H: [4, 2],\n    FLOOR_C: [3, 3],\n    EMPTY: [6, 1],\n    EMPTY_BR: [7, 2],\n    EMPTY_R: [7, 1],\n    EMPTY_TR: [7, 0],\n    EMPTY_T: [6, 0],\n    EMPTY_TL: [5, 0],\n    EMPTY_L: [5, 1],\n    EMPTY_BL: [5, 2],\n    EMPTY_B: [6, 2],\n    EMPTY_CBR: [9, 1],\n    EMPTY_CTR: [9, 0],\n    EMPTY_CTL: [8, 0],\n    EMPTY_CBL: [8, 1],\n    STAIR: [5, 3],\n    WALL: [0, 3],\n    WALL_WATER: [0, 5],\n    WATER_WALL: [0, 6],\n  },\n  // Geometries for the tileset\n  // type --> walkability -- 1/0 --> [down,left,up,right]\n  geometry: {\n    // Flat - Walkability -- All\n    FLAT_ALL: {\n      vertices: [\n        [\n          [0, 1, 0],\n          [1, 1, 0],\n          [1, 0, 0],\n        ],\n        [\n          [0, 1, 0],\n          [1, 0, 0],\n          [0, 0, 0],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 1],\n          [1, 1],\n          [1, 0],\n        ],\n        [\n          [0, 1],\n          [1, 0],\n          [0, 0],\n        ],\n      ],\n      type: parseInt(\"1111\", 2),\n    },\n    // Flat - Walkability -- None\n    FLAT_NONE: {\n      vertices: [\n        [\n          [0, 1, 0],\n          [1, 1, 0],\n          [1, 0, 0],\n        ],\n        [\n          [0, 1, 0],\n          [1, 0, 0],\n          [0, 0, 0],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 1],\n          [1, 1],\n          [1, 0],\n        ],\n        [\n          [0, 1],\n          [1, 0],\n          [0, 0],\n        ],\n      ],\n      type: parseInt(\"0000\", 2),\n    },\n    // Stairs\n    STAIR_R: {\n      vertices: [\n        [\n          [0.25, 0, 0.25],\n          [0.25, 1, 0.25],\n          [0.5, 1, 0.25],\n        ],\n        [\n          [0.25, 0, 0.25],\n          [0.5, 1, 0.25],\n          [0.5, 0, 0.25],\n        ],\n        [\n          [0.5, 0, 0.5],\n          [0.5, 1, 0.5],\n          [0.75, 1, 0.5],\n        ],\n        [\n          [0.5, 0, 0.5],\n          [0.75, 1, 0.5],\n          [0.75, 0, 0.5],\n        ],\n        [\n          [0.75, 0, 0.75],\n          [0.75, 1, 0.75],\n          [1, 1, 0.75],\n        ],\n        [\n          [0.75, 0, 0.75],\n          [1, 1, 0.75],\n          [1, 0, 0.75],\n        ],\n        [\n          [0.25, 0, 0],\n          [0.25, 1, 0],\n          [0.25, 1, 0.25],\n        ],\n        [\n          [0.25, 0, 0],\n          [0.25, 1, 0.25],\n          [0.25, 0, 0.25],\n        ],\n        [\n          [0.5, 0, 0.25],\n          [0.5, 1, 0.25],\n          [0.5, 1, 0.5],\n        ],\n        [\n          [0.5, 0, 0.25],\n          [0.5, 1, 0.5],\n          [0.5, 0, 0.5],\n        ],\n        [\n          [0.75, 0, 0.5],\n          [0.75, 1, 0.5],\n          [0.75, 1, 0.75],\n        ],\n        [\n          [0.75, 0, 0.5],\n          [0.75, 1, 0.75],\n          [0.75, 0, 0.75],\n        ],\n        [\n          [1, 0, 0.75],\n          [1, 1, 0.75],\n          [1, 1, 1],\n        ],\n        [\n          [1, 0, 0.75],\n          [1, 1, 1],\n          [1, 0, 1],\n        ],\n        [\n          [0, 0, 0],\n          [1, 0, 0],\n          [1, 0, 1],\n        ],\n        [\n          [0, 0, 0],\n          [1, 0, 1],\n          [0, 0, 1],\n        ],\n        [\n          [0, 1, 0],\n          [1, 1, 0],\n          [1, 1, 1],\n        ],\n        [\n          [0, 1, 0],\n          [1, 1, 1],\n          [0, 1, 1],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 0.75],\n          [1, 0.75],\n          [1, 0.5],\n        ],\n        [\n          [0, 0.75],\n          [1, 0.5],\n          [0, 0.5],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.5],\n          [1, 0.25],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.25],\n          [0, 0.25],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.25],\n          [1, 0],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.0],\n          [0, 0],\n        ],\n        [\n          [0, 2],\n          [1, 2],\n          [1, 1.75],\n        ],\n        [\n          [0, 2],\n          [1, 1.75],\n          [0, 1.75],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.75],\n          [1, 1.5],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.5],\n          [0, 1.5],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.5],\n          [1, 1.25],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.25],\n          [0, 1.25],\n        ],\n        [\n          [0, 1.25],\n          [1, 1.25],\n          [1, 1],\n        ],\n        [\n          [0, 1.25],\n          [1, 1],\n          [0, 1],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n      ],\n      walkPoly: [\n        [\n          [0, 1, 0],\n          [1, 1, 1],\n          [1, 0, 1],\n        ],\n        [\n          [0, 1, 0],\n          [1, 0, 1],\n          [0, 0, 0],\n        ],\n      ],\n      type: parseInt(\"0101\", 2),\n    },\n    STAIR_T: {\n      vertices: [\n        [\n          [0, 0.75, 0.25],\n          [1, 0.75, 0.25],\n          [1, 0.5, 0.25],\n        ],\n        [\n          [0, 0.75, 0.25],\n          [1, 0.5, 0.25],\n          [0, 0.5, 0.25],\n        ],\n        [\n          [0, 0.5, 0.5],\n          [1, 0.5, 0.5],\n          [1, 0.25, 0.5],\n        ],\n        [\n          [0, 0.5, 0.5],\n          [1, 0.25, 0.5],\n          [0, 0.25, 0.5],\n        ],\n        [\n          [0, 0.25, 0.75],\n          [1, 0.25, 0.75],\n          [1, 0, 0.75],\n        ],\n        [\n          [0, 0.25, 0.75],\n          [1, 0, 0.75],\n          [0, 0, 0.75],\n        ],\n        [\n          [0, 0.75, 0],\n          [1, 0.75, 0],\n          [1, 0.75, 0.25],\n        ],\n        [\n          [0, 0.75, 0],\n          [1, 0.75, 0.25],\n          [0, 0.75, 0.25],\n        ],\n        [\n          [0, 0.5, 0.25],\n          [1, 0.5, 0.25],\n          [1, 0.5, 0.5],\n        ],\n        [\n          [0, 0.5, 0.25],\n          [1, 0.5, 0.5],\n          [0, 0.5, 0.5],\n        ],\n        [\n          [0, 0.25, 0.5],\n          [1, 0.25, 0.5],\n          [1, 0.25, 0.75],\n        ],\n        [\n          [0, 0.25, 0.5],\n          [1, 0.25, 0.75],\n          [0, 0.25, 0.75],\n        ],\n        [\n          [0, 0, 0.75],\n          [1, 0, 0.75],\n          [1, 0, 1],\n        ],\n        [\n          [0, 0, 0.75],\n          [1, 0, 1],\n          [0, 0, 1],\n        ],\n        [\n          [0, 1, 0],\n          [0, 0, 0],\n          [0, 0, 1],\n        ],\n        [\n          [0, 1, 0],\n          [0, 0, 1],\n          [0, 1, 1],\n        ],\n        [\n          [1, 1, 0],\n          [1, 0, 0],\n          [1, 0, 1],\n        ],\n        [\n          [1, 1, 0],\n          [1, 0, 1],\n          [1, 1, 1],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 0.75],\n          [1, 0.75],\n          [1, 0.5],\n        ],\n        [\n          [0, 0.75],\n          [1, 0.5],\n          [0, 0.5],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.5],\n          [1, 0.25],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.25],\n          [0, 0.25],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.25],\n          [1, 0],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.0],\n          [0, 0],\n        ],\n        [\n          [0, 2],\n          [1, 2],\n          [1, 1.75],\n        ],\n        [\n          [0, 2],\n          [1, 1.75],\n          [0, 1.75],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.75],\n          [1, 1.5],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.5],\n          [0, 1.5],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.5],\n          [1, 1.25],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.25],\n          [0, 1.25],\n        ],\n        [\n          [0, 1.25],\n          [1, 1.25],\n          [1, 1],\n        ],\n        [\n          [0, 1.25],\n          [1, 1],\n          [0, 1],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n      ],\n      walkPoly: [\n        [\n          [0, 1, 0],\n          [1, 1, 0],\n          [1, 0, 1],\n        ],\n        [\n          [0, 1, 0],\n          [1, 0, 1],\n          [0, 0, 1],\n        ],\n      ],\n      type: parseInt(\"1010\", 2),\n    },\n    STAIR_L: {\n      vertices: [\n        [\n          [0.75, 1, 0.25],\n          [0.75, 0, 0.25],\n          [0.5, 0, 0.25],\n        ],\n        [\n          [0.75, 1, 0.25],\n          [0.5, 0, 0.25],\n          [0.5, 1, 0.25],\n        ],\n        [\n          [0.5, 1, 0.5],\n          [0.5, 0, 0.5],\n          [0.25, 0, 0.5],\n        ],\n        [\n          [0.5, 1, 0.5],\n          [0.25, 0, 0.5],\n          [0.25, 1, 0.5],\n        ],\n        [\n          [0.25, 1, 0.75],\n          [0.25, 0, 0.75],\n          [0, 0, 0.75],\n        ],\n        [\n          [0.25, 1, 0.75],\n          [0, 0, 0.75],\n          [0, 1, 0.75],\n        ],\n        [\n          [0.75, 1, 0],\n          [0.75, 0, 0],\n          [0.75, 0, 0.25],\n        ],\n        [\n          [0.75, 1, 0],\n          [0.75, 0, 0.25],\n          [0.75, 1, 0.25],\n        ],\n        [\n          [0.5, 1, 0.25],\n          [0.5, 0, 0.25],\n          [0.5, 0, 0.5],\n        ],\n        [\n          [0.5, 1, 0.25],\n          [0.5, 0, 0.5],\n          [0.5, 1, 0.5],\n        ],\n        [\n          [0.25, 1, 0.5],\n          [0.25, 0, 0.5],\n          [0.25, 0, 0.75],\n        ],\n        [\n          [0.25, 1, 0.5],\n          [0.25, 0, 0.75],\n          [0.25, 1, 0.75],\n        ],\n        [\n          [0, 1, 0.75],\n          [0, 0, 0.75],\n          [0, 0, 1],\n        ],\n        [\n          [0, 1, 0.75],\n          [0, 0, 1],\n          [0, 1, 1],\n        ],\n        [\n          [1, 1, 0],\n          [0, 1, 0],\n          [0, 1, 1],\n        ],\n        [\n          [1, 1, 0],\n          [0, 1, 1],\n          [1, 1, 1],\n        ],\n        [\n          [1, 0, 0],\n          [0, 0, 0],\n          [0, 0, 1],\n        ],\n        [\n          [1, 0, 0],\n          [0, 0, 1],\n          [1, 0, 1],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 0.75],\n          [1, 0.75],\n          [1, 0.5],\n        ],\n        [\n          [0, 0.75],\n          [1, 0.5],\n          [0, 0.5],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.5],\n          [1, 0.25],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.25],\n          [0, 0.25],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.25],\n          [1, 0],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.0],\n          [0, 0],\n        ],\n        [\n          [0, 2],\n          [1, 2],\n          [1, 1.75],\n        ],\n        [\n          [0, 2],\n          [1, 1.75],\n          [0, 1.75],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.75],\n          [1, 1.5],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.5],\n          [0, 1.5],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.5],\n          [1, 1.25],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.25],\n          [0, 1.25],\n        ],\n        [\n          [0, 1.25],\n          [1, 1.25],\n          [1, 1],\n        ],\n        [\n          [0, 1.25],\n          [1, 1],\n          [0, 1],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n      ],\n      walkPoly: [\n        [\n          [0, 1, 1],\n          [1, 1, 0],\n          [1, 0, 0],\n        ],\n        [\n          [0, 1, 1],\n          [1, 0, 0],\n          [0, 0, 1],\n        ],\n      ],\n      type: parseInt(\"0101\", 2),\n    },\n    STAIR_B: {\n      vertices: [\n        [\n          [1, 0.25, 0.25],\n          [0, 0.25, 0.25],\n          [0, 0.5, 0.25],\n        ],\n        [\n          [1, 0.25, 0.25],\n          [0, 0.5, 0.25],\n          [1, 0.5, 0.25],\n        ],\n        [\n          [1, 0.5, 0.5],\n          [0, 0.5, 0.5],\n          [0, 0.75, 0.5],\n        ],\n        [\n          [1, 0.5, 0.5],\n          [0, 0.75, 0.5],\n          [1, 0.75, 0.5],\n        ],\n        [\n          [1, 0.75, 0.75],\n          [0, 0.75, 0.75],\n          [0, 1, 0.75],\n        ],\n        [\n          [1, 0.75, 0.75],\n          [0, 1, 0.75],\n          [1, 1, 0.75],\n        ],\n        [\n          [1, 0.25, 0],\n          [0, 0.25, 0],\n          [0, 0.25, 0.25],\n        ],\n        [\n          [1, 0.25, 0],\n          [0, 0.25, 0.25],\n          [1, 0.25, 0.25],\n        ],\n        [\n          [1, 0.5, 0.25],\n          [0, 0.5, 0.25],\n          [0, 0.5, 0.5],\n        ],\n        [\n          [1, 0.5, 0.25],\n          [0, 0.5, 0.5],\n          [1, 0.5, 0.5],\n        ],\n        [\n          [1, 0.75, 0.5],\n          [0, 0.75, 0.5],\n          [0, 0.75, 0.75],\n        ],\n        [\n          [1, 0.75, 0.5],\n          [0, 0.75, 0.75],\n          [1, 0.75, 0.75],\n        ],\n        [\n          [1, 1, 0.75],\n          [0, 1, 0.75],\n          [0, 1, 1],\n        ],\n        [\n          [1, 1, 0.75],\n          [0, 1, 1],\n          [1, 1, 1],\n        ],\n        [\n          [1, 0, 0],\n          [1, 1, 0],\n          [1, 1, 1],\n        ],\n        [\n          [1, 0, 0],\n          [1, 1, 1],\n          [1, 0, 1],\n        ],\n        [\n          [0, 0, 0],\n          [0, 1, 0],\n          [0, 1, 1],\n        ],\n        [\n          [0, 0, 0],\n          [0, 1, 1],\n          [0, 0, 1],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 0.75],\n          [1, 0.75],\n          [1, 0.5],\n        ],\n        [\n          [0, 0.75],\n          [1, 0.5],\n          [0, 0.5],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.5],\n          [1, 0.25],\n        ],\n        [\n          [0, 0.5],\n          [1, 0.25],\n          [0, 0.25],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.25],\n          [1, 0],\n        ],\n        [\n          [0, 0.25],\n          [1, 0.0],\n          [0, 0],\n        ],\n        [\n          [0, 2],\n          [1, 2],\n          [1, 1.75],\n        ],\n        [\n          [0, 2],\n          [1, 1.75],\n          [0, 1.75],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.75],\n          [1, 1.5],\n        ],\n        [\n          [0, 1.75],\n          [1, 1.5],\n          [0, 1.5],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.5],\n          [1, 1.25],\n        ],\n        [\n          [0, 1.5],\n          [1, 1.25],\n          [0, 1.25],\n        ],\n        [\n          [0, 1.25],\n          [1, 1.25],\n          [1, 1],\n        ],\n        [\n          [0, 1.25],\n          [1, 1],\n          [0, 1],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n        [\n          [0, 3],\n          [1, 3],\n          [1, 2],\n        ],\n        [\n          [0, 3],\n          [1, 2],\n          [0, 2],\n        ],\n      ],\n      walkPoly: [\n        [\n          [0, 1, 1],\n          [1, 1, 1],\n          [1, 0, 0],\n        ],\n        [\n          [0, 1, 1],\n          [1, 0, 0],\n          [0, 0, 0],\n        ],\n      ],\n      type: parseInt(\"1010\", 2),\n    },\n    // Wall\n    WALL_R: {\n      vertices: [\n        [\n          [0, 0, -2],\n          [0, 1, -2],\n          [0, 1, 0],\n        ],\n        [\n          [0, 0, -2],\n          [0, 1, 0],\n          [0, 0, 0],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 2],\n          [1, 2],\n          [1, 0],\n        ],\n        [\n          [0, 2],\n          [1, 0],\n          [0, 0],\n        ],\n      ],\n      type: parseInt(\"1011\", 2),\n    },\n    WALL_T: {\n      vertices: [\n        [\n          [0, 1, -2],\n          [1, 1, -2],\n          [1, 1, 0],\n        ],\n        [\n          [0, 1, -2],\n          [1, 1, 0],\n          [0, 1, 0],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 2],\n          [1, 2],\n          [1, 0],\n        ],\n        [\n          [0, 2],\n          [1, 0],\n          [0, 0],\n        ],\n      ],\n      type: parseInt(\"0111\", 2),\n    },\n    WALL_L: {\n      vertices: [\n        [\n          [1, 1, -2],\n          [1, 0, -2],\n          [1, 0, 0],\n        ],\n        [\n          [1, 1, -2],\n          [1, 0, 0],\n          [1, 1, 0],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 2],\n          [1, 2],\n          [1, 0],\n        ],\n        [\n          [0, 2],\n          [1, 0],\n          [0, 0],\n        ],\n      ],\n      type: parseInt(\"1110\", 2),\n    },\n    WALL_B: {\n      vertices: [\n        [\n          [1, 0, -2],\n          [0, 0, -2],\n          [0, 0, 0],\n        ],\n        [\n          [1, 0, -2],\n          [0, 0, 0],\n          [1, 0, 0],\n        ],\n      ],\n      surfaces: [\n        [\n          [0, 2],\n          [1, 2],\n          [1, 0],\n        ],\n        [\n          [0, 2],\n          [1, 0],\n          [0, 0],\n        ],\n      ],\n      type: parseInt(\"1101\", 2),\n    },\n  },\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*                                                 *** ----------------------------------------------- **\\n**             Calliope - Site Generator   \\t       **\\n** ----------------------------------------------- **\\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\\n**                                                 **\\n**    Any unauthorized distribution or transfer    **\\n**       of this work is strictly prohibited.      **\\n**                                                 **\\n**               All Rights Reserved.              **\\n** ----------------------------------------------- **\\n\\\\*                                                 */\\n.pixos {\\n    font-family: Arial, Helvetica, sans-serif;\\n    font-size: 16px;\\n    width: 100%;\\n    text-shadow: #3f3f3f 2px 2px 0px;\\n    position: relative;\\n    /* padding: 2.5em; */\\n    align-items: center;\\n    align-content: center; }\\n  \\n  .renderSurface {\\n    height: 100%;\\n    left: 0;\\n    position: absolute;\\n    top: 0;\\n    width: 100%; }\\n  \\n  .materialSelector {\\n    background: rgba(0, 0, 0, 0.6);\\n    margin: auto;\\n    position: relative; }\\n    .materialSelector tr {\\n      height: 70px; }\\n    .materialSelector td {\\n      background-position: 0px 0px;\\n      cursor: pointer;\\n      margin: 0;\\n      opacity: 0.3;\\n      padding: 0;\\n      width: 70px; }\\n      .materialSelector td:hover {\\n        opacity: 0.8; }\\n  \\n  .nickname {\\n    color: #ffffff;\\n    cursor: default;\\n    left: 42%;\\n    position: absolute;\\n    top: 40%;\\n    width: 300px; }\\n    .nickname input {\\n      background: none;\\n      border-bottom: 1px solid #888888;\\n      border: none;\\n      color: white;\\n      font-family: Arial, Helvetica, sans-serif;\\n      font-size: 24px;\\n      outline: none;\\n      width: 100%; }\\n  \\n  .joininfo {\\n    color: #ffffff;\\n    cursor: default;\\n    font-size: 24px;\\n    position: absolute;\\n    text-align: center;\\n    top: 42%;\\n    width: 99%; }\\n  \\n  .chatbox {\\n    background: rgba(0, 0, 0, 0.6);\\n    bottom: 55px;\\n    color: white;\\n    cursor: default;\\n    height: 195px;\\n    left: 20px;\\n    overflow: hidden;\\n    padding-left: 10px;\\n    padding-right: 10px;\\n    position: absolute;\\n    width: 600px; }\\n  \\n  .chatbox_text {\\n    bottom: 8px;\\n    position: absolute;\\n    text-shadow: none; }\\n  \\n  .chatbox_entry {\\n    background: rgba(0, 0, 0, 0.6);\\n    border: none;\\n    bottom: 18px;\\n    color: white;\\n    font-family: Arial, Helvetica, sans-serif;\\n    font-size: 16px;\\n    height: 30px;\\n    left: 20px;\\n    outline: none;\\n    padding-bottom: 2px;\\n    padding-left: 10px;\\n    position: absolute;\\n    width: 610px; }\\n  \", \"\",{\"version\":3,\"sources\":[\"webpack://./pixos/less/pixos.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;oDAUoD;AACpD;IACI,yCAAyC;IACzC,eAAe;IACf,WAAW;IACX,gCAAgC;IAChC,kBAAkB;IAClB,oBAAoB;IACpB,mBAAmB;IACnB,qBAAqB,EAAE;;EAEzB;IACE,YAAY;IACZ,OAAO;IACP,kBAAkB;IAClB,MAAM;IACN,WAAW,EAAE;;EAEf;IACE,8BAA8B;IAC9B,YAAY;IACZ,kBAAkB,EAAE;IACpB;MACE,YAAY,EAAE;IAChB;MACE,4BAA4B;MAC5B,eAAe;MACf,SAAS;MACT,YAAY;MACZ,UAAU;MACV,WAAW,EAAE;MACb;QACE,YAAY,EAAE;;EAEpB;IACE,cAAc;IACd,eAAe;IACf,SAAS;IACT,kBAAkB;IAClB,QAAQ;IACR,YAAY,EAAE;IACd;MACE,gBAAgB;MAChB,gCAAgC;MAChC,YAAY;MACZ,YAAY;MACZ,yCAAyC;MACzC,eAAe;MACf,aAAa;MACb,WAAW,EAAE;;EAEjB;IACE,cAAc;IACd,eAAe;IACf,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,QAAQ;IACR,UAAU,EAAE;;EAEd;IACE,8BAA8B;IAC9B,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,aAAa;IACb,UAAU;IACV,gBAAgB;IAChB,kBAAkB;IAClB,mBAAmB;IACnB,kBAAkB;IAClB,YAAY,EAAE;;EAEhB;IACE,WAAW;IACX,kBAAkB;IAClB,iBAAiB,EAAE;;EAErB;IACE,8BAA8B;IAC9B,YAAY;IACZ,YAAY;IACZ,YAAY;IACZ,yCAAyC;IACzC,eAAe;IACf,YAAY;IACZ,UAAU;IACV,aAAa;IACb,mBAAmB;IACnB,kBAAkB;IAClB,kBAAkB;IAClB,YAAY,EAAE\",\"sourcesContent\":[\"/*                                                 *** ----------------------------------------------- **\\n**             Calliope - Site Generator   \\t       **\\n** ----------------------------------------------- **\\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\\n**                                                 **\\n**    Any unauthorized distribution or transfer    **\\n**       of this work is strictly prohibited.      **\\n**                                                 **\\n**               All Rights Reserved.              **\\n** ----------------------------------------------- **\\n\\\\*                                                 */\\n.pixos {\\n    font-family: Arial, Helvetica, sans-serif;\\n    font-size: 16px;\\n    width: 100%;\\n    text-shadow: #3f3f3f 2px 2px 0px;\\n    position: relative;\\n    /* padding: 2.5em; */\\n    align-items: center;\\n    align-content: center; }\\n  \\n  .renderSurface {\\n    height: 100%;\\n    left: 0;\\n    position: absolute;\\n    top: 0;\\n    width: 100%; }\\n  \\n  .materialSelector {\\n    background: rgba(0, 0, 0, 0.6);\\n    margin: auto;\\n    position: relative; }\\n    .materialSelector tr {\\n      height: 70px; }\\n    .materialSelector td {\\n      background-position: 0px 0px;\\n      cursor: pointer;\\n      margin: 0;\\n      opacity: 0.3;\\n      padding: 0;\\n      width: 70px; }\\n      .materialSelector td:hover {\\n        opacity: 0.8; }\\n  \\n  .nickname {\\n    color: #ffffff;\\n    cursor: default;\\n    left: 42%;\\n    position: absolute;\\n    top: 40%;\\n    width: 300px; }\\n    .nickname input {\\n      background: none;\\n      border-bottom: 1px solid #888888;\\n      border: none;\\n      color: white;\\n      font-family: Arial, Helvetica, sans-serif;\\n      font-size: 24px;\\n      outline: none;\\n      width: 100%; }\\n  \\n  .joininfo {\\n    color: #ffffff;\\n    cursor: default;\\n    font-size: 24px;\\n    position: absolute;\\n    text-align: center;\\n    top: 42%;\\n    width: 99%; }\\n  \\n  .chatbox {\\n    background: rgba(0, 0, 0, 0.6);\\n    bottom: 55px;\\n    color: white;\\n    cursor: default;\\n    height: 195px;\\n    left: 20px;\\n    overflow: hidden;\\n    padding-left: 10px;\\n    padding-right: 10px;\\n    position: absolute;\\n    width: 600px; }\\n  \\n  .chatbox_text {\\n    bottom: 8px;\\n    position: absolute;\\n    text-shadow: none; }\\n  \\n  .chatbox_entry {\\n    background: rgba(0, 0, 0, 0.6);\\n    border: none;\\n    bottom: 18px;\\n    color: white;\\n    font-family: Arial, Helvetica, sans-serif;\\n    font-size: 16px;\\n    height: 30px;\\n    left: 20px;\\n    outline: none;\\n    padding-bottom: 2px;\\n    padding-left: 10px;\\n    position: absolute;\\n    width: 610px; }\\n  \"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/**\r\n * Any state shared between modules goes here\r\n * For internal use, not for consumers\r\n */\r\nconst state = {\r\n    currentComponent: null,\r\n    isBatchUpdating: false,\r\n    isInBrowser: typeof window !== 'undefined',\r\n    listeners: new Map(),\r\n    manualListeners: [],\r\n    nextVersionMap: new WeakMap(),\r\n    proxyIsMuted: false,\r\n    redirectToNext: true,\r\n    store: {},\r\n};\n\nexport default state;\n","/**\r\n * To convert the path array to a string for the listener keys\r\n * Use a crazy separator. If the separator was a '.', and the user had a prop with a dot in it,\r\n * then it could cause false matches in the updated logic.\r\n */\r\nconst PROP_PATH_SEP = '~~~';\r\nconst PATH = Symbol('PATH');\r\nconst ORIGINAL = Symbol('ORIGINAL');\r\nconst LS_KEYS = {\r\n    RR_HISTORY_LIMIT: 'RR_HISTORY_LIMIT',\r\n    RR_DEBUG: 'RR_DEBUG',\r\n};\n\nexport { LS_KEYS, ORIGINAL, PATH, PROP_PATH_SEP };\n","import { PATH } from './constants.js';\nimport state$1 from './state.js';\n\n// 'object' meaning 'plain object'.\r\nconst isObject = (item) => !!item && typeof item === 'object' && item.constructor === Object;\r\nconst isArray = (item) => Array.isArray(item);\r\nconst isMap = (item) => item instanceof Map;\r\nconst isSet = (item) => item instanceof Set;\r\n// A target is one of the four types that Recollect will proxy\r\nconst isTarget = (item) => isObject(item) || isArray(item) || isMap(item) || isSet(item);\r\n// This is internal to JS or to Recollect\r\nconst isInternal = (prop) => prop === PATH ||\r\n    prop === 'constructor' ||\r\n    prop === 'toJSON' ||\r\n    // Various type-checking libraries call these\r\n    prop === '@@toStringTag' ||\r\n    prop === Symbol.toStringTag;\r\nconst isFunction = (item) => typeof item === 'function';\r\nconst isArrayMutation = (target, prop) => isArray(target) &&\r\n    [\r\n        \"copyWithin\" /* CopyWithin */,\r\n        \"fill\" /* Fill */,\r\n        \"pop\" /* Pop */,\r\n        \"push\" /* Push */,\r\n        \"reverse\" /* Reverse */,\r\n        \"shift\" /* Shift */,\r\n        \"sort\" /* Sort */,\r\n        \"splice\" /* Splice */,\r\n        \"unshift\" /* Unshift */,\r\n    ].includes(prop);\r\nconst clone = (target) => {\r\n    if (isObject(target))\r\n        return Object.assign({}, target);\r\n    // @ts-ignore\r\n    if (isArray(target))\r\n        return target.slice();\r\n    // @ts-ignore\r\n    if (isMap(target))\r\n        return new Map(target);\r\n    // @ts-ignore\r\n    if (isSet(target))\r\n        return new Set(target);\r\n    return target;\r\n};\r\n/**\r\n * Get the value from an object. This is for end-user objects. E.g. not\r\n * accessing a symbol property on a Map object.\r\n */\r\nconst getValue = (target, prop) => {\r\n    if (isMap(target))\r\n        return target.get(prop);\r\n    if (isSet(target))\r\n        return prop;\r\n    if (isArray(target))\r\n        return target[prop];\r\n    return target[prop];\r\n};\r\nconst setValue = (mutableTarget, prop, value) => {\r\n    if (isObject(mutableTarget)) {\r\n        mutableTarget[prop] = value;\r\n    }\r\n    else if (isArray(mutableTarget)) {\r\n        // @ts-ignore - is fine, prop can be a symbol\r\n        mutableTarget[prop] = value;\r\n    }\r\n    else if (isMap(mutableTarget)) {\r\n        // @ts-ignore\r\n        mutableTarget.set(prop, value);\r\n    }\r\n    else if (isSet(mutableTarget)) {\r\n        // @ts-ignore\r\n        mutableTarget.add(value);\r\n    }\r\n    else {\r\n        throw Error('Unexpected type');\r\n    }\r\n};\r\nconst getSize = (item) => {\r\n    if (isObject(item))\r\n        return Object.keys(item).length;\r\n    // @ts-ignore - TS thinks item is never\r\n    if (isArray(item))\r\n        return item.length;\r\n    // @ts-ignore - TS thinks item is never\r\n    if (isMap(item) || isSet(item))\r\n        return item.size;\r\n    throw Error('Unexpected type');\r\n};\r\n/**\r\n * Shallow replaces the contents of one object with the contents of another.\r\n * The top level object will remain the same, but all changed content will\r\n * be replaced with the new content.\r\n */\r\nconst replaceObject = (mutableTarget, nextObject) => {\r\n    if (nextObject) {\r\n        // From the new data, add to the old data anything that's new\r\n        // (from the top level props only)\r\n        Object.entries(nextObject).forEach(([prop, value]) => {\r\n            if (mutableTarget[prop] !== value) {\r\n                mutableTarget[prop] = value;\r\n            }\r\n        });\r\n        // Clear out any keys that aren't in the new data\r\n        Object.keys(mutableTarget).forEach((prop) => {\r\n            if (!(prop in nextObject)) {\r\n                delete mutableTarget[prop];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        // Just empty the old object\r\n        Object.keys(mutableTarget).forEach((prop) => {\r\n            delete mutableTarget[prop];\r\n        });\r\n    }\r\n};\r\n/**\r\n * Traverse a tree, calling a callback for each node with the item and the path.\r\n * This can either mutate each value, or return a new value to create a clone.\r\n * @example const clone = utils.updateDeep(original, utils.clone);\r\n * Only traverses the targets supported by Recollect.\r\n */\r\nconst updateDeep = (mutableTarget, updater) => {\r\n    const path = [];\r\n    const processLevel = (target) => {\r\n        const updated = updater(target, path.slice());\r\n        // If the updater returns something, use it. Else mutate the original.\r\n        const next = typeof updated !== 'undefined' ? updated : target;\r\n        const handleEntry = (prop, value) => {\r\n            path.push(prop);\r\n            const processed = processLevel(value);\r\n            path.pop();\r\n            setValue(next, prop, processed);\r\n        };\r\n        if (isObject(next)) {\r\n            Object.entries(next).forEach(([prop, value]) => {\r\n                handleEntry(prop, value);\r\n            });\r\n        }\r\n        else if (isArray(next) || isMap(next)) {\r\n            next.forEach((value, prop) => {\r\n                handleEntry(prop, value);\r\n            });\r\n        }\r\n        else if (isSet(next)) {\r\n            // A set is special - you can't reassign what's in a particular\r\n            // 'position' like the other three, so we do some fancy footwork...\r\n            const setContents = Array.from(next);\r\n            next.clear();\r\n            setContents.forEach((value) => {\r\n                handleEntry(value, value);\r\n            });\r\n        }\r\n        return next;\r\n    };\r\n    return processLevel(mutableTarget);\r\n};\r\n/**\r\n * Does some work while the proxy is muted. Returns the result of the\r\n * callback as a convenience.\r\n * This prevents components from being subscribed to reads from the store,\r\n * it does not prevent updates being triggered.\r\n */\r\nconst whileMuted = (cb) => {\r\n    state$1.proxyIsMuted = true;\r\n    const result = cb();\r\n    state$1.proxyIsMuted = false;\r\n    return result;\r\n};\r\n/**\r\n * This is a convenience method that triggers a read on each item in the array.\r\n * When used during the render cycle of a collected component, it has the\r\n * side-effect of subscribing that component to each item in the array.\r\n */\r\nconst useProps = (props) => {\r\n    // useProps must never return, so it can be used in the body of a component\r\n    props.includes(0);\r\n};\n\nexport { clone, getSize, getValue, isArray, isArrayMutation, isFunction, isInternal, isMap, isObject, isSet, isTarget, replaceObject, setValue, updateDeep, useProps, whileMuted };\n","import { PATH, PROP_PATH_SEP } from './constants.js';\n\n// Joins an array that potentially contains symbols, which need an explicit\r\n// 'toString()'\r\nconst join = (arr, joiner) => arr.map((item) => item.toString()).join(joiner);\r\n/**\r\n * Convert a target and a prop into a user-friendly string like store.tasks.1.done\r\n */\r\nconst makeUserString = (propPath) => join(propPath, '.');\r\nconst makeInternalString = (propPath) => join(propPath, PROP_PATH_SEP);\r\n/**\r\n * Takes the path stored in an object, and a new prop, and returns the two\r\n * combined\r\n */\r\nconst extend = (target, prop) => {\r\n    const basePath = target[PATH] || [];\r\n    if (typeof prop === 'undefined')\r\n        return basePath;\r\n    return basePath.concat(prop);\r\n};\r\n/**\r\n * Convert a target and a prop into a user-friendly string like store.tasks.1.done\r\n */\r\nconst extendToUserString = (target, prop) => makeUserString(extend(target, prop));\r\nconst addProp = (target, propPath) => {\r\n    if (!target)\r\n        return;\r\n    Object.defineProperty(target, PATH, {\r\n        value: propPath,\r\n        writable: true,\r\n    });\r\n};\r\nconst get = (target) => target[PATH] || [];\n\nexport { addProp, extend, extendToUserString, get, makeInternalString, makeUserString };\n","const hasLocalStorage = typeof window !== 'undefined' && !!window.localStorage;\r\nconst set = (key, data) => {\r\n    if (!hasLocalStorage)\r\n        return undefined;\r\n    try {\r\n        const string = typeof data === 'string' ? data : JSON.stringify(data);\r\n        return localStorage.setItem(key, string);\r\n    }\r\n    catch (err) {\r\n        return undefined;\r\n    }\r\n};\r\nconst get = (key) => {\r\n    if (!hasLocalStorage)\r\n        return undefined;\r\n    const data = localStorage.getItem(key);\r\n    if (!data)\r\n        return data;\r\n    try {\r\n        return JSON.parse(data);\r\n    }\r\n    catch (err) {\r\n        // So we return whatever we've got on a failure\r\n        // E.g. the data could be a plain string, which errors on JSON.parse.\r\n        return data;\r\n    }\r\n};\n\nexport { get, set };\n","import { LS_KEYS } from './constants.js';\nimport state$1 from './state.js';\nimport { getValue } from './utils.js';\nimport { extendToUserString } from './paths.js';\nimport { get, set } from './ls.js';\n\nconst DEBUG_ON = 'on';\r\nconst DEBUG_OFF = 'off';\r\nlet DEBUG = get(LS_KEYS.RR_DEBUG) || DEBUG_OFF;\r\nif (DEBUG === DEBUG_ON) {\r\n    console.info('Recollect debugging is enabled. Type __RR__.debugOff() to turn it off.');\r\n}\r\nconst debugOn = () => {\r\n    DEBUG = DEBUG_ON;\r\n    set(LS_KEYS.RR_DEBUG, DEBUG_ON);\r\n};\r\nconst debugOff = () => {\r\n    DEBUG = DEBUG_OFF;\r\n    set(LS_KEYS.RR_DEBUG, DEBUG_OFF);\r\n};\r\nconst debug = (cb) => {\r\n    if (DEBUG === DEBUG_ON)\r\n        cb();\r\n};\r\nconst logGet = (target, prop, value) => {\r\n    debug(() => {\r\n        console.groupCollapsed(`GET: ${extendToUserString(target, prop)}`);\r\n        console.info(`Component: <${state$1.currentComponent._name}>`);\r\n        if (typeof value !== 'undefined') {\r\n            console.info('Value:', value);\r\n        }\r\n        console.groupEnd();\r\n    });\r\n};\r\nconst logSet = (target, prop, value) => {\r\n    debug(() => {\r\n        console.groupCollapsed(`SET: ${extendToUserString(target, prop)}`);\r\n        console.info('From:', getValue(target, prop));\r\n        console.info('To:  ', value);\r\n        console.groupEnd();\r\n    });\r\n};\r\nconst logDelete = (target, prop) => {\r\n    debug(() => {\r\n        console.groupCollapsed(`DELETE: ${extendToUserString(target, prop)}`);\r\n        console.info('Property: ', extendToUserString(target, prop));\r\n        console.groupEnd();\r\n    });\r\n};\r\nconst logUpdate = (component, propsUpdated) => {\r\n    debug(() => {\r\n        console.groupCollapsed(`UPDATE:  <${component._name}>`);\r\n        console.info('Changed properties:', propsUpdated);\r\n        console.groupEnd();\r\n    });\r\n};\n\nexport { debug, debugOff, debugOn, logDelete, logGet, logSet, logUpdate };\n","import state$1 from './state.js';\n\nconst subscribers = {};\r\nconst onUpdateInNextStore = (func) => {\r\n    subscribers[\"UpdateNextStore\" /* UpdateNextStore */] = func;\r\n};\r\nconst dispatchUpdateInNextStore = (data) => {\r\n    return subscribers[\"UpdateNextStore\" /* UpdateNextStore */](data);\r\n};\r\n/**\r\n * Add a callback to be called every time the store changes\r\n */\r\nconst afterChange = (cb) => {\r\n    state$1.manualListeners.push(cb);\r\n};\n\nexport { afterChange, dispatchUpdateInNextStore, onUpdateInNextStore };\n","import { ORIGINAL } from './shared/constants.js';\nimport state$1 from './shared/state.js';\nimport { isMap, isSet, isFunction, isInternal, isArrayMutation, isArray, updateDeep, isTarget } from './shared/utils.js';\nimport { extend, get, makeInternalString, addProp } from './shared/paths.js';\nimport { logGet, logDelete, logSet } from './shared/debug.js';\nimport { dispatchUpdateInNextStore } from './shared/pubSub.js';\n\n/**\r\n * Add a new listener to be notified when a particular value in the store changes\r\n * To be used when a component reads from a property.\r\n */\r\nconst addListener = (propPath) => {\r\n    if (!state$1.currentComponent)\r\n        return;\r\n    // We use a string instead of an array because it's much easier to match\r\n    const pathString = makeInternalString(propPath);\r\n    const components = state$1.listeners.get(pathString) || new Set();\r\n    components.add(state$1.currentComponent);\r\n    state$1.listeners.set(pathString, components);\r\n};\r\n/**\r\n * These are the proxy handlers. Notes:\r\n * * We have different handlers (different traps) for object/array and\r\n *    map/set.\r\n * * When the proxy is muted, use Reflect[trap] and bypass any logic. The\r\n *    exception is Map/Set methods, where we must bind `this` first\r\n * * `ORIGINAL` lets us unwrap a proxied object\r\n * * We redirect to the 'next version' of a target if it has been changed\r\n */\r\nconst getHandlerForObject = (targetObject) => {\r\n    if (isMap(targetObject) || isSet(targetObject)) {\r\n        // Map() and Set() get a special handler, because reads and writes all\r\n        // happen in the get() trap (different to the get() method of the map/set!)\r\n        return {\r\n            get(target, prop) {\r\n                if (prop === ORIGINAL)\r\n                    return target;\r\n                let result = Reflect.get(target, prop);\r\n                // The innards of Map and Set require this binding\r\n                if (isFunction(result))\r\n                    result = result.bind(target);\r\n                // Bail early for some things. Unlike objects/arrays, we will\r\n                // continue on even if !state.currentComponent\r\n                if (state$1.proxyIsMuted || isInternal(prop)) {\r\n                    return result;\r\n                }\r\n                if (!state$1.currentComponent && state$1.redirectToNext) {\r\n                    const nextVersion = state$1.nextVersionMap.get(target);\r\n                    if (nextVersion)\r\n                        return Reflect.get(nextVersion, prop);\r\n                }\r\n                // Adding to a Map\r\n                if (prop === \"set\" /* Set */) {\r\n                    const handler = {\r\n                        apply(func, applyTarget, [key, value]) {\r\n                            if (applyTarget.get(key) === value)\r\n                                return true; // No change, no need to carry on\r\n                            return dispatchUpdateInNextStore({\r\n                                target: applyTarget,\r\n                                prop: key,\r\n                                value,\r\n                                updater: (finalTarget, newProxiedValue) => {\r\n                                    logSet(target, prop, newProxiedValue);\r\n                                    // We call the map.set() now, but on the item in the\r\n                                    // store, and with the new args\r\n                                    return Reflect.apply(finalTarget[prop], finalTarget, [\r\n                                        key,\r\n                                        newProxiedValue,\r\n                                    ]);\r\n                                },\r\n                            });\r\n                        },\r\n                    };\r\n                    return new Proxy(result, handler);\r\n                }\r\n                // Adding to a Set\r\n                if (prop === \"add\" /* Add */) {\r\n                    const handler = {\r\n                        apply(func, applyTarget, [value]) {\r\n                            if (applyTarget.has(value))\r\n                                return true; // Would be a no op\r\n                            return dispatchUpdateInNextStore({\r\n                                target: applyTarget,\r\n                                notifyTarget: true,\r\n                                value,\r\n                                updater: (finalTarget, newProxiedValue) => {\r\n                                    logSet(target, prop, newProxiedValue);\r\n                                    return Reflect.apply(finalTarget[prop], finalTarget, [\r\n                                        newProxiedValue,\r\n                                    ]);\r\n                                },\r\n                            });\r\n                        },\r\n                    };\r\n                    return new Proxy(result, handler);\r\n                }\r\n                // On either a Set or Map\r\n                if (prop === \"clear\" /* Clear */ || prop === \"delete\" /* Delete */) {\r\n                    const handler = {\r\n                        apply(func, applyTarget, [key]) {\r\n                            if (!applyTarget.size ||\r\n                                (prop === \"delete\" /* Delete */ && !applyTarget.has(key))) {\r\n                                return false; // false indicates no change\r\n                            }\r\n                            return dispatchUpdateInNextStore({\r\n                                target: applyTarget,\r\n                                notifyTarget: true,\r\n                                updater: (finalTarget) => {\r\n                                    logSet(target, prop);\r\n                                    return Reflect.apply(finalTarget[prop], finalTarget, [key]);\r\n                                },\r\n                            });\r\n                        },\r\n                    };\r\n                    return new Proxy(result, handler);\r\n                }\r\n                // Now that we've handled any modifying methods, we can\r\n                // just return the result if we're not in the render cycle.\r\n                if (!state$1.currentComponent)\r\n                    return result;\r\n                // If we're reading a particular value, we'll want a listener for that\r\n                // We don't listen on `.has` because any change that would result in\r\n                // `.has` returning a different value would update the target\r\n                if (isMap(target) && prop === \"get\" /* Get */) {\r\n                    const handler = {\r\n                        apply(func, applyTarget, args) {\r\n                            addListener(extend(target, args[0]));\r\n                            return Reflect.apply(func, applyTarget, args);\r\n                        },\r\n                    };\r\n                    return new Proxy(result, handler);\r\n                }\r\n                // For all other read operations, just return\r\n                return result;\r\n            },\r\n        };\r\n    }\r\n    return {\r\n        get(target, prop) {\r\n            // This allows getting the un-proxied version of a proxied object\r\n            if (prop === ORIGINAL)\r\n                return target;\r\n            const result = Reflect.get(target, prop);\r\n            if (state$1.proxyIsMuted || isInternal(prop))\r\n                return result;\r\n            // Mutating array methods make a lot of noise, so we wrap them in a proxy\r\n            // Only one update will be fired - for the actual array.\r\n            if (isArrayMutation(target, prop)) {\r\n                const handler = {\r\n                    apply(func, applyTarget, args) {\r\n                        return dispatchUpdateInNextStore({\r\n                            target: applyTarget,\r\n                            notifyTarget: true,\r\n                            value: args,\r\n                            updater: (finalTarget, proxiedArgs) => {\r\n                                logSet(target, prop, proxiedArgs);\r\n                                const updateResult = Reflect.apply(\r\n                                // @ts-ignore - Yes, symbol CAN be used as an index type\r\n                                finalTarget[prop], finalTarget, proxiedArgs);\r\n                                const rootPath = get(target);\r\n                                // At this point, the array is updated. But the paths of the\r\n                                // items could be wrong, so we refresh them.\r\n                                updateDeep(finalTarget, (item, path) => {\r\n                                    if (isTarget(item)) {\r\n                                        addProp(item, [...rootPath, ...path]);\r\n                                    }\r\n                                });\r\n                                return updateResult;\r\n                            },\r\n                        });\r\n                    },\r\n                };\r\n                return new Proxy(result, handler);\r\n            }\r\n            // For all other methods (.join, .toString(), etc) return the function\r\n            // @ts-ignore - wrong, symbol can be used an an index type\r\n            if (isFunction(target[prop]))\r\n                return result;\r\n            if (state$1.currentComponent) {\r\n                // We record a get if a component is rendering, with the exception\r\n                // of reading array length. This would be redundant, since changes to\r\n                // length trigger a change on the array itself\r\n                if (!(isArray(target) && prop === \"length\" /* Length */)) {\r\n                    logGet(target, prop, result);\r\n                    addListener(extend(target, prop));\r\n                }\r\n            }\r\n            else if (state$1.redirectToNext) {\r\n                // When we're outside the render cycle, we route\r\n                // requests to the 'next version'\r\n                // Note, this will result in another get(), but on the equivalent\r\n                // target from the next store. muteProxy will be set so this line\r\n                // isn't triggered in an infinite loop\r\n                const nextVersion = state$1.nextVersionMap.get(target);\r\n                if (nextVersion)\r\n                    return Reflect.get(nextVersion, prop);\r\n            }\r\n            return result;\r\n        },\r\n        has(target, prop) {\r\n            const result = Reflect.has(target, prop);\r\n            if (state$1.proxyIsMuted || isInternal(prop))\r\n                return result;\r\n            if (state$1.currentComponent) {\r\n                // Arrays use `has` too, but we capture a listener elsewhere for that.\r\n                // Here we only want to capture access to objects\r\n                if (!isArray(target)) {\r\n                    logGet(target, prop);\r\n                    addListener(extend(target, prop));\r\n                }\r\n            }\r\n            else {\r\n                const nextVersion = state$1.nextVersionMap.get(target);\r\n                if (nextVersion)\r\n                    return Reflect.has(nextVersion, prop);\r\n            }\r\n            return result;\r\n        },\r\n        ownKeys(target) {\r\n            const result = Reflect.ownKeys(target);\r\n            if (state$1.proxyIsMuted)\r\n                return result;\r\n            if (state$1.currentComponent) {\r\n                logGet(target);\r\n                addListener(get(target));\r\n            }\r\n            else {\r\n                const nextVersion = state$1.nextVersionMap.get(target);\r\n                if (nextVersion)\r\n                    return Reflect.ownKeys(nextVersion);\r\n            }\r\n            return result;\r\n        },\r\n        set(target, prop, value) {\r\n            if (state$1.proxyIsMuted)\r\n                return Reflect.set(target, prop, value);\r\n            // If there's no change, we return\r\n            // @ts-ignore - target[prop] is fine\r\n            if (target[prop] === value)\r\n                return true;\r\n            return dispatchUpdateInNextStore({\r\n                target,\r\n                prop,\r\n                value,\r\n                updater: (finalTarget, newValueProxy) => {\r\n                    logSet(target, prop, newValueProxy);\r\n                    return Reflect.set(finalTarget, prop, newValueProxy);\r\n                },\r\n            });\r\n        },\r\n        deleteProperty(target, prop) {\r\n            if (state$1.proxyIsMuted)\r\n                return Reflect.deleteProperty(target, prop);\r\n            return dispatchUpdateInNextStore({\r\n                target,\r\n                prop,\r\n                notifyTarget: true,\r\n                updater: (finalTarget) => {\r\n                    logDelete(target, prop);\r\n                    return Reflect.deleteProperty(finalTarget, prop);\r\n                },\r\n            });\r\n        },\r\n    };\r\n};\r\n/**\r\n * Wrap an item in a proxy\r\n */\r\nconst createShallow = (target) => {\r\n    return new Proxy(target, getHandlerForObject(target));\r\n};\n\nexport { createShallow, getHandlerForObject };\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"react-dom\");","import ReactDOM$1 from 'react-dom';\n\n/* eslint-disable import/no-unresolved */\r\n// unstable_batchedUpdates could be removed in a future major version\r\n// So we'll provide a fallback\r\n// https://github.com/facebook/react/issues/18602\r\nvar batchedUpdates = ReactDOM$1.unstable_batchedUpdates ||\r\n    ((cb) => {\r\n        cb();\r\n    });\n\nexport default batchedUpdates;\n","import state$1 from './shared/state.js';\nimport { makeInternalString, makeUserString } from './shared/paths.js';\nimport { logUpdate } from './shared/debug.js';\nimport batchedUpdates$1 from './shared/batchedUpdates.js';\n\nconst queue = {\r\n    components: new Map(),\r\n    changedPaths: new Set(),\r\n};\r\nconst flushUpdates = () => {\r\n    // We batch updates here so that React will collect all setState() calls\r\n    // (one for each component being updated) before triggering a render.\r\n    // In other words: MANY .update() calls, ONE render.\r\n    // This is subtly different to what the Recollect batch() function does -\r\n    // it ensures that the listeners are only notified once for\r\n    // multiple store changes\r\n    // In other words: MANY store updates, ONE call to flushUpdates()\r\n    batchedUpdates$1(() => {\r\n        queue.components.forEach((propsUpdated, component) => {\r\n            logUpdate(component, Array.from(propsUpdated));\r\n            component.update();\r\n        });\r\n    });\r\n    state$1.manualListeners.forEach((cb) => cb({\r\n        changedProps: Array.from(queue.changedPaths),\r\n        renderedComponents: Array.from(queue.components.keys()),\r\n        store: state$1.store,\r\n    }));\r\n    queue.components.clear();\r\n    queue.changedPaths.clear();\r\n};\r\n/**\r\n * Updates any component listening to:\r\n * - the exact propPath that has been changed. E.g. `tasks.2`\r\n * - a path further up the object tree. E.g. a component listening\r\n *   on `tasks.0` need to know if `tasks = 'foo'` happens\r\n * And if the path being notified is the top level (an empty path), everyone\r\n * gets updated.\r\n */\r\nconst notifyByPath = (propPath) => {\r\n    const pathString = makeInternalString(propPath);\r\n    const userFriendlyPropPath = makeUserString(propPath);\r\n    queue.changedPaths.add(userFriendlyPropPath);\r\n    state$1.listeners.forEach((components, listenerPath) => {\r\n        if (pathString === '' || // Notify everyone for top-level changes\r\n            pathString === listenerPath) {\r\n            components.forEach((component) => {\r\n                const propsUpdated = queue.components.get(component) || new Set();\r\n                propsUpdated.add(userFriendlyPropPath);\r\n                queue.components.set(component, propsUpdated);\r\n            });\r\n        }\r\n    });\r\n    // If we're not batch updating, flush the changes now, otherwise this\r\n    // will be called when the batch is complete\r\n    if (!state$1.isBatchUpdating)\r\n        flushUpdates();\r\n};\r\nconst removeListenersForComponent = (componentToRemove) => {\r\n    state$1.listeners.forEach((components, listenerPath) => {\r\n        const filteredComponents = Array.from(components).filter((existingComponent) => existingComponent !== componentToRemove);\r\n        if (filteredComponents.length) {\r\n            state$1.listeners.set(listenerPath, new Set(filteredComponents));\r\n        }\r\n        else {\r\n            // If there are no components left listening, remove the path\r\n            // For example, leaving a page will unmount a bunch of components\r\n            state$1.listeners.delete(listenerPath);\r\n        }\r\n    });\r\n};\n\nexport { flushUpdates, notifyByPath, removeListenersForComponent };\n","import { ORIGINAL } from './shared/constants.js';\nimport state$1 from './shared/state.js';\nimport { replaceObject, whileMuted, getSize, isTarget, updateDeep, clone, getValue, setValue } from './shared/utils.js';\nimport { get, extend, addProp } from './shared/paths.js';\nimport { onUpdateInNextStore } from './shared/pubSub.js';\nimport { createShallow } from './proxyManager.js';\nimport { flushUpdates, notifyByPath } from './updateManager.js';\n\n/**\r\n * This is the store, as exported to the user. When the store is passed to a\r\n * component, it is shallow cloned. This leaves us free to mutate the root\r\n * level directly.\r\n */\r\nstate$1.store = createShallow({});\r\n/**\r\n * Deep update the store, the following rules are followed:\r\n * - If updating the root level, the store object itself is mutated.\r\n * - For any other (deep) update we clone each node along the path to\r\n *   the target to update (the target is cloned too).\r\n */\r\nconst updateStore = ({ target, prop, value, notifyTarget = false, updater, }) => whileMuted(() => {\r\n    let result;\r\n    // This function doesn't know anything about the prop being set.\r\n    // It just finds the target (the parent of the prop) and\r\n    // calls updater() with it.\r\n    const targetPath = get(target);\r\n    // Note that if this update is a method (e.g. arr.push()) then prop can be\r\n    // undefined, meaning the prop path won't be extended, and will just be\r\n    // the path of the target (the array) which is correct.\r\n    const propPath = extend(target, prop);\r\n    // If we change the length/size of an array/map/set, we will want to\r\n    // trigger a render of the parent path.\r\n    let targetChangedSize = false;\r\n    const initialSize = getSize(target);\r\n    let newValue = value;\r\n    // Make sure the new value is deeply wrapped in proxies, if it's a target\r\n    if (isTarget(newValue)) {\r\n        newValue = updateDeep(value, (item, thisPropPath) => {\r\n            if (!isTarget(item))\r\n                return item;\r\n            const next = clone(item);\r\n            addProp(next, [...propPath, ...thisPropPath]);\r\n            return createShallow(next);\r\n        });\r\n    }\r\n    if (!targetPath.length) {\r\n        // If the target is the store root, it's mutated in place.\r\n        result = updater(state$1.store, newValue);\r\n        targetChangedSize = getSize(state$1.store) !== initialSize;\r\n    }\r\n    else {\r\n        targetPath.reduce((item, thisProp, i) => {\r\n            const thisValue = getValue(item, thisProp);\r\n            // Shallow clone this level\r\n            let clone$1 = clone(thisValue);\r\n            addProp(clone$1, get(thisValue));\r\n            // Wrap the clone in a proxy\r\n            clone$1 = createShallow(clone$1);\r\n            // Mutate this level (swap out the original for the clone)\r\n            setValue(item, thisProp, clone$1);\r\n            // If we're at the end of the path, then 'clone' is our target\r\n            if (i === targetPath.length - 1) {\r\n                result = updater(clone$1, newValue);\r\n                targetChangedSize = getSize(clone$1) !== initialSize;\r\n                // We keep a reference between the original target and the clone\r\n                // `target` may or may not be wrapped in a proxy (Maps and Sets are)\r\n                // So we check/get the unproxied version\r\n                state$1.nextVersionMap.set(target[ORIGINAL] || target, clone$1);\r\n            }\r\n            return clone$1;\r\n        }, state$1.store);\r\n    }\r\n    // If the 'size' of a target changes, it's reasonable to assume that\r\n    // users of the target are going to need to re-render, else use the prop\r\n    const notifyPath = notifyTarget || targetChangedSize ? targetPath : propPath;\r\n    notifyByPath(notifyPath);\r\n    return result;\r\n});\r\nonUpdateInNextStore(updateStore);\r\n/**\r\n * Executes the provided function, then updates appropriate components and calls\r\n * listeners registered with `afterChange()`. Guaranteed to only trigger one\r\n * update. The provided function must only contain synchronous code.\r\n */\r\nconst batch = (cb) => {\r\n    state$1.isBatchUpdating = true;\r\n    cb();\r\n    state$1.isBatchUpdating = false;\r\n    flushUpdates();\r\n};\r\n/**\r\n * Empty the Recollect store and replace it with new data.\r\n */\r\nconst initStore = (data) => {\r\n    batch(() => {\r\n        replaceObject(state$1.store, data);\r\n    });\r\n};\n\nexport { batch, initStore, updateStore };\n","import state$1 from './shared/state.js';\nimport { whileMuted } from './shared/utils.js';\nimport { debug as debug$1 } from './shared/debug.js';\nimport { createShallow } from './proxyManager.js';\nimport { removeListenersForComponent } from './updateManager.js';\nimport React$1 from 'react';\nimport hoistNonReactStatics$1 from 'hoist-non-react-statics';\n\n// As we render down into a tree of collected components, we will start/stop\r\n// recording\r\nconst componentStack = [];\r\nconst startRecordingGetsForComponent = (component) => {\r\n    if (!state$1.isInBrowser)\r\n        return;\r\n    debug$1(() => {\r\n        console.groupCollapsed(`RENDER: <${component._name}>`);\r\n    });\r\n    state$1.currentComponent = component;\r\n    componentStack.push(state$1.currentComponent);\r\n};\r\nconst stopRecordingGetsForComponent = () => {\r\n    if (!state$1.isInBrowser)\r\n        return;\r\n    debug$1(() => {\r\n        console.groupEnd();\r\n    });\r\n    componentStack.pop();\r\n    state$1.currentComponent = componentStack[componentStack.length - 1] || null;\r\n};\r\n/**\r\n * This shallow clones the store to pass as state to the collected\r\n * component.\r\n */\r\nconst getStoreClone = () => whileMuted(() => {\r\n    // We'll shallow clone the store so React knows it's new\r\n    const shallowClone = Object.assign({}, state$1.store);\r\n    // ... but redirect all reads to the real store\r\n    state$1.nextVersionMap.set(shallowClone, state$1.store);\r\n    return createShallow(shallowClone);\r\n});\r\nconst collect = (ComponentToWrap) => {\r\n    const componentName = ComponentToWrap.displayName || ComponentToWrap.name || 'NamelessComponent';\r\n    class WrappedComponent extends React$1.PureComponent {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.state = {\r\n                // This might be called by React when a parent component has updated with a new store,\r\n                // we want this component (if it's a child) to have that next store as well.\r\n                store: getStoreClone(),\r\n            };\r\n            // TODO (davidg) 2020-02-28: use private #isMounted, waiting on\r\n            //  https://github.com/prettier/prettier/issues/7263\r\n            this._isMounted = false;\r\n            this._isMounting = true;\r\n            // <React.StrictMode> will trigger multiple renders,\r\n            // we must disregard these\r\n            this._isRendering = false;\r\n            this._name = componentName;\r\n        }\r\n        componentDidMount() {\r\n            this._isMounted = true;\r\n            this._isMounting = false;\r\n            // Stop recording. For first render()\r\n            stopRecordingGetsForComponent();\r\n            this._isRendering = false;\r\n        }\r\n        componentDidUpdate() {\r\n            // Stop recording. For not-first render()\r\n            stopRecordingGetsForComponent();\r\n            this._isRendering = false;\r\n        }\r\n        componentWillUnmount() {\r\n            removeListenersForComponent(this);\r\n            this._isMounted = false;\r\n        }\r\n        update() {\r\n            // 1. If the component has already unmounted, don't try and set the state\r\n            // 2. The component might not have mounted YET, but is in the middle of its first\r\n            //    render cycle.\r\n            //    For example, if a user sets store.loading to true in App.componentDidMount\r\n            if (this._isMounted || this._isMounting) {\r\n                this.setState({ store: getStoreClone() });\r\n            }\r\n        }\r\n        render() {\r\n            if (!this._isRendering) {\r\n                startRecordingGetsForComponent(this);\r\n                this._isRendering = true;\r\n            }\r\n            const props = Object.assign(Object.assign({}, this.props), { store: this.state.store });\r\n            return React$1.createElement(ComponentToWrap, Object.assign({}, props));\r\n        }\r\n    }\r\n    WrappedComponent.displayName = `Collected(${componentName})`;\r\n    // @ts-ignore - I can't work this out\r\n    return hoistNonReactStatics$1(WrappedComponent, ComponentToWrap);\r\n};\n\nexport default collect;\n","import * as OriginalPropTypes$1 from 'prop-types';\n\nlet EnvPropTypes;\r\n// In the dev build of Recollect, we wrap PropTypes in a proxy so we can\r\n// mute the store while the prop types library reads the props.\r\n{\r\n    // For prod builds, just use the normal PropTypes which is a no-op\r\n    EnvPropTypes = OriginalPropTypes$1;\r\n}\r\n// We do this so we're exporting a const (EnvPropTypes is a let)\r\nconst PropTypes = EnvPropTypes;\n\nexport default PropTypes;\n","import state$1 from './shared/state.js';\nexport { useProps } from './shared/utils.js';\nimport { debugOn, debugOff } from './shared/debug.js';\nexport { afterChange } from './shared/pubSub.js';\nexport { batch, initStore } from './store.js';\nexport { default as collect } from './collect.js';\nexport { default as PropTypes } from './shared/propTypes.js';\n\nconst { store } = state$1;\r\n// `internals` is not part of the Recollect API. It is used by tests.\r\nconst internals = state$1;\r\nif (typeof window !== 'undefined') {\r\n    if ('Proxy' in window) {\r\n        window.__RR__ = {\r\n            debugOn,\r\n            debugOff,\r\n            internals: state$1,\r\n        };\r\n    }\r\n    else {\r\n        console.warn(\"This browser doesn't support the Proxy object, which react-recollect needs. See https://caniuse.com/#search=proxy to find out which browsers do support it\");\r\n    }\r\n}\n\nexport { internals, store };\n","if (process.env.NODE_ENV === 'production') {\n  // eslint-disable-next-line global-require\n  module.exports = require('./dist/esm/production/index.js');\n} else {\n  // eslint-disable-next-line global-require\n  module.exports = require('./dist/esm/development/index.js');\n}\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","var map = {\n\t\"./animate.jsx\": 5061,\n\t\"./changezone.jsx\": 1183,\n\t\"./chat.jsx\": 5317,\n\t\"./dance.jsx\": 8304,\n\t\"./dialogue.jsx\": 2282,\n\t\"./face.jsx\": 2813,\n\t\"./greeting.jsx\": 1162,\n\t\"./interact.jsx\": 5544,\n\t\"./move.jsx\": 2897,\n\t\"./patrol.jsx\": 2704,\n\t\"./script.jsx\": 5744\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 3333;","\"use strict\";\nexports.__esModule = true;\nexports.version = exports.deleteMeshBuffers = exports.initMeshBuffers = exports.downloadMeshes = exports.downloadModels = exports.TYPES = exports.Mesh = exports.MaterialLibrary = exports.Material = exports.Layout = exports.DuplicateAttributeException = exports.Attribute = exports.OBJ = void 0;\nvar mesh_1 = require(\"./mesh\");\nexports.Mesh = mesh_1[\"default\"];\nvar material_1 = require(\"./material\");\nexports.Material = material_1.Material;\nexports.MaterialLibrary = material_1.MaterialLibrary;\nvar layout_1 = require(\"./layout\");\nexports.Layout = layout_1.Layout;\nexports.TYPES = layout_1.TYPES;\nexports.DuplicateAttributeException = layout_1.DuplicateAttributeException;\nexports.Attribute = layout_1.Attribute;\nvar utils_1 = require(\"./utils\");\nexports.downloadModels = utils_1.downloadModels;\nexports.downloadMeshes = utils_1.downloadMeshes;\nexports.initMeshBuffers = utils_1.initMeshBuffers;\nexports.deleteMeshBuffers = utils_1.deleteMeshBuffers;\nvar version = \"2.0.3\";\nexports.version = version;\nexports.OBJ = {\n    Attribute: layout_1.Attribute,\n    DuplicateAttributeException: layout_1.DuplicateAttributeException,\n    Layout: layout_1.Layout,\n    Material: material_1.Material,\n    MaterialLibrary: material_1.MaterialLibrary,\n    Mesh: mesh_1[\"default\"],\n    TYPES: layout_1.TYPES,\n    downloadModels: utils_1.downloadModels,\n    downloadMeshes: utils_1.downloadMeshes,\n    initMeshBuffers: utils_1.initMeshBuffers,\n    deleteMeshBuffers: utils_1.deleteMeshBuffers,\n    version: version\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.Layout = exports.Attribute = exports.DuplicateAttributeException = exports.TYPES = void 0;\nvar TYPES;\n(function (TYPES) {\n    TYPES[\"BYTE\"] = \"BYTE\";\n    TYPES[\"UNSIGNED_BYTE\"] = \"UNSIGNED_BYTE\";\n    TYPES[\"SHORT\"] = \"SHORT\";\n    TYPES[\"UNSIGNED_SHORT\"] = \"UNSIGNED_SHORT\";\n    TYPES[\"FLOAT\"] = \"FLOAT\";\n})(TYPES = exports.TYPES || (exports.TYPES = {}));\n/**\n * An exception for when two or more of the same attributes are found in the\n * same layout.\n * @private\n */\nvar DuplicateAttributeException = /** @class */ (function (_super) {\n    __extends(DuplicateAttributeException, _super);\n    /**\n     * Create a DuplicateAttributeException\n     * @param {Attribute} attribute - The attribute that was found more than\n     *        once in the {@link Layout}\n     */\n    function DuplicateAttributeException(attribute) {\n        return _super.call(this, \"found duplicate attribute: \" + attribute.key) || this;\n    }\n    return DuplicateAttributeException;\n}(Error));\nexports.DuplicateAttributeException = DuplicateAttributeException;\n/**\n * Represents how a vertex attribute should be packed into an buffer.\n * @private\n */\nvar Attribute = /** @class */ (function () {\n    /**\n     * Create an attribute. Do not call this directly, use the predefined\n     * constants.\n     * @param {string} key - The name of this attribute as if it were a key in\n     *        an Object. Use the camel case version of the upper snake case\n     *        const name.\n     * @param {number} size - The number of components per vertex attribute.\n     *        Must be 1, 2, 3, or 4.\n     * @param {string} type - The data type of each component for this\n     *        attribute. Possible values:<br/>\n     *        \"BYTE\": signed 8-bit integer, with values in [-128, 127]<br/>\n     *        \"SHORT\": signed 16-bit integer, with values in\n     *            [-32768, 32767]<br/>\n     *        \"UNSIGNED_BYTE\": unsigned 8-bit integer, with values in\n     *            [0, 255]<br/>\n     *        \"UNSIGNED_SHORT\": unsigned 16-bit integer, with values in\n     *            [0, 65535]<br/>\n     *        \"FLOAT\": 32-bit floating point number\n     * @param {boolean} normalized - Whether integer data values should be\n     *        normalized when being casted to a float.<br/>\n     *        If true, signed integers are normalized to [-1, 1].<br/>\n     *        If true, unsigned integers are normalized to [0, 1].<br/>\n     *        For type \"FLOAT\", this parameter has no effect.\n     */\n    function Attribute(key, size, type, normalized) {\n        if (normalized === void 0) { normalized = false; }\n        this.key = key;\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n        switch (type) {\n            case \"BYTE\":\n            case \"UNSIGNED_BYTE\":\n                this.sizeOfType = 1;\n                break;\n            case \"SHORT\":\n            case \"UNSIGNED_SHORT\":\n                this.sizeOfType = 2;\n                break;\n            case \"FLOAT\":\n                this.sizeOfType = 4;\n                break;\n            default:\n                throw new Error(\"Unknown gl type: \" + type);\n        }\n        this.sizeInBytes = this.sizeOfType * size;\n    }\n    return Attribute;\n}());\nexports.Attribute = Attribute;\n/**\n * A class to represent the memory layout for a vertex attribute array. Used by\n * {@link Mesh}'s TBD(...) method to generate a packed array from mesh data.\n * <p>\n * Layout can sort of be thought of as a C-style struct declaration.\n * {@link Mesh}'s TBD(...) method will use the {@link Layout} instance to\n * pack an array in the given attribute order.\n * <p>\n * Layout also is very helpful when calling a WebGL context's\n * <code>vertexAttribPointer</code> method. If you've created a buffer using\n * a Layout instance, then the same Layout instance can be used to determine\n * the size, type, normalized, stride, and offset parameters for\n * <code>vertexAttribPointer</code>.\n * <p>\n * For example:\n * <pre><code>\n *\n * const index = glctx.getAttribLocation(shaderProgram, \"pos\");\n * glctx.vertexAttribPointer(\n *   layout.position.size,\n *   glctx[layout.position.type],\n *   layout.position.normalized,\n *   layout.position.stride,\n *   layout.position.offset);\n * </code></pre>\n * @see {@link Mesh}\n */\nvar Layout = /** @class */ (function () {\n    /**\n     * Create a Layout object. This constructor will throw if any duplicate\n     * attributes are given.\n     * @param {Array} ...attributes - An ordered list of attributes that\n     *        describe the desired memory layout for each vertex attribute.\n     *        <p>\n     *\n     * @see {@link Mesh}\n     */\n    function Layout() {\n        var e_1, _a, e_2, _b;\n        var attributes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            attributes[_i] = arguments[_i];\n        }\n        this.attributes = attributes;\n        this.attributeMap = {};\n        var offset = 0;\n        var maxStrideMultiple = 0;\n        try {\n            for (var attributes_1 = __values(attributes), attributes_1_1 = attributes_1.next(); !attributes_1_1.done; attributes_1_1 = attributes_1.next()) {\n                var attribute = attributes_1_1.value;\n                if (this.attributeMap[attribute.key]) {\n                    throw new DuplicateAttributeException(attribute);\n                }\n                // Add padding to satisfy WebGL's requirement that all\n                // vertexAttribPointer calls have an offset that is a multiple of\n                // the type size.\n                if (offset % attribute.sizeOfType !== 0) {\n                    offset += attribute.sizeOfType - (offset % attribute.sizeOfType);\n                    console.warn(\"Layout requires padding before \" + attribute.key + \" attribute\");\n                }\n                this.attributeMap[attribute.key] = {\n                    attribute: attribute,\n                    size: attribute.size,\n                    type: attribute.type,\n                    normalized: attribute.normalized,\n                    offset: offset\n                };\n                offset += attribute.sizeInBytes;\n                maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (attributes_1_1 && !attributes_1_1.done && (_a = attributes_1[\"return\"])) _a.call(attributes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Add padding to the end to satisfy WebGL's requirement that all\n        // vertexAttribPointer calls have a stride that is a multiple of the\n        // type size. Because we're putting differently sized attributes into\n        // the same buffer, it must be padded to a multiple of the largest\n        // type size.\n        if (offset % maxStrideMultiple !== 0) {\n            offset += maxStrideMultiple - (offset % maxStrideMultiple);\n            console.warn(\"Layout requires padding at the back\");\n        }\n        this.stride = offset;\n        try {\n            for (var attributes_2 = __values(attributes), attributes_2_1 = attributes_2.next(); !attributes_2_1.done; attributes_2_1 = attributes_2.next()) {\n                var attribute = attributes_2_1.value;\n                this.attributeMap[attribute.key].stride = this.stride;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (attributes_2_1 && !attributes_2_1.done && (_b = attributes_2[\"return\"])) _b.call(attributes_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    // Geometry attributes\n    /**\n     * Attribute layout to pack a vertex's x, y, & z as floats\n     *\n     * @see {@link Layout}\n     */\n    Layout.POSITION = new Attribute(\"position\", 3, TYPES.FLOAT);\n    /**\n     * Attribute layout to pack a vertex's normal's x, y, & z as floats\n     *\n     * @see {@link Layout}\n     */\n    Layout.NORMAL = new Attribute(\"normal\", 3, TYPES.FLOAT);\n    /**\n     * Attribute layout to pack a vertex's normal's x, y, & z as floats.\n     * <p>\n     * This value will be computed on-the-fly based on the texture coordinates.\n     * If no texture coordinates are available, the generated value will default to\n     * 0, 0, 0.\n     *\n     * @see {@link Layout}\n     */\n    Layout.TANGENT = new Attribute(\"tangent\", 3, TYPES.FLOAT);\n    /**\n     * Attribute layout to pack a vertex's normal's bitangent x, y, & z as floats.\n     * <p>\n     * This value will be computed on-the-fly based on the texture coordinates.\n     * If no texture coordinates are available, the generated value will default to\n     * 0, 0, 0.\n     * @see {@link Layout}\n     */\n    Layout.BITANGENT = new Attribute(\"bitangent\", 3, TYPES.FLOAT);\n    /**\n     * Attribute layout to pack a vertex's texture coordinates' u & v as floats\n     *\n     * @see {@link Layout}\n     */\n    Layout.UV = new Attribute(\"uv\", 2, TYPES.FLOAT);\n    // Material attributes\n    /**\n     * Attribute layout to pack an unsigned short to be interpreted as a the index\n     * into a {@link Mesh}'s materials list.\n     * <p>\n     * The intention of this value is to send all of the {@link Mesh}'s materials\n     * into multiple shader uniforms and then reference the current one by this\n     * vertex attribute.\n     * <p>\n     * example glsl code:\n     *\n     * <pre><code>\n     *  // this is bound using MATERIAL_INDEX\n     *  attribute int materialIndex;\n     *\n     *  struct Material {\n     *    vec3 diffuse;\n     *    vec3 specular;\n     *    vec3 specularExponent;\n     *  };\n     *\n     *  uniform Material materials[MAX_MATERIALS];\n     *\n     *  // ...\n     *\n     *  vec3 diffuse = materials[materialIndex];\n     *\n     * </code></pre>\n     * TODO: More description & test to make sure subscripting by attributes even\n     * works for webgl\n     *\n     * @see {@link Layout}\n     */\n    Layout.MATERIAL_INDEX = new Attribute(\"materialIndex\", 1, TYPES.SHORT);\n    Layout.MATERIAL_ENABLED = new Attribute(\"materialEnabled\", 1, TYPES.UNSIGNED_SHORT);\n    Layout.AMBIENT = new Attribute(\"ambient\", 3, TYPES.FLOAT);\n    Layout.DIFFUSE = new Attribute(\"diffuse\", 3, TYPES.FLOAT);\n    Layout.SPECULAR = new Attribute(\"specular\", 3, TYPES.FLOAT);\n    Layout.SPECULAR_EXPONENT = new Attribute(\"specularExponent\", 3, TYPES.FLOAT);\n    Layout.EMISSIVE = new Attribute(\"emissive\", 3, TYPES.FLOAT);\n    Layout.TRANSMISSION_FILTER = new Attribute(\"transmissionFilter\", 3, TYPES.FLOAT);\n    Layout.DISSOLVE = new Attribute(\"dissolve\", 1, TYPES.FLOAT);\n    Layout.ILLUMINATION = new Attribute(\"illumination\", 1, TYPES.UNSIGNED_SHORT);\n    Layout.REFRACTION_INDEX = new Attribute(\"refractionIndex\", 1, TYPES.FLOAT);\n    Layout.SHARPNESS = new Attribute(\"sharpness\", 1, TYPES.FLOAT);\n    Layout.MAP_DIFFUSE = new Attribute(\"mapDiffuse\", 1, TYPES.SHORT);\n    Layout.MAP_AMBIENT = new Attribute(\"mapAmbient\", 1, TYPES.SHORT);\n    Layout.MAP_SPECULAR = new Attribute(\"mapSpecular\", 1, TYPES.SHORT);\n    Layout.MAP_SPECULAR_EXPONENT = new Attribute(\"mapSpecularExponent\", 1, TYPES.SHORT);\n    Layout.MAP_DISSOLVE = new Attribute(\"mapDissolve\", 1, TYPES.SHORT);\n    Layout.ANTI_ALIASING = new Attribute(\"antiAliasing\", 1, TYPES.UNSIGNED_SHORT);\n    Layout.MAP_BUMP = new Attribute(\"mapBump\", 1, TYPES.SHORT);\n    Layout.MAP_DISPLACEMENT = new Attribute(\"mapDisplacement\", 1, TYPES.SHORT);\n    Layout.MAP_DECAL = new Attribute(\"mapDecal\", 1, TYPES.SHORT);\n    Layout.MAP_EMISSIVE = new Attribute(\"mapEmissive\", 1, TYPES.SHORT);\n    return Layout;\n}());\nexports.Layout = Layout;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.MaterialLibrary = exports.Material = void 0;\n/**\n * The Material class.\n */\nvar Material = /** @class */ (function () {\n    function Material(name) {\n        this.name = name;\n        /**\n         * Constructor\n         * @param {String} name the unique name of the material\n         */\n        // The values for the following attibutes\n        // are an array of R, G, B normalized values.\n        // Ka - Ambient Reflectivity\n        this.ambient = [0, 0, 0];\n        // Kd - Defuse Reflectivity\n        this.diffuse = [0, 0, 0];\n        // Ks\n        this.specular = [0, 0, 0];\n        // Ke\n        this.emissive = [0, 0, 0];\n        // Tf\n        this.transmissionFilter = [0, 0, 0];\n        // d\n        this.dissolve = 0;\n        // valid range is between 0 and 1000\n        this.specularExponent = 0;\n        // either d or Tr; valid values are normalized\n        this.transparency = 0;\n        // illum - the enum of the illumination model to use\n        this.illumination = 0;\n        // Ni - Set to \"normal\" (air).\n        this.refractionIndex = 1;\n        // sharpness\n        this.sharpness = 0;\n        // map_Kd\n        this.mapDiffuse = emptyTextureOptions();\n        // map_Ka\n        this.mapAmbient = emptyTextureOptions();\n        // map_Ks\n        this.mapSpecular = emptyTextureOptions();\n        // map_Ns\n        this.mapSpecularExponent = emptyTextureOptions();\n        // map_d\n        this.mapDissolve = emptyTextureOptions();\n        // map_aat\n        this.antiAliasing = false;\n        // map_bump or bump\n        this.mapBump = emptyTextureOptions();\n        // disp\n        this.mapDisplacement = emptyTextureOptions();\n        // decal\n        this.mapDecal = emptyTextureOptions();\n        // map_Ke\n        this.mapEmissive = emptyTextureOptions();\n        // refl - when the reflection type is a cube, there will be multiple refl\n        //        statements for each side of the cube. If it's a spherical\n        //        reflection, there should only ever be one.\n        this.mapReflections = [];\n    }\n    return Material;\n}());\nexports.Material = Material;\nvar SENTINEL_MATERIAL = new Material(\"sentinel\");\n/**\n * https://en.wikipedia.org/wiki/Wavefront_.obj_file\n * http://paulbourke.net/dataformats/mtl/\n */\nvar MaterialLibrary = /** @class */ (function () {\n    function MaterialLibrary(data) {\n        this.data = data;\n        /**\n         * Constructs the Material Parser\n         * @param mtlData the MTL file contents\n         */\n        this.currentMaterial = SENTINEL_MATERIAL;\n        this.materials = {};\n        this.parse();\n    }\n    /* eslint-disable camelcase */\n    /* the function names here disobey camelCase conventions\n     to make parsing/routing easier. see the parse function\n     documentation for more information. */\n    /**\n     * Creates a new Material object and adds to the registry.\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_newmtl = function (tokens) {\n        var name = tokens[0];\n        // console.info('Parsing new Material:', name);\n        this.currentMaterial = new Material(name);\n        this.materials[name] = this.currentMaterial;\n    };\n    /**\n     * See the documenation for parse_Ka below for a better understanding.\n     *\n     * Given a list of possible color tokens, returns an array of R, G, and B\n     * color values.\n     *\n     * @param tokens the tokens associated with the directive\n     * @return {*} a 3 element array containing the R, G, and B values\n     * of the color.\n     */\n    MaterialLibrary.prototype.parseColor = function (tokens) {\n        if (tokens[0] == \"spectral\") {\n            throw new Error(\"The MTL parser does not support spectral curve files. You will \" +\n                \"need to convert the MTL colors to either RGB or CIEXYZ.\");\n        }\n        if (tokens[0] == \"xyz\") {\n            throw new Error(\"The MTL parser does not currently support XYZ colors. Either convert the \" +\n                \"XYZ values to RGB or create an issue to add support for XYZ\");\n        }\n        // from my understanding of the spec, RGB values at this point\n        // will either be 3 floats or exactly 1 float, so that's the check\n        // that i'm going to perform here\n        if (tokens.length == 3) {\n            var _a = __read(tokens, 3), x = _a[0], y = _a[1], z = _a[2];\n            return [parseFloat(x), parseFloat(y), parseFloat(z)];\n        }\n        // Since tokens at this point has a length of 3, we're going to assume\n        // it's exactly 1, skipping the check for 2.\n        var value = parseFloat(tokens[0]);\n        // in this case, all values are equivalent\n        return [value, value, value];\n    };\n    /**\n     * Parse the ambient reflectivity\n     *\n     * A Ka directive can take one of three forms:\n     *   - Ka r g b\n     *   - Ka spectral file.rfl\n     *   - Ka xyz x y z\n     * These three forms are mutually exclusive in that only one\n     * declaration can exist per material. It is considered a syntax\n     * error otherwise.\n     *\n     * The \"Ka\" form specifies the ambient reflectivity using RGB values.\n     * The \"g\" and \"b\" values are optional. If only the \"r\" value is\n     * specified, then the \"g\" and \"b\" values are assigned the value of\n     * \"r\". Values are normally in the range 0.0 to 1.0. Values outside\n     * of this range increase or decrease the reflectivity accordingly.\n     *\n     * The \"Ka spectral\" form specifies the ambient reflectivity using a\n     * spectral curve. \"file.rfl\" is the name of the \".rfl\" file containing\n     * the curve data. \"factor\" is an optional argument which is a multiplier\n     * for the values in the .rfl file and defaults to 1.0 if not specified.\n     *\n     * The \"Ka xyz\" form specifies the ambient reflectivity using CIEXYZ values.\n     * \"x y z\" are the values of the CIEXYZ color space. The \"y\" and \"z\" arguments\n     * are optional and take on the value of the \"x\" component if only \"x\" is\n     * specified. The \"x y z\" values are normally in the range of 0.0 to 1.0 and\n     * increase or decrease ambient reflectivity accordingly outside of that\n     * range.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Ka = function (tokens) {\n        this.currentMaterial.ambient = this.parseColor(tokens);\n    };\n    /**\n     * Diffuse Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace \"Ka\" with \"Kd\" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Kd = function (tokens) {\n        this.currentMaterial.diffuse = this.parseColor(tokens);\n    };\n    /**\n     * Spectral Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace \"Ks\" with \"Kd\" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Ks = function (tokens) {\n        this.currentMaterial.specular = this.parseColor(tokens);\n    };\n    /**\n     * Emissive\n     *\n     * The amount and color of light emitted by the object.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Ke = function (tokens) {\n        this.currentMaterial.emissive = this.parseColor(tokens);\n    };\n    /**\n     * Transmission Filter\n     *\n     * Any light passing through the object is filtered by the transmission\n     * filter, which only allows specific colors to pass through. For example, Tf\n     * 0 1 0 allows all of the green to pass through and filters out all of the\n     * red and blue.\n     *\n     * Similar to the Ka directive. Simply replace \"Ks\" with \"Tf\" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Tf = function (tokens) {\n        this.currentMaterial.transmissionFilter = this.parseColor(tokens);\n    };\n    /**\n     * Specifies the dissolve for the current material.\n     *\n     * Statement: d [-halo] `factor`\n     *\n     * Example: \"d 0.5\"\n     *\n     * The factor is the amount this material dissolves into the background. A\n     * factor of 1.0 is fully opaque. This is the default when a new material is\n     * created. A factor of 0.0 is fully dissolved (completely transparent).\n     *\n     * Unlike a real transparent material, the dissolve does not depend upon\n     * material thickness nor does it have any spectral character. Dissolve works\n     * on all illumination models.\n     *\n     * The dissolve statement allows for an optional \"-halo\" flag which indicates\n     * that a dissolve is dependent on the surface orientation relative to the\n     * viewer. For example, a sphere with the following dissolve, \"d -halo 0.0\",\n     * will be fully dissolved at its center and will appear gradually more opaque\n     * toward its edge.\n     *\n     * \"factor\" is the minimum amount of dissolve applied to the material. The\n     * amount of dissolve will vary between 1.0 (fully opaque) and the specified\n     * \"factor\". The formula is:\n     *\n     *    dissolve = 1.0 - (N*v)(1.0-factor)\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_d = function (tokens) {\n        // this ignores the -halo option as I can't find any documentation on what\n        // it's supposed to be.\n        this.currentMaterial.dissolve = parseFloat(tokens.pop() || \"0\");\n    };\n    /**\n     * The \"illum\" statement specifies the illumination model to use in the\n     * material. Illumination models are mathematical equations that represent\n     * various material lighting and shading effects.\n     *\n     * The illumination number can be a number from 0 to 10. The following are\n     * the list of illumination enumerations and their summaries:\n     * 0. Color on and Ambient off\n     * 1. Color on and Ambient on\n     * 2. Highlight on\n     * 3. Reflection on and Ray trace on\n     * 4. Transparency: Glass on, Reflection: Ray trace on\n     * 5. Reflection: Fresnel on and Ray trace on\n     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on\n     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on\n     * 8. Reflection on and Ray trace off\n     * 9. Transparency: Glass on, Reflection: Ray trace off\n     * 10. Casts shadows onto invisible surfaces\n     *\n     * Example: \"illum 2\" to specify the \"Highlight on\" model\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_illum = function (tokens) {\n        this.currentMaterial.illumination = parseInt(tokens[0]);\n    };\n    /**\n     * Optical Density (AKA Index of Refraction)\n     *\n     * Statement: Ni `index`\n     *\n     * Example: Ni 1.0\n     *\n     * Specifies the optical density for the surface. `index` is the value\n     * for the optical density. The values can range from 0.001 to 10.  A value of\n     * 1.0 means that light does not bend as it passes through an object.\n     * Increasing the optical_density increases the amount of bending. Glass has\n     * an index of refraction of about 1.5. Values of less than 1.0 produce\n     * bizarre results and are not recommended\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Ni = function (tokens) {\n        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);\n    };\n    /**\n     * Specifies the specular exponent for the current material. This defines the\n     * focus of the specular highlight.\n     *\n     * Statement: Ns `exponent`\n     *\n     * Example: \"Ns 250\"\n     *\n     * `exponent` is the value for the specular exponent. A high exponent results\n     * in a tight, concentrated highlight. Ns Values normally range from 0 to\n     * 1000.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_Ns = function (tokens) {\n        this.currentMaterial.specularExponent = parseInt(tokens[0]);\n    };\n    /**\n     * Specifies the sharpness of the reflections from the local reflection map.\n     *\n     * Statement: sharpness `value`\n     *\n     * Example: \"sharpness 100\"\n     *\n     * If a material does not have a local reflection map defined in its material\n     * defintions, sharpness will apply to the global reflection map defined in\n     * PreView.\n     *\n     * `value` can be a number from 0 to 1000. The default is 60. A high value\n     * results in a clear reflection of objects in the reflection map.\n     *\n     * Tip: sharpness values greater than 100 introduce aliasing effects in\n     * flat surfaces that are viewed at a sharp angle.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    MaterialLibrary.prototype.parse_sharpness = function (tokens) {\n        this.currentMaterial.sharpness = parseInt(tokens[0]);\n    };\n    /**\n     * Parses the -cc flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -cc flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_cc = function (values, options) {\n        options.colorCorrection = values[0] == \"on\";\n    };\n    /**\n     * Parses the -blendu flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendu flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_blendu = function (values, options) {\n        options.horizontalBlending = values[0] == \"on\";\n    };\n    /**\n     * Parses the -blendv flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendv flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_blendv = function (values, options) {\n        options.verticalBlending = values[0] == \"on\";\n    };\n    /**\n     * Parses the -boost flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -boost flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_boost = function (values, options) {\n        options.boostMipMapSharpness = parseFloat(values[0]);\n    };\n    /**\n     * Parses the -mm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -mm flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_mm = function (values, options) {\n        options.modifyTextureMap.brightness = parseFloat(values[0]);\n        options.modifyTextureMap.contrast = parseFloat(values[1]);\n    };\n    /**\n     * Parses and sets the -o, -s, and -t  u, v, and w values\n     *\n     * @param values the values passed to the -o, -s, -t flag\n     * @param {Object} option the Object of either the -o, -s, -t option\n     * @param {Integer} defaultValue the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_ost = function (values, option, defaultValue) {\n        while (values.length < 3) {\n            values.push(defaultValue.toString());\n        }\n        option.u = parseFloat(values[0]);\n        option.v = parseFloat(values[1]);\n        option.w = parseFloat(values[2]);\n    };\n    /**\n     * Parses the -o flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -o flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_o = function (values, options) {\n        this.parse_ost(values, options.offset, 0);\n    };\n    /**\n     * Parses the -s flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -s flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_s = function (values, options) {\n        this.parse_ost(values, options.scale, 1);\n    };\n    /**\n     * Parses the -t flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -t flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_t = function (values, options) {\n        this.parse_ost(values, options.turbulence, 0);\n    };\n    /**\n     * Parses the -texres flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -texres flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_texres = function (values, options) {\n        options.textureResolution = parseFloat(values[0]);\n    };\n    /**\n     * Parses the -clamp flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -clamp flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_clamp = function (values, options) {\n        options.clamp = values[0] == \"on\";\n    };\n    /**\n     * Parses the -bm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -bm flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_bm = function (values, options) {\n        options.bumpMultiplier = parseFloat(values[0]);\n    };\n    /**\n     * Parses the -imfchan flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -imfchan flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_imfchan = function (values, options) {\n        options.imfChan = values[0];\n    };\n    /**\n     * This only exists for relection maps and denotes the type of reflection.\n     *\n     * @param values the values passed to the -type flag\n     * @param options the Object of all image options\n     */\n    MaterialLibrary.prototype.parse_type = function (values, options) {\n        options.reflectionType = values[0];\n    };\n    /**\n     * Parses the texture's options and returns an options object with the info\n     *\n     * @param tokens all of the option tokens to pass to the texture\n     * @return {Object} a complete object of objects to apply to the texture\n     */\n    MaterialLibrary.prototype.parseOptions = function (tokens) {\n        var options = emptyTextureOptions();\n        var option;\n        var values;\n        var optionsToValues = {};\n        tokens.reverse();\n        while (tokens.length) {\n            // token is guaranteed to exists here, hence the explicit \"as\"\n            var token = tokens.pop();\n            if (token.startsWith(\"-\")) {\n                option = token.substr(1);\n                optionsToValues[option] = [];\n            }\n            else if (option) {\n                optionsToValues[option].push(token);\n            }\n        }\n        for (option in optionsToValues) {\n            if (!optionsToValues.hasOwnProperty(option)) {\n                continue;\n            }\n            values = optionsToValues[option];\n            var optionMethod = this[\"parse_\" + option];\n            if (optionMethod) {\n                optionMethod.bind(this)(values, options);\n            }\n        }\n        return options;\n    };\n    /**\n     * Parses the given texture map line.\n     *\n     * @param tokens all of the tokens representing the texture\n     * @return a complete object of objects to apply to the texture\n     */\n    MaterialLibrary.prototype.parseMap = function (tokens) {\n        var _a;\n        // according to wikipedia:\n        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)\n        // there is at least one vendor that places the filename before the options\n        // rather than after (which is to spec). All options start with a '-'\n        // so if the first token doesn't start with a '-', we're going to assume\n        // it's the name of the map file.\n        var optionsString;\n        var filename = \"\";\n        if (!tokens[0].startsWith(\"-\")) {\n            _a = __read(tokens), filename = _a[0], optionsString = _a.slice(1);\n        }\n        else {\n            filename = tokens.pop();\n            optionsString = tokens;\n        }\n        var options = this.parseOptions(optionsString);\n        options.filename = filename.replace(/\\\\/g, \"/\");\n        return options;\n    };\n    /**\n     * Parses the ambient map.\n     *\n     * @param tokens list of tokens for the map_Ka direcive\n     */\n    MaterialLibrary.prototype.parse_map_Ka = function (tokens) {\n        this.currentMaterial.mapAmbient = this.parseMap(tokens);\n    };\n    /**\n     * Parses the diffuse map.\n     *\n     * @param tokens list of tokens for the map_Kd direcive\n     */\n    MaterialLibrary.prototype.parse_map_Kd = function (tokens) {\n        this.currentMaterial.mapDiffuse = this.parseMap(tokens);\n    };\n    /**\n     * Parses the specular map.\n     *\n     * @param tokens list of tokens for the map_Ks direcive\n     */\n    MaterialLibrary.prototype.parse_map_Ks = function (tokens) {\n        this.currentMaterial.mapSpecular = this.parseMap(tokens);\n    };\n    /**\n     * Parses the emissive map.\n     *\n     * @param tokens list of tokens for the map_Ke direcive\n     */\n    MaterialLibrary.prototype.parse_map_Ke = function (tokens) {\n        this.currentMaterial.mapEmissive = this.parseMap(tokens);\n    };\n    /**\n     * Parses the specular exponent map.\n     *\n     * @param tokens list of tokens for the map_Ns direcive\n     */\n    MaterialLibrary.prototype.parse_map_Ns = function (tokens) {\n        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);\n    };\n    /**\n     * Parses the dissolve map.\n     *\n     * @param tokens list of tokens for the map_d direcive\n     */\n    MaterialLibrary.prototype.parse_map_d = function (tokens) {\n        this.currentMaterial.mapDissolve = this.parseMap(tokens);\n    };\n    /**\n     * Parses the anti-aliasing option.\n     *\n     * @param tokens list of tokens for the map_aat direcive\n     */\n    MaterialLibrary.prototype.parse_map_aat = function (tokens) {\n        this.currentMaterial.antiAliasing = tokens[0] == \"on\";\n    };\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the map_bump direcive\n     */\n    MaterialLibrary.prototype.parse_map_bump = function (tokens) {\n        this.currentMaterial.mapBump = this.parseMap(tokens);\n    };\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the bump direcive\n     */\n    MaterialLibrary.prototype.parse_bump = function (tokens) {\n        this.parse_map_bump(tokens);\n    };\n    /**\n     * Parses the disp map.\n     *\n     * @param tokens list of tokens for the disp direcive\n     */\n    MaterialLibrary.prototype.parse_disp = function (tokens) {\n        this.currentMaterial.mapDisplacement = this.parseMap(tokens);\n    };\n    /**\n     * Parses the decal map.\n     *\n     * @param tokens list of tokens for the map_decal direcive\n     */\n    MaterialLibrary.prototype.parse_decal = function (tokens) {\n        this.currentMaterial.mapDecal = this.parseMap(tokens);\n    };\n    /**\n     * Parses the refl map.\n     *\n     * @param tokens list of tokens for the refl direcive\n     */\n    MaterialLibrary.prototype.parse_refl = function (tokens) {\n        this.currentMaterial.mapReflections.push(this.parseMap(tokens));\n    };\n    /**\n     * Parses the MTL file.\n     *\n     * Iterates line by line parsing each MTL directive.\n     *\n     * This function expects the first token in the line\n     * to be a valid MTL directive. That token is then used\n     * to try and run a method on this class. parse_[directive]\n     * E.g., the `newmtl` directive would try to call the method\n     * parse_newmtl. Each parsing function takes in the remaining\n     * list of tokens and updates the currentMaterial class with\n     * the attributes provided.\n     */\n    MaterialLibrary.prototype.parse = function () {\n        var e_1, _a;\n        var lines = this.data.split(/\\r?\\n/);\n        try {\n            for (var lines_1 = __values(lines), lines_1_1 = lines_1.next(); !lines_1_1.done; lines_1_1 = lines_1.next()) {\n                var line = lines_1_1.value;\n                line = line.trim();\n                if (!line || line.startsWith(\"#\")) {\n                    continue;\n                }\n                var _b = __read(line.split(/\\s/)), directive = _b[0], tokens = _b.slice(1);\n                var parseMethod = this[\"parse_\" + directive];\n                if (!parseMethod) {\n                    console.warn(\"Don't know how to parse the directive: \\\"\" + directive + \"\\\"\");\n                    continue;\n                }\n                // console.log(`Parsing \"${directive}\" with tokens: ${tokens}`);\n                parseMethod.bind(this)(tokens);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (lines_1_1 && !lines_1_1.done && (_a = lines_1[\"return\"])) _a.call(lines_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // some cleanup. These don't need to be exposed as public data.\n        delete this.data;\n        this.currentMaterial = SENTINEL_MATERIAL;\n    };\n    return MaterialLibrary;\n}());\nexports.MaterialLibrary = MaterialLibrary;\nfunction emptyTextureOptions() {\n    return {\n        colorCorrection: false,\n        horizontalBlending: true,\n        verticalBlending: true,\n        boostMipMapSharpness: 0,\n        modifyTextureMap: {\n            brightness: 0,\n            contrast: 1\n        },\n        offset: { u: 0, v: 0, w: 0 },\n        scale: { u: 1, v: 1, w: 1 },\n        turbulence: { u: 0, v: 0, w: 0 },\n        clamp: false,\n        textureResolution: null,\n        bumpMultiplier: 1,\n        imfChan: null,\n        filename: \"\"\n    };\n}\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nvar layout_1 = require(\"./layout\");\n/**\n * The main Mesh class. The constructor will parse through the OBJ file data\n * and collect the vertex, vertex normal, texture, and face information. This\n * information can then be used later on when creating your VBOs. See\n * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n */\nvar Mesh = /** @class */ (function () {\n    /**\n     * Create a Mesh\n     * @param {String} objectData - a string representation of an OBJ file with\n     *     newlines preserved.\n     * @param {Object} options - a JS object containing valid options. See class\n     *     documentation for options.\n     * @param {bool} options.enableWTextureCoord - Texture coordinates can have\n     *     an optional \"w\" coordinate after the u and v coordinates. This extra\n     *     value can be used in order to perform fancy transformations on the\n     *     textures themselves. Default is to truncate to only the u an v\n     *     coordinates. Passing true will provide a default value of 0 in the\n     *     event that any or all texture coordinates don't provide a w value.\n     *     Always use the textureStride attribute in order to determine the\n     *     stride length of the texture coordinates when rendering the element\n     *     array.\n     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents\n     *     and bitangents when loading of the OBJ is completed. This adds two new\n     *     attributes to the Mesh instance: `tangents` and `bitangents`.\n     */\n    function Mesh(objectData, options) {\n        var e_1, _a, e_2, _b;\n        this.name = \"\";\n        this.indicesPerMaterial = [];\n        this.materialsByIndex = {};\n        this.tangents = [];\n        this.bitangents = [];\n        options = options || {};\n        options.materials = options.materials || {};\n        options.enableWTextureCoord = !!options.enableWTextureCoord;\n        // the list of unique vertex, normal, texture, attributes\n        this.vertexNormals = [];\n        this.textures = [];\n        // the indicies to draw the faces\n        this.indices = [];\n        this.textureStride = options.enableWTextureCoord ? 3 : 2;\n        /*\n        The OBJ file format does a sort of compression when saving a model in a\n        program like Blender. There are at least 3 sections (4 including textures)\n        within the file. Each line in a section begins with the same string:\n          * 'v': indicates vertex section\n          * 'vn': indicates vertex normal section\n          * 'f': indicates the faces section\n          * 'vt': indicates vertex texture section (if textures were used on the model)\n        Each of the above sections (except for the faces section) is a list/set of\n        unique vertices.\n\n        Each line of the faces section contains a list of\n        (vertex, [texture], normal) groups.\n\n        **Note:** The following documentation will use a capital \"V\" Vertex to\n        denote the above (vertex, [texture], normal) groups whereas a lowercase\n        \"v\" vertex is used to denote an X, Y, Z coordinate.\n\n        Some examples:\n            // the texture index is optional, both formats are possible for models\n            // without a texture applied\n            f 1/25 18/46 12/31\n            f 1//25 18//46 12//31\n\n            // A 3 vertex face with texture indices\n            f 16/92/11 14/101/22 1/69/1\n\n            // A 4 vertex face\n            f 16/92/11 40/109/40 38/114/38 14/101/22\n\n        The first two lines are examples of a 3 vertex face without a texture applied.\n        The second is an example of a 3 vertex face with a texture applied.\n        The third is an example of a 4 vertex face. Note: a face can contain N\n        number of vertices.\n\n        Each number that appears in one of the groups is a 1-based index\n        corresponding to an item from the other sections (meaning that indexing\n        starts at one and *not* zero).\n\n        For example:\n            `f 16/92/11` is saying to\n              - take the 16th element from the [v] vertex array\n              - take the 92nd element from the [vt] texture array\n              - take the 11th element from the [vn] normal array\n            and together they make a unique vertex.\n        Using all 3+ unique Vertices from the face line will produce a polygon.\n\n        Now, you could just go through the OBJ file and create a new vertex for\n        each face line and WebGL will draw what appears to be the same model.\n        However, vertices will be overlapped and duplicated all over the place.\n\n        Consider a cube in 3D space centered about the origin and each side is\n        2 units long. The front face (with the positive Z-axis pointing towards\n        you) would have a Top Right vertex (looking orthogonal to its normal)\n        mapped at (1,1,1) The right face would have a Top Left vertex (looking\n        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n        has a vertex at the same coordinates, however, three distinct vertices\n        will be drawn at the same spot.\n\n        To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n        groups), while iterating through the face lines, when a group is encountered\n        the whole group string ('16/92/11') is checked to see if it exists in the\n        packed.hashindices object, and if it doesn't, the indices it specifies\n        are used to look up each attribute in the corresponding attribute arrays\n        already created. The values are then copied to the corresponding unpacked\n        array (flattened to play nice with WebGL's ELEMENT_ARRAY_BUFFER indexing),\n        the group string is added to the hashindices set and the current unpacked\n        index is used as this hashindices value so that the group of elements can\n        be reused. The unpacked index is incremented. If the group string already\n        exists in the hashindices object, its corresponding value is the index of\n        that group and is appended to the unpacked indices array.\n       */\n        var verts = [];\n        var vertNormals = [];\n        var textures = [];\n        var materialNamesByIndex = [];\n        var materialIndicesByName = {};\n        // keep track of what material we've seen last\n        var currentMaterialIndex = -1;\n        var currentObjectByMaterialIndex = 0;\n        // unpacking stuff\n        var unpacked = {\n            verts: [],\n            norms: [],\n            textures: [],\n            hashindices: {},\n            indices: [[]],\n            materialIndices: [],\n            index: 0\n        };\n        var VERTEX_RE = /^v\\s/;\n        var NORMAL_RE = /^vn\\s/;\n        var TEXTURE_RE = /^vt\\s/;\n        var FACE_RE = /^f\\s/;\n        var WHITESPACE_RE = /\\s+/;\n        var USE_MATERIAL_RE = /^usemtl/;\n        console.log(objectData);\n        // array of lines separated by the newline\n        var lines = objectData.split(\"\\n\");\n        console.log('found - lines ', lines.length, lines);\n        try {\n            for (var lines_1 = __values(lines), lines_1_1 = lines_1.next(); !lines_1_1.done; lines_1_1 = lines_1.next()) {\n                var line = lines_1_1.value;\n                line = line.trim();\n                if (!line || line.startsWith(\"#\")) {\n                    continue;\n                }\n                var elements = line.split(WHITESPACE_RE);\n                elements.shift();\n                if (VERTEX_RE.test(line)) {\n                    // if this is a vertex\n                    verts.push.apply(verts, __spreadArray([], __read(elements), false));\n                }\n                else if (NORMAL_RE.test(line)) {\n                    // if this is a vertex normal\n                    vertNormals.push.apply(vertNormals, __spreadArray([], __read(elements), false));\n                }\n                else if (TEXTURE_RE.test(line)) {\n                    var coords = elements;\n                    // by default, the loader will only look at the U and V\n                    // coordinates of the vt declaration. So, this truncates the\n                    // elements to only those 2 values. If W texture coordinate\n                    // support is enabled, then the texture coordinate is\n                    // expected to have three values in it.\n                    if (elements.length > 2 && !options.enableWTextureCoord) {\n                        coords = elements.slice(0, 2);\n                    }\n                    else if (elements.length === 2 && options.enableWTextureCoord) {\n                        // If for some reason W texture coordinate support is enabled\n                        // and only the U and V coordinates are given, then we supply\n                        // the default value of 0 so that the stride length is correct\n                        // when the textures are unpacked below.\n                        coords.push(\"0\");\n                    }\n                    textures.push.apply(textures, __spreadArray([], __read(coords), false));\n                }\n                else if (USE_MATERIAL_RE.test(line)) {\n                    var materialName = elements[0];\n                    // check to see if we've ever seen it before\n                    if (!(materialName in materialIndicesByName)) {\n                        // new material we've never seen\n                        materialNamesByIndex.push(materialName);\n                        materialIndicesByName[materialName] = materialNamesByIndex.length - 1;\n                        // push new array into indices\n                        // already contains an array at index zero, don't add\n                        if (materialIndicesByName[materialName] > 0) {\n                            unpacked.indices.push([]);\n                        }\n                    }\n                    // keep track of the current material index\n                    currentMaterialIndex = materialIndicesByName[materialName];\n                    // update current index array\n                    currentObjectByMaterialIndex = currentMaterialIndex;\n                }\n                else if (FACE_RE.test(line)) {\n                    // if this is a face\n                    /*\n                    split this face into an array of Vertex groups\n                    for example:\n                       f 16/92/11 14/101/22 1/69/1\n                    becomes:\n                      ['16/92/11', '14/101/22', '1/69/1'];\n                    */\n                    var triangles = triangulate(elements);\n                    try {\n                        for (var triangles_1 = (e_2 = void 0, __values(triangles)), triangles_1_1 = triangles_1.next(); !triangles_1_1.done; triangles_1_1 = triangles_1.next()) {\n                            var triangle = triangles_1_1.value;\n                            for (var j = 0, eleLen = triangle.length; j < eleLen; j++) {\n                                var hash = triangle[j] + \",\" + currentMaterialIndex;\n                                if (hash in unpacked.hashindices) {\n                                    unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                                }\n                                else {\n                                    /*\n                                Each element of the face line array is a Vertex which has its\n                                attributes delimited by a forward slash. This will separate\n                                each attribute into another array:\n                                    '19/92/11'\n                                becomes:\n                                    Vertex = ['19', '92', '11'];\n                                where\n                                    Vertex[0] is the vertex index\n                                    Vertex[1] is the texture index\n                                    Vertex[2] is the normal index\n                                 Think of faces having Vertices which are comprised of the\n                                 attributes location (v), texture (vt), and normal (vn).\n                                 */\n                                    var vertex = triangle[j].split(\"/\");\n                                    // it's possible for faces to only specify the vertex\n                                    // and the normal. In this case, vertex will only have\n                                    // a length of 2 and not 3 and the normal will be the\n                                    // second item in the list with an index of 1.\n                                    var normalIndex = vertex.length - 1;\n                                    /*\n                                 The verts, textures, and vertNormals arrays each contain a\n                                 flattend array of coordinates.\n        \n                                 Because it gets confusing by referring to Vertex and then\n                                 vertex (both are different in my descriptions) I will explain\n                                 what's going on using the vertexNormals array:\n        \n                                 vertex[2] will contain the one-based index of the vertexNormals\n                                 section (vn). One is subtracted from this index number to play\n                                 nice with javascript's zero-based array indexing.\n        \n                                 Because vertexNormal is a flattened array of x, y, z values,\n                                 simple pointer arithmetic is used to skip to the start of the\n                                 vertexNormal, then the offset is added to get the correct\n                                 component: +0 is x, +1 is y, +2 is z.\n        \n                                 This same process is repeated for verts and textures.\n                                 */\n                                    // Vertex position\n                                    unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);\n                                    unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);\n                                    unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);\n                                    // Vertex textures\n                                    if (textures.length) {\n                                        var stride = options.enableWTextureCoord ? 3 : 2;\n                                        unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);\n                                        unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);\n                                        if (options.enableWTextureCoord) {\n                                            unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);\n                                        }\n                                    }\n                                    // Vertex normals\n                                    unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);\n                                    unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);\n                                    unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);\n                                    // Vertex material indices\n                                    unpacked.materialIndices.push(currentMaterialIndex);\n                                    // add the newly created Vertex to the list of indices\n                                    unpacked.hashindices[hash] = unpacked.index;\n                                    unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                                    // increment the counter\n                                    unpacked.index += 1;\n                                }\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (triangles_1_1 && !triangles_1_1.done && (_b = triangles_1[\"return\"])) _b.call(triangles_1);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (lines_1_1 && !lines_1_1.done && (_a = lines_1[\"return\"])) _a.call(lines_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        console.log('unpacked ', unpacked);\n        this.vertices = unpacked.verts;\n        this.vertexNormals = unpacked.norms;\n        this.textures = unpacked.textures;\n        this.vertexMaterialIndices = unpacked.materialIndices;\n        this.indices = unpacked.indices[currentObjectByMaterialIndex];\n        this.indicesPerMaterial = unpacked.indices;\n        this.materialNames = materialNamesByIndex;\n        this.materialIndices = materialIndicesByName;\n        this.materialsByIndex = {};\n        if (options.calcTangentsAndBitangents) {\n            this.calculateTangentsAndBitangents();\n        }\n    }\n    /**\n     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the\n     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix\n     * when distorting the normals through normal maps.\n     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/\n     *\n     * This method requires the normals and texture coordinates to be parsed and set up correctly.\n     * Adds the tangents and bitangents as members of the class instance.\n     */\n    Mesh.prototype.calculateTangentsAndBitangents = function () {\n        console.assert(!!(this.vertices &&\n            this.vertices.length &&\n            this.vertexNormals &&\n            this.vertexNormals.length &&\n            this.textures &&\n            this.textures.length), \"Missing attributes for calculating tangents and bitangents\");\n        var unpacked = {\n            tangents: __spreadArray([], __read(new Array(this.vertices.length)), false).map(function (_) { return 0; }),\n            bitangents: __spreadArray([], __read(new Array(this.vertices.length)), false).map(function (_) { return 0; })\n        };\n        // Loop through all faces in the whole mesh\n        var indices = this.indices;\n        var vertices = this.vertices;\n        var normals = this.vertexNormals;\n        var uvs = this.textures;\n        for (var i = 0; i < indices.length; i += 3) {\n            var i0 = indices[i + 0];\n            var i1 = indices[i + 1];\n            var i2 = indices[i + 2];\n            var x_v0 = vertices[i0 * 3 + 0];\n            var y_v0 = vertices[i0 * 3 + 1];\n            var z_v0 = vertices[i0 * 3 + 2];\n            var x_uv0 = uvs[i0 * 2 + 0];\n            var y_uv0 = uvs[i0 * 2 + 1];\n            var x_v1 = vertices[i1 * 3 + 0];\n            var y_v1 = vertices[i1 * 3 + 1];\n            var z_v1 = vertices[i1 * 3 + 2];\n            var x_uv1 = uvs[i1 * 2 + 0];\n            var y_uv1 = uvs[i1 * 2 + 1];\n            var x_v2 = vertices[i2 * 3 + 0];\n            var y_v2 = vertices[i2 * 3 + 1];\n            var z_v2 = vertices[i2 * 3 + 2];\n            var x_uv2 = uvs[i2 * 2 + 0];\n            var y_uv2 = uvs[i2 * 2 + 1];\n            var x_deltaPos1 = x_v1 - x_v0;\n            var y_deltaPos1 = y_v1 - y_v0;\n            var z_deltaPos1 = z_v1 - z_v0;\n            var x_deltaPos2 = x_v2 - x_v0;\n            var y_deltaPos2 = y_v2 - y_v0;\n            var z_deltaPos2 = z_v2 - z_v0;\n            var x_uvDeltaPos1 = x_uv1 - x_uv0;\n            var y_uvDeltaPos1 = y_uv1 - y_uv0;\n            var x_uvDeltaPos2 = x_uv2 - x_uv0;\n            var y_uvDeltaPos2 = y_uv2 - y_uv0;\n            var rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;\n            var r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);\n            // Tangent\n            var x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;\n            var y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;\n            var z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;\n            // Bitangent\n            var x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;\n            var y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;\n            var z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;\n            // Gram-Schmidt orthogonalize\n            //t = glm::normalize(t - n * glm:: dot(n, t));\n            var x_n0 = normals[i0 * 3 + 0];\n            var y_n0 = normals[i0 * 3 + 1];\n            var z_n0 = normals[i0 * 3 + 2];\n            var x_n1 = normals[i1 * 3 + 0];\n            var y_n1 = normals[i1 * 3 + 1];\n            var z_n1 = normals[i1 * 3 + 2];\n            var x_n2 = normals[i2 * 3 + 0];\n            var y_n2 = normals[i2 * 3 + 1];\n            var z_n2 = normals[i2 * 3 + 2];\n            // Tangent\n            var n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;\n            var n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;\n            var n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;\n            var x_resTangent0 = x_tangent - x_n0 * n0_dot_t;\n            var y_resTangent0 = y_tangent - y_n0 * n0_dot_t;\n            var z_resTangent0 = z_tangent - z_n0 * n0_dot_t;\n            var x_resTangent1 = x_tangent - x_n1 * n1_dot_t;\n            var y_resTangent1 = y_tangent - y_n1 * n1_dot_t;\n            var z_resTangent1 = z_tangent - z_n1 * n1_dot_t;\n            var x_resTangent2 = x_tangent - x_n2 * n2_dot_t;\n            var y_resTangent2 = y_tangent - y_n2 * n2_dot_t;\n            var z_resTangent2 = z_tangent - z_n2 * n2_dot_t;\n            var magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);\n            var magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);\n            var magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);\n            // Bitangent\n            var n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;\n            var n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;\n            var n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;\n            var x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;\n            var y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;\n            var z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;\n            var x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;\n            var y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;\n            var z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;\n            var x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;\n            var y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;\n            var z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;\n            var magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +\n                y_resBitangent0 * y_resBitangent0 +\n                z_resBitangent0 * z_resBitangent0);\n            var magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +\n                y_resBitangent1 * y_resBitangent1 +\n                z_resBitangent1 * z_resBitangent1);\n            var magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +\n                y_resBitangent2 * y_resBitangent2 +\n                z_resBitangent2 * z_resBitangent2);\n            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;\n            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;\n            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;\n            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;\n            // TODO: check handedness\n        }\n        this.tangents = unpacked.tangents;\n        this.bitangents = unpacked.bitangents;\n    };\n    /**\n     * @param layout - A {@link Layout} object that describes the\n     * desired memory layout of the generated buffer\n     * @return The packed array in the ... TODO\n     */\n    Mesh.prototype.makeBufferData = function (layout) {\n        var e_3, _a;\n        var numItems = this.vertices.length / 3;\n        var buffer = new ArrayBuffer(layout.stride * numItems);\n        buffer.numItems = numItems;\n        var dataView = new DataView(buffer);\n        for (var i = 0, vertexOffset = 0; i < numItems; i++) {\n            vertexOffset = i * layout.stride;\n            try {\n                // copy in the vertex data in the order and format given by the\n                // layout param\n                for (var _b = (e_3 = void 0, __values(layout.attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var attribute = _c.value;\n                    var offset = vertexOffset + layout.attributeMap[attribute.key].offset;\n                    switch (attribute.key) {\n                        case layout_1.Layout.POSITION.key:\n                            dataView.setFloat32(offset, this.vertices[i * 3], true);\n                            dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);\n                            dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);\n                            break;\n                        case layout_1.Layout.UV.key:\n                            dataView.setFloat32(offset, this.textures[i * 2], true);\n                            dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);\n                            break;\n                        case layout_1.Layout.NORMAL.key:\n                            dataView.setFloat32(offset, this.vertexNormals[i * 3], true);\n                            dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);\n                            dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);\n                            break;\n                        case layout_1.Layout.MATERIAL_INDEX.key:\n                            dataView.setInt16(offset, this.vertexMaterialIndices[i], true);\n                            break;\n                        case layout_1.Layout.AMBIENT.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.ambient[0], true);\n                            dataView.setFloat32(offset + 4, material.ambient[1], true);\n                            dataView.setFloat32(offset + 8, material.ambient[2], true);\n                            break;\n                        }\n                        case layout_1.Layout.DIFFUSE.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.diffuse[0], true);\n                            dataView.setFloat32(offset + 4, material.diffuse[1], true);\n                            dataView.setFloat32(offset + 8, material.diffuse[2], true);\n                            break;\n                        }\n                        case layout_1.Layout.SPECULAR.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.specular[0], true);\n                            dataView.setFloat32(offset + 4, material.specular[1], true);\n                            dataView.setFloat32(offset + 8, material.specular[2], true);\n                            break;\n                        }\n                        case layout_1.Layout.SPECULAR_EXPONENT.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.specularExponent, true);\n                            break;\n                        }\n                        case layout_1.Layout.EMISSIVE.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.emissive[0], true);\n                            dataView.setFloat32(offset + 4, material.emissive[1], true);\n                            dataView.setFloat32(offset + 8, material.emissive[2], true);\n                            break;\n                        }\n                        case layout_1.Layout.TRANSMISSION_FILTER.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.transmissionFilter[0], true);\n                            dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);\n                            dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);\n                            break;\n                        }\n                        case layout_1.Layout.DISSOLVE.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.dissolve, true);\n                            break;\n                        }\n                        case layout_1.Layout.ILLUMINATION.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setInt16(offset, material.illumination, true);\n                            break;\n                        }\n                        case layout_1.Layout.REFRACTION_INDEX.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.refractionIndex, true);\n                            break;\n                        }\n                        case layout_1.Layout.SHARPNESS.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setFloat32(offset, material.sharpness, true);\n                            break;\n                        }\n                        case layout_1.Layout.ANTI_ALIASING.key: {\n                            var materialIndex = this.vertexMaterialIndices[i];\n                            var material = this.materialsByIndex[materialIndex];\n                            if (!material) {\n                                console.warn('Material \"' +\n                                    this.materialNames[materialIndex] +\n                                    '\" not found in mesh. Did you forget to call addMaterialLibrary(...)?\"');\n                                break;\n                            }\n                            dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);\n                            break;\n                        }\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n        return buffer;\n    };\n    Mesh.prototype.makeIndexBufferData = function () {\n        var buffer = new Uint16Array(this.indices);\n        buffer.numItems = this.indices.length;\n        return buffer;\n    };\n    Mesh.prototype.makeIndexBufferDataForMaterials = function () {\n        var _a;\n        var _this = this;\n        var materialIndices = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            materialIndices[_i] = arguments[_i];\n        }\n        var indices = (_a = new Array()).concat.apply(_a, __spreadArray([], __read(materialIndices.map(function (mtlIdx) { return _this.indicesPerMaterial[mtlIdx]; })), false));\n        var buffer = new Uint16Array(indices);\n        buffer.numItems = indices.length;\n        return buffer;\n    };\n    Mesh.prototype.addMaterialLibrary = function (mtl) {\n        for (var name_1 in mtl.materials) {\n            if (!(name_1 in this.materialIndices)) {\n                // This material is not referenced by the mesh\n                continue;\n            }\n            var material = mtl.materials[name_1];\n            // Find the material index for this material\n            var materialIndex = this.materialIndices[material.name];\n            // Put the material into the materialsByIndex object at the right\n            // spot as determined when the obj file was parsed\n            this.materialsByIndex[materialIndex] = material;\n        }\n    };\n    return Mesh;\n}());\nexports[\"default\"] = Mesh;\nfunction triangulate(elements) {\n    var i;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!(elements.length <= 3)) return [3 /*break*/, 2];\n                return [4 /*yield*/, elements];\n            case 1:\n                _a.sent();\n                return [3 /*break*/, 9];\n            case 2:\n                if (!(elements.length === 4)) return [3 /*break*/, 5];\n                return [4 /*yield*/, [elements[0], elements[1], elements[2]]];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, [elements[2], elements[3], elements[0]]];\n            case 4:\n                _a.sent();\n                return [3 /*break*/, 9];\n            case 5:\n                i = 1;\n                _a.label = 6;\n            case 6:\n                if (!(i < elements.length - 1)) return [3 /*break*/, 9];\n                return [4 /*yield*/, [elements[0], elements[i], elements[i + 1]]];\n            case 7:\n                _a.sent();\n                _a.label = 8;\n            case 8:\n                i++;\n                return [3 /*break*/, 6];\n            case 9: return [2 /*return*/];\n        }\n    });\n}\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.deleteMeshBuffers = exports.initMeshBuffers = exports._buildBuffer = exports.downloadMeshes = exports.downloadModels = void 0;\nvar mesh_1 = require(\"./mesh\");\nvar material_1 = require(\"./material\");\nfunction downloadMtlTextures(gl, mtl, root) {\n    var e_1, _a;\n    var mapAttributes = [\n        \"mapDiffuse\",\n        \"mapAmbient\",\n        \"mapSpecular\",\n        \"mapDissolve\",\n        \"mapBump\",\n        \"mapDisplacement\",\n        \"mapDecal\",\n        \"mapEmissive\",\n    ];\n    if (!root.endsWith(\"/\")) {\n        root += \"/\";\n    }\n    var textures = [];\n    for (var materialName in mtl.materials) {\n        if (!mtl.materials.hasOwnProperty(materialName)) {\n            continue;\n        }\n        var material = mtl.materials[materialName];\n        var _loop_1 = function (attr) {\n            var mapData = material[attr];\n            if (!mapData || !mapData.filename) {\n                return \"continue\";\n            }\n            var url = root + mapData.filename;\n            textures.push(fetch(url)\n                .then(function (response) {\n                if (!response.ok) {\n                    throw new Error();\n                }\n                return response.blob();\n            })\n                .then(function (data) {\n                var image = new Image();\n                image.src = URL.createObjectURL(data);\n                mapData.texture = image;\n                var texture = gl.createTexture();\n                gl.bindTexture(gl.TEXTURE_2D, texture);\n                // Set the parameters so we can render any size image.\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                // Upload the image into the texture.\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n                mapData.glTexture = texture;\n                console.log('loading texture image ', mapData, image.src);\n                return new Promise(function (resolve) { return (image.onload = function () { return resolve(mapData); }); });\n            })[\"catch\"](function () {\n                console.error(\"Unable to download texture: \" + url);\n            }));\n        };\n        try {\n            for (var mapAttributes_1 = (e_1 = void 0, __values(mapAttributes)), mapAttributes_1_1 = mapAttributes_1.next(); !mapAttributes_1_1.done; mapAttributes_1_1 = mapAttributes_1.next()) {\n                var attr = mapAttributes_1_1.value;\n                _loop_1(attr);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (mapAttributes_1_1 && !mapAttributes_1_1.done && (_a = mapAttributes_1[\"return\"])) _a.call(mapAttributes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    console.log('textures loaded ', textures);\n    return Promise.all(textures);\n}\nfunction getMtl(modelOptions) {\n    if (!(typeof modelOptions.mtl === \"string\")) {\n        return modelOptions.obj.replace(/\\.obj$/, \".mtl\");\n    }\n    return modelOptions.mtl;\n}\n/**\n * Accepts a list of model request objects and returns a Promise that\n * resolves when all models have been downloaded and parsed.\n *\n * The list of model objects follow this interface:\n * {\n *  obj: 'path/to/model.obj',\n *  mtl: true | 'path/to/model.mtl',\n *  downloadMtlTextures: true | false\n *  mtlTextureRoot: '/models/suzanne/maps'\n *  name: 'suzanne'\n * }\n *\n * The `obj` attribute is required and should be the path to the\n * model's .obj file relative to the current repo (absolute URLs are\n * suggested).\n *\n * The `mtl` attribute is optional and can either be a boolean or\n * a path to the model's .mtl file relative to the current URL. If\n * the value is `true`, then the path and basename given for the `obj`\n * attribute is used replacing the .obj suffix for .mtl\n * E.g.: {obj: 'models/foo.obj', mtl: true} would search for 'models/foo.mtl'\n *\n * The `name` attribute is optional and is a human friendly name to be\n * included with the parsed OBJ and MTL files. If not given, the base .obj\n * filename will be used.\n *\n * The `downloadMtlTextures` attribute is a flag for automatically downloading\n * any images found in the MTL file and attaching them to each Material\n * created from that file. For example, if material.mapDiffuse is set (there\n * was data in the MTL file), then material.mapDiffuse.texture will contain\n * the downloaded image. This option defaults to `true`. By default, the MTL's\n * URL will be used to determine the location of the images.\n *\n * The `mtlTextureRoot` attribute is optional and should point to the location\n * on the server that this MTL's texture files are located. The default is to\n * use the MTL file's location.\n *\n * @returns {Promise} the result of downloading the given list of models. The\n * promise will resolve with an object whose keys are the names of the models\n * and the value is its Mesh object. Each Mesh object will automatically\n * have its addMaterialLibrary() method called to set the given MTL data (if given).\n */\nfunction downloadModels(gl, models) {\n    var e_2, _a;\n    var finished = [];\n    var _loop_2 = function (model) {\n        if (!model.obj) {\n            throw new Error('\"obj\" attribute of model object not set. The .obj file is required to be set ' +\n                \"in order to use downloadModels()\");\n        }\n        var options = {\n            indicesPerMaterial: !!model.indicesPerMaterial,\n            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents\n        };\n        // if the name is not provided, dervive it from the given OBJ\n        var name_1 = model.name;\n        if (!name_1) {\n            var parts = model.obj.split(\"/\");\n            name_1 = parts[parts.length - 1].replace(\".obj\", \"\");\n        }\n        var namePromise = Promise.resolve(name_1);\n        var meshPromise = fetch(model.obj)\n            .then(function (response) { return response.text(); })\n            .then(function (data) {\n            return new mesh_1[\"default\"](data, options);\n        });\n        var mtlPromise = void 0;\n        // Download MaterialLibrary file?\n        if (model.mtl) {\n            var mtl_1 = getMtl(model);\n            mtlPromise = fetch(mtl_1)\n                .then(function (response) { return response.text(); })\n                .then(function (data) {\n                var material = new material_1.MaterialLibrary(data);\n                if (model.downloadMtlTextures !== false) {\n                    var root = model.mtlTextureRoot;\n                    if (!root) {\n                        // get the directory of the MTL file as default\n                        root = mtl_1.substr(0, mtl_1.lastIndexOf(\"/\"));\n                    }\n                    // downloadMtlTextures returns a Promise that\n                    // is resolved once all of the images it\n                    // contains are downloaded. These are then\n                    // attached to the map data objects\n                    return Promise.all([Promise.resolve(material), downloadMtlTextures(gl, material, root)]);\n                }\n                return Promise.all([Promise.resolve(material), undefined]);\n            })\n                .then(function (value) {\n                console.log('material loaded', value);\n                return value;\n            });\n        }\n        var parsed = [namePromise, meshPromise, mtlPromise];\n        finished.push(Promise.all(parsed));\n    };\n    try {\n        for (var models_1 = __values(models), models_1_1 = models_1.next(); !models_1_1.done; models_1_1 = models_1.next()) {\n            var model = models_1_1.value;\n            _loop_2(model);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (models_1_1 && !models_1_1.done && (_a = models_1[\"return\"])) _a.call(models_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return Promise.all(finished).then(function (ms) {\n        var e_3, _a;\n        // the \"finished\" promise is a list of name, Mesh instance,\n        // and MaterialLibary instance. This unpacks and returns an\n        // object mapping name to Mesh (Mesh points to MTL).\n        var models = {};\n        try {\n            for (var ms_1 = __values(ms), ms_1_1 = ms_1.next(); !ms_1_1.done; ms_1_1 = ms_1.next()) {\n                var model = ms_1_1.value;\n                var _b = __read(model, 3), name_2 = _b[0], mesh = _b[1], mtl = _b[2];\n                mesh.name = name_2;\n                if (mtl) {\n                    console.log(mtl);\n                    mesh.addMaterialLibrary(mtl[0]);\n                }\n                models[name_2] = mesh;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (ms_1_1 && !ms_1_1.done && (_a = ms_1[\"return\"])) _a.call(ms_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return models;\n    });\n}\nexports.downloadModels = downloadModels;\n/**\n * Takes in an object of `mesh_name`, `'/url/to/OBJ/file'` pairs and a callback\n * function. Each OBJ file will be ajaxed in and automatically converted to\n * an OBJ.Mesh. When all files have successfully downloaded the callback\n * function provided will be called and passed in an object containing\n * the newly created meshes.\n *\n * **Note:** In order to use this function as a way to download meshes, a\n * webserver of some sort must be used.\n *\n * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh's OBJ file\n *\n * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n *\n * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { '<mesh_name>': OBJ.Mesh }\n *\n */\nfunction downloadMeshes(nameAndURLs, completionCallback, meshes) {\n    if (meshes === undefined) {\n        meshes = {};\n    }\n    var completed = [];\n    var _loop_3 = function (mesh_name) {\n        if (!nameAndURLs.hasOwnProperty(mesh_name)) {\n            return \"continue\";\n        }\n        var url = nameAndURLs[mesh_name];\n        completed.push(fetch(url)\n            .then(function (response) { return response.text(); })\n            .then(function (data) {\n            return [mesh_name, new mesh_1[\"default\"](data)];\n        }));\n    };\n    for (var mesh_name in nameAndURLs) {\n        _loop_3(mesh_name);\n    }\n    Promise.all(completed).then(function (ms) {\n        var e_4, _a;\n        try {\n            for (var ms_2 = __values(ms), ms_2_1 = ms_2.next(); !ms_2_1.done; ms_2_1 = ms_2.next()) {\n                var _b = __read(ms_2_1.value, 2), name_3 = _b[0], mesh = _b[1];\n                meshes[name_3] = mesh;\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (ms_2_1 && !ms_2_1.done && (_a = ms_2[\"return\"])) _a.call(ms_2);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return completionCallback(meshes);\n    });\n}\nexports.downloadMeshes = downloadMeshes;\nfunction _buildBuffer(gl, type, data, itemSize) {\n    var buffer = gl.createBuffer();\n    var arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n}\nexports._buildBuffer = _buildBuffer;\n/**\n * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n * to the mesh object as attributes.\n *\n * @param {WebGLRenderingContext} gl the `canvas.getContext('webgl')` context instance\n * @param {Mesh} mesh a single `OBJ.Mesh` instance\n *\n * The newly created mesh attributes are:\n *\n * Attrbute | Description\n * :--- | ---\n * **normalBuffer**       |contains the model&#39;s Vertex Normals\n * normalBuffer.itemSize  |set to 3 items\n * normalBuffer.numItems  |the total number of vertex normals\n * |\n * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n * textureBuffer.itemSize |set to 2 items\n * textureBuffer.numItems |the number of texture coordinates\n * |\n * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n * vertexBuffer.itemSize  |set to 3 items\n * vertexBuffer.numItems  |the total number of vertices\n * |\n * **indexBuffer**        |contains the indices of the faces\n * indexBuffer.itemSize   |is set to 1\n * indexBuffer.numItems   |the total number of indices\n *\n * A simple example (a lot of steps are missing, so don't copy and paste):\n *\n *     const gl   = canvas.getContext('webgl'),\n *         mesh = OBJ.Mesh(obj_file_data);\n *     // compile the shaders and create a shader program\n *     const shaderProgram = gl.createProgram();\n *     // compilation stuff here\n *     ...\n *     // make sure you have vertex, vertex normal, and texture coordinate\n *     // attributes located in your shaders and attach them to the shader program\n *     shaderProgram.aVertexPosition = gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\n *     gl.enableVertexAttribArray(shaderProgram.aVertexPosition);\n *\n *     shaderProgram.aVertexNormal = gl.getAttribLocation(shaderProgram, \"aVertexNormal\");\n *     gl.enableVertexAttribArray(shaderProgram.aVertexNormal);\n *\n *     shaderProgram.aTextureCoord = gl.getAttribLocation(shaderProgram, \"aTextureCoord\");\n *     gl.enableVertexAttribArray(shaderProgram.aTextureCoord);\n *\n *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n *     // and save on to the mesh object\n *     OBJ.initMeshBuffers(gl, mesh);\n *\n *     // now to render the mesh\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n *     gl.vertexAttribPointer(shaderProgram.aVertexPosition, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     // it's possible that the mesh doesn't contain\n *     // any texture coordinates (e.g. suzanne.obj in the development branch).\n *     // in this case, the texture vertexAttribArray will need to be disabled\n *     // before the call to drawElements\n *     if(!mesh.textures.length){\n *       gl.disableVertexAttribArray(shaderProgram.aTextureCoord);\n *     }\n *     else{\n *       // if the texture vertexAttribArray has been previously\n *       // disabled, then it needs to be re-enabled\n *       gl.enableVertexAttribArray(shaderProgram.aTextureCoord);\n *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n *       gl.vertexAttribPointer(shaderProgram.aTextureCoord, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     }\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n *     gl.vertexAttribPointer(shaderProgram.aVertexNormal, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n */\nfunction initMeshBuffers(gl, mesh) {\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n    return mesh;\n}\nexports.initMeshBuffers = initMeshBuffers;\nfunction deleteMeshBuffers(gl, mesh) {\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n}\nexports.deleteMeshBuffers = deleteMeshBuffers;\n","var map = {\n\t\"./dungeon-bottom/map.jsx\": 948,\n\t\"./dungeon-top/map.jsx\": 4805,\n\t\"./room/map.jsx\": 5686\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4816;","var map = {\n\t\"./characters/copy.jsx\": 642,\n\t\"./characters/default.jsx\": 7154,\n\t\"./effects/fireplace.jsx\": 597,\n\t\"./effects/waterspurt.jsx\": 5359,\n\t\"./furniture/door.jsx\": 7085,\n\t\"./furniture/fireplace.jsx\": 6463,\n\t\"./furniture/tree.jsx\": 5624,\n\t\"./npc/air-knight.jsx\": 5378,\n\t\"./npc/darkness.jsx\": 6613,\n\t\"./npc/earth-knight.jsx\": 5532,\n\t\"./npc/fire-knight.jsx\": 4267,\n\t\"./npc/water-knight.jsx\": 3886,\n\t\"./objects/chests/blue.jsx\": 4247,\n\t\"./objects/chests/metal.jsx\": 2188,\n\t\"./objects/chests/red.jsx\": 3991,\n\t\"./objects/chests/wood.jsx\": 4475\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 7467;","var map = {\n\t\"./sewer/tileset.jsx\": 3507\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 7935;","module.exports = require(\"react\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport ActionQueue from \"./queue.jsx\";\nexport class Texture {\n  constructor(src, engine) {\n    this.engine = engine;\n    this.src = src;\n    this.glTexture = engine.gl.createTexture();\n    this.image = new Image();\n    this.image.onload = this.onImageLoaded.bind(this);\n    this.image.src = src;\n    this.loaded = false;\n    this.onLoadActions = new ActionQueue();\n  }\n\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // Load Texture from Image\n  onImageLoaded() {\n    let { gl } = this.engine;\n    console.log(\"loaded image '\" + this.src + \"'\");\n    gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.image);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    this.loaded = true;\n    this.onLoadActions.run();\n  }\n\n  // Bind texture to Uniform\n  attach() {\n    let { gl } = this.engine;\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n    gl.uniform1i(this.engine.shaderProgram.samplerUniform, 0);\n  }\n}\n\nexport class ColorTexture {\n  constructor(color, engine) {\n    this.engine = engine;\n    this.color = color;\n    this.glTexture = engine.gl.createTexture();\n    this.loaded = false;\n    this.onLoadActions = new ActionQueue();\n    this.loadTexture();\n  }\n\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // Load Texture from Image\n  loadTexture() {\n    let { gl } = this.engine;\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const width = 1;\n    const height = 1;\n    const border = 0;\n    const srcFormat = gl.RGBA;\n    const srcType = gl.UNSIGNED_BYTE;\n    const pixel = new Uint8Array([...this.color]);\n\n    gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat, srcType, pixel);\n    this.loaded = true;\n    this.onLoadActions.run();\n  }\n\n  // Bind texture to Uniform\n  attach() {\n    let { gl } = this.engine;\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n    gl.uniform1i(this.engine.shaderProgram.samplerUniform, 0);\n  }\n}\n","export const minecraftia = new FontFace(\"minecraftia\", \"url(/pixos/font/minecraftia.ttf)\");\n\n// Scrolling Text Box UI (For Dialogue)\nexport class textScrollBox {\n  // courtesy of https://stackoverflow.com/questions/44488996/create-a-scrollable-text-inside-canvas\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.dirty = true; // indicates that variouse setting need update\n    this.scrollY = 0;\n    this.fontSize = 24;\n    this.font = \"minecraftia\";\n    this.align = \"left\";\n    this.background = \"#999\";\n    this.border = {\n      lineWidth: 4,\n      style: \"white\",\n      corner: \"round\",\n    };\n    this.scrollBox = {\n      width: 5,\n      background: \"#568\",\n      color: \"#78a\",\n    };\n    this.fontStyle = \"white\";\n    this.lines = [];\n  }\n  // initialize widget\n  init(text, x, y, width, height, options = {}) {\n    this.text = text;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.portrait = options.portrait ?? null;\n    this.setOptions(options);\n    this.cleanit();\n  }\n  // Clean & format text\n  cleanit(dontFitText) {\n    if (this.dirty) {\n      this.setFont();\n      this.getTextPos();\n      this.dirty = false;\n      if (!dontFitText) {\n        this.fitText();\n      }\n    }\n  }\n  // Apply options\n  setOptions(options) {\n    Object.keys(this).forEach((key) => {\n      if (options[key] !== undefined) {\n        this[key] = options[key];\n        this.dirty = true;\n      }\n    });\n  }\n  // Apply font\n  setFont() {\n    this.fontStr = this.fontSize + \"px \" + this.font;\n    this.textHeight = this.fontSize + Math.ceil(this.fontSize * 0.05);\n  }\n  // Get Text Position\n  getTextPos() {\n    if (this.align === \"left\") {\n      this.textPos = 2;\n    } else if (this.align === \"right\") {\n      this.textPos = Math.floor(this.width - this.scrollBox.width - this.fontSize / 4);\n    } else {\n      this.textPos = Math.floor((this.width - -this.scrollBox.width) / 2);\n    }\n  }\n  // Fit to Text box\n  fitText() {\n    let { ctx } = this;\n    this.cleanit(true); // MUST PASS TRUE or will recurse to call stack overflow\n    ctx.font = this.fontStr;\n    ctx.textAlign = this.align;\n    ctx.textBaseline = \"top\";\n    let words = this.text.split(\" \");\n    this.lines.length = 0;\n    let line = \"\";\n    let space = \"\";\n    while (words.length > 0) {\n      let word = words.shift();\n      let width = ctx.measureText(line + space + word).width;\n      if (width < this.width - this.scrollBox.width - this.scrollBox.width - (this.portrait ? 84 : 0)) {\n        line += space + word;\n        space = \" \";\n      } else {\n        if (space === \"\") {\n          // if one word too big put it in anyways\n          line += word;\n        } else {\n          words.unshift(word);\n        }\n        this.lines.push(line);\n        space = \"\";\n        line = \"\";\n      }\n    }\n    if (line !== \"\") {\n      this.lines.push(line);\n    }\n    this.maxScroll = (this.lines.length + 0.5) * this.textHeight - this.height;\n  }\n  // Draw Textbox border\n  drawBorder(portrait = false) {\n    let { ctx } = this;\n    let bw = this.border.lineWidth / 2;\n    ctx.lineJoin = this.border.corner;\n    ctx.lineWidth = this.border.lineWidth;\n    ctx.strokeStyle = this.border.style;\n    if (portrait) {\n      ctx.strokeRect(this.x - bw + 84, this.y - bw, this.width + 2 * bw - 84, this.height + 2 * bw);\n    } else {\n      ctx.strokeRect(this.x - bw, this.y - bw, this.width + 2 * bw, this.height + 2 * bw);\n    }\n  }\n  // Draw Scrollbar on the side\n  drawScrollBox() {\n    let { ctx } = this;\n    let scale = this.height / (this.lines.length * this.textHeight);\n    ctx.fillStyle = this.scrollBox.background;\n    ctx.fillRect(this.x + this.width - this.scrollBox.width, this.y, this.scrollBox.width, this.height);\n    ctx.fillStyle = this.scrollBox.color;\n    let barsize = this.height * scale;\n    if (barsize > this.height) {\n      barsize = this.height;\n    }\n    ctx.fillRect(this.x + this.width - this.scrollBox.width, this.y - this.scrollY * scale, this.scrollBox.width, barsize);\n  }\n  // Draw Scrollbar on the side\n  drawPortrait() {\n    let { ctx } = this;\n    ctx.drawImage(this.portrait.image, this.x, this.y + 38, 76, 76);\n  }\n  // Scroll to position\n  scroll(pos) {\n    this.cleanit();\n    this.scrollY = -pos;\n    if (this.scrollY > 0) {\n      this.scrollY = 0;\n    } else if (this.scrollY < -this.maxScroll) {\n      this.scrollY = -this.maxScroll;\n    }\n  }\n  // Scroll to position\n  scrollLines(x) {\n    this.cleanit();\n    this.scrollY = -this.textHeight * x;\n    if (this.scrollY > 0) {\n      this.scrollY = 0;\n    } else if (this.scrollY < -this.maxScroll) {\n      this.scrollY = -this.maxScroll;\n    }\n  }\n  // Draw\n  render() {\n    let { ctx } = this;\n    this.cleanit();\n    ctx.font = this.fontStr;\n    ctx.textAlign = this.align;\n    if (this.portrait) {\n      this.drawBorder(true);\n      this.drawPortrait();\n      ctx.save(); // need this to reset the clip area\n      ctx.fillStyle = this.background;\n      ctx.fillRect(this.x + 84, this.y, this.width - 84, this.height);\n    } else {\n      this.drawBorder();\n      ctx.save(); // need this to reset the clip area\n      ctx.fillStyle = this.background;\n      ctx.fillRect(this.x, this.y, this.width, this.height);\n    }\n    this.drawScrollBox();\n\n    // Important text does not like being place at fractions of a pixel\n    if (this.portrait) {\n      ctx.beginPath();\n      ctx.rect(this.x + 84, this.y, this.width - this.scrollBox.width - 84, this.height);\n      ctx.clip();\n      ctx.setTransform(1, 0, 0, 1, this.x + 84, Math.floor(this.y + this.scrollY));\n    } else {\n      ctx.beginPath();\n      ctx.rect(this.x, this.y, this.width - this.scrollBox.width, this.height);\n      ctx.clip();\n      ctx.setTransform(1, 0, 0, 1, this.x, Math.floor(this.y + this.scrollY));\n    }\n    ctx.fillStyle = this.fontStyle;\n    for (let i = 0; i < this.lines.length; i++) {\n      // Important text does not like being place at fractions of a pixel\n      ctx.fillText(this.lines[i], this.textPos, Math.floor(i * this.textHeight) + 2);\n    }\n    ctx.restore(); // remove the clipping\n  }\n}\n","// Mobile Gamepad Controller\nCanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {\n  if (w < 2 * r) r = w / 2;\n  if (h < 2 * r) r = h / 2;\n  this.beginPath();\n  this.moveTo(x + r, y);\n  this.arcTo(x + w, y, x + w, y + h, r);\n  this.arcTo(x + w, y + h, x, y + h, r);\n  this.arcTo(x, y + h, x, y, r);\n  this.arcTo(x, y, x + w, y, r);\n  this.closePath();\n  return this;\n};\nexport class GamePad {\n  // courtesy of https://stackoverflow.com/questions/44488996/create-a-scrollable-text-inside-canvas\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.dirty = true;\n    this.showTrace = true;\n    this.showDebug = true;\n    this.fontSize = 24;\n    this.opacity = 0.4;\n    this.font = \"minecraftia\";\n    // Start & Select Buttons\n    this.start = true;\n    this.select = true;\n    this.touches = {};\n    this.map = {};\n    // Joystick Radius\n    this.radius = 40;\n    // Button placement\n    this.button_offset = { x: this.radius * 2.5, y: this.radius * 3 };\n    // Button Colours\n    this.colours = {\n      red: `rgba(255,0,0,${this.opacity})`,\n      green: `rgba(5,220,30,${this.opacity})`,\n      blue: `rgba(5,30,220,${this.opacity})`,\n      purple: `rgba(240,5,240,${this.opacity})`,\n      yellow: `rgba(240,240,5,${this.opacity})`,\n      cyan: `rgba(5,240,240,${this.opacity})`,\n      black: `rgba(5,5,5,${this.opacity})`,\n      white: `rgba(250,250,250,${this.opacity})`,\n      joystick: {\n        base: `rgba(0,0,0,${this.opacity})`,\n        dust: `rgba(0,0,0,${this.opacity})`,\n        stick: `rgba(214,214,214,1)`,\n        ball: `rgba(245,245,245,1)`,\n      },\n    };\n    // Button Layouts\n    let buttons_layout = [\n      {\n        x: -this.radius - this.radius / 2 + this.radius / 4,\n        y: -this.radius / 4,\n        r: (3 / 4) * this.radius,\n        color: this.colours.red,\n        name: \"b\",\n      },\n      {\n        x: this.radius - this.radius / 2,\n        y: -(this.radius + this.radius / 2),\n        r: (3 / 4) * this.radius,\n        color: this.colours.green,\n        name: \"a\",\n      },\n      {\n        x: this.radius - this.radius / 2,\n        y: this.radius,\n        r: (3 / 4) * this.radius,\n        color: this.colours.blue,\n        name: \"x\",\n      },\n      {\n        x: this.radius * 3 - this.radius / 2 - this.radius / 4,\n        y: 0 - this.radius / 4,\n        r: (3 / 4) * this.radius,\n        color: this.colours.yellow,\n        name: \"y\",\n      },\n    ];\n    if (this.start) {\n      buttons_layout.push({\n        color: this.colours.black,\n        y: -55,\n        w: 50,\n        h: 15,\n        name: \"start\",\n      });\n    }\n    if (this.select) {\n      buttons_layout.push({\n        y: -55,\n        w: 50,\n        h: 15,\n        color: this.colours.black,\n        name: \"select\",\n      });\n    }\n    // setup controller\n    this.buttons_layout = buttons_layout;\n    this.controller = new Controller(\n      ctx,\n      buttons_layout,\n      this.button_offset,\n      this.map,\n      this.touches,\n      this.start,\n      this.select,\n      this.colours,\n      this\n    );\n    // use custom round Rect shape\n  }\n  // initialize widget\n  init(options = {}) {\n    console.log(\"initing\");\n    this.setOptions(options);\n    this.resize();\n    this.loadCanvas();\n  }\n\n  // check input status\n  checkInput() {\n    return this.map;\n  }\n\n  // Handle resize (TODO - needs work)\n  resize() {\n    this.width = this.ctx.canvas.width;\n    this.height = this.ctx.canvas.height;\n    this.controller.init();\n  }\n\n  // setup canvas\n  loadCanvas() {\n    let { ctx, controller, width, height } = this;\n    ctx.fillStyle = \"rgba(70,70,70,0.5)\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.font = \"minecraftia 14px\";\n    ctx.fillText(\"loading\", width / 2, height / 2);\n    controller.stick.draw();\n    controller.buttons.draw();\n    window.addEventListener(\"resize\", () => this.resize());\n    setTimeout(function () {\n      this.ready = true;\n    }, 250);\n  }\n\n  // Apply options\n  setOptions(options) {\n    Object.keys(this).forEach((key) => {\n      if (options[key] !== undefined) {\n        this[key] = options[key];\n        this.dirty = true;\n      }\n    });\n  }\n\n  // Event Listener\n  listen(e) {\n    let { ctx, touches, controller, buttons_layout } = this;\n    if (e.type) {\n      var type = e.type;\n      if (e.type.indexOf(\"mouse\") != -1) {\n        e.identifier = \"desktop\";\n        e = { touches: [e] };\n      }\n      let offset = this.getPosition(ctx.canvas);\n      for (var n = 0; n < (e.touches.length > 5 ? 5 : e.touches.length); n++) {\n        var id = e.touches[n].identifier;\n        if (!touches[id]) {\n          touches[id] = {\n            x: e.touches[n].pageX - offset.x,\n            y: e.touches[n].pageY - offset.y,\n          };\n        } else {\n          touches[id].x = e.touches[n].pageX - offset.x;\n          touches[id].y = e.touches[n].pageY - offset.y;\n        }\n      }\n\n      for (var id in touches) {\n        switch (type) {\n          case \"touchstart\":\n          case \"touchmove\":\n            this.disableScroll();\n            controller.stick.state(id);\n            for (var n = 0; n < buttons_layout.length; n++) {\n              controller.buttons.state(id, n);\n            }\n            break;\n          case \"mousedown\":\n          case \"mousemove\":\n          case \"mouseup\":\n            controller.stick.state(id, type);\n            for (var n = 0; n < buttons_layout.length; n++) {\n              controller.buttons.state(id, n, type);\n            }\n            break;\n        }\n      }\n\n      if (e.type == \"touchend\") {\n        var id = e.changedTouches[0].identifier;\n        if (touches[id].id == \"stick\") {\n          controller.stick.reset();\n        }\n        for (var n = 0; n < buttons_layout.length; n++) {\n          if (touches[id].id == buttons_layout[n].name) {\n            controller.buttons.reset(n);\n          }\n        }\n        if (touches[id]) {\n          delete touches[id];\n        }\n\n        if (e.changedTouches.length > e.touches.length) {\n          var length = 0;\n          var delta = e.changedTouches.length - e.touches.length;\n          for (var id in touches) {\n            if (length >= delta) {\n              delete touches[id];\n            }\n            length++;\n          }\n        }\n        if (e.touches.length == 0) {\n          touches = {};\n          for (var n = 0; n < buttons_layout.length; n++) {\n            controller.buttons.reset(n);\n          }\n          controller.stick.reset();\n        }\n\n        // Enable Scroll Again\n        this.enableScroll();\n      }\n    } else {\n      var keys = e;\n      var dir = 0;\n      for (var prop in keys) {\n        switch (prop) {\n          case \"%\": //left\n            if (keys[prop]) {\n              dir += 1;\n            }\n            break;\n          case \"&\": //up\n            if (keys[prop]) {\n              dir += 2;\n            }\n            break;\n          case \"'\": //right\n            if (keys[prop]) {\n              dir += 4;\n            }\n            break;\n          case \"(\": //down\n            if (keys[prop]) {\n              dir += 8;\n            }\n            break;\n          default:\n            if (keys[prop]) {\n              for (var n = 0; n < buttons_layout.length; n++) {\n                if (buttons_layout[n].key) {\n                  if (buttons_layout[n].key == prop) {\n                    touches[buttons_layout[n].name] = {\n                      id: buttons_layout[n].name,\n                      x: buttons_layout[n][\"hit\"].x[0] + buttons_layout[n].w / 2,\n                      y: buttons_layout[n][\"hit\"].y[0] + buttons_layout[n].h / 2,\n                    };\n                    controller.buttons.state(buttons_layout[n].name, n, \"mousedown\");\n                  }\n                }\n              }\n            } else {\n              if (!keys[prop]) {\n                for (var n = 0; n < buttons_layout.length; n++) {\n                  if (buttons_layout[n].key) {\n                    if (buttons_layout[n].key == prop) {\n                      controller.buttons.reset(n);\n                      delete touches[buttons_layout[n].name];\n                    }\n                  }\n                }\n                delete keys[prop];\n              }\n            }\n            break;\n        }\n        controller.stick.dx = controller.stick.x;\n        controller.stick.dy = controller.stick.y;\n        switch (dir) {\n          case 1: //left\n            controller.stick.dx = controller.stick.x - controller.stick.radius / 2;\n            break;\n          case 2: //up\n            controller.stick.dy = controller.stick.y - controller.stick.radius / 2;\n            break;\n          case 3: //left up\n            controller.stick.dx = controller.stick.x - controller.stick.radius / 2;\n            controller.stick.dy = controller.stick.y - controller.stick.radius / 2;\n            break;\n          case 4: //right\n            controller.stick.dx = controller.stick.x + controller.stick.radius / 2;\n            break;\n          case 6: //right up\n            controller.stick.dx = controller.stick.x + controller.stick.radius / 2;\n            controller.stick.dy = controller.stick.y - controller.stick.radius / 2;\n            break;\n          case 8: //down\n            controller.stick.dy = controller.stick.y + controller.stick.radius / 2;\n            break;\n          case 9: //left down\n            controller.stick.dx = controller.stick.x - controller.stick.radius / 2;\n            controller.stick.dy = controller.stick.y + controller.stick.radius / 2;\n            break;\n          case 12: //right down\n            controller.stick.dx = controller.stick.x + controller.stick.radius / 2;\n            controller.stick.dy = controller.stick.y + controller.stick.radius / 2;\n            break;\n          default:\n            controller.stick.dx = controller.stick.x;\n            controller.stick.dy = controller.stick.y;\n            break;\n        }\n        if (dir != 0) {\n          touches[\"stick\"] = { id: \"stick\" };\n          controller.stick.state(\"stick\", \"mousemove\");\n        } else {\n          controller.stick.reset();\n          delete touches[\"stick\"];\n        }\n      }\n    }\n\n    return this.map;\n  }\n\n  // Draw\n  render() {\n    let { ctx } = this;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    if (this.showDebug) {\n      this.debug();\n    }\n    if (this.showTrace) {\n      this.trace();\n    }\n    this.controller.stick.draw();\n    this.controller.buttons.draw();\n  }\n\n  // debug information\n  debug() {\n    let { ctx, map, touches } = this;\n    this.dy = 30;\n    ctx.fillStyle = \"rgba(70,70,70,0.5)\";\n    ctx.textAlign = \"left\";\n    ctx.textBaseline = \"middle\";\n    ctx.font = \"minecraftia 20px\";\n    ctx.fillText(\"debug\", 10, this.dy);\n    ctx.font = \"minecraftia 14px\";\n    this.dy += 5;\n    for (var prop in touches) {\n      this.dy += 10;\n      let text = prop + \" : \" + JSON.stringify(touches[prop]).slice(1, -1);\n      ctx.fillText(text, 10, this.dy);\n    }\n  }\n\n  // map trace output\n  trace() {\n    let { ctx, map } = this;\n    this.dy = 30;\n    ctx.fillStyle = \"rgba(70,70,70,0.5)\";\n    ctx.textAlign = \"right\";\n    ctx.textBaseline = \"middle\";\n    ctx.font = \"minecraftia 20px\";\n    ctx.fillText(\"trace\", this.width - 10, this.dy);\n    ctx.font = \"minecraftia 14px\";\n    this.dy += 5;\n    for (var prop in map) {\n      this.dy += 10;\n      let text = prop + \" : \" + map[prop];\n      ctx.fillText(text, this.width - 10, this.dy);\n    }\n  }\n\n  // get position with correct offset\n  getPosition(element) {\n    var xPosition = 0;\n    var yPosition = 0;\n\n    while (element) {\n      xPosition += element.offsetLeft - element.scrollLeft + element.clientLeft;\n      yPosition += element.offsetTop - element.scrollTop + element.clientTop;\n      element = element.offsetParent;\n    }\n    return { x: xPosition, y: yPosition };\n  }\n\n  // disable scroll while touching canvas\n  enableScroll() {\n    document.body.removeEventListener(\"touchmove\", this.preventDefault);\n  }\n\n  // reenable once done\n  disableScroll() {\n    document.body.addEventListener(\"touchmove\", this.preventDefault, { passive: false });\n    // document.body.addEventListener(\"touchstart\", this.preventDefault, { passive: false });\n  }\n\n  // stop event\n  preventDefault(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n}\n\n// Controller Manager for Gamepad\nclass Controller {\n  constructor(ctx, buttons_layout, button_offset, map, touches, start, select, colours, gamepad) {\n    this.ctx = ctx;\n    this.gamepad = gamepad\n    this.width = ctx.canvas.width;\n    this.height = ctx.canvas.height;\n    this.radius = 60;\n    this.touches = touches;\n    this.map = map;\n    this.start = start;\n    this.select = select;\n    this.buttons_layout = buttons_layout;\n    this.button_offset = button_offset;\n    this.colours = colours;\n    this.layout = { x: this.width - this.button_offset.x, y: this.height - this.button_offset.y };\n    this.stick = new ControllerStick(this.ctx, this.layout, this.map, this.touches, this.colours, this.radius, this.gamepad);\n    this.buttons = new ControllerButtons(\n      this.ctx,\n      this.layout,\n      buttons_layout,\n      this.map,\n      this.touches,\n      this.start,\n      this.select,\n      this.colours,\n      this.radius,\n      this.gamepad\n    );\n    console.log(\"loading Controller Manager - \", this);\n  }\n  // Initialize\n  init() {\n    this.stick.init();\n    this.buttons.init();\n  }\n  // draw\n  draw() {\n    this.stick.draw();\n    this.buttons.draw();\n  }\n}\n\n// Controller Joystick Manager\nclass ControllerStick {\n  constructor(ctx, layout, map, touches, colours, radius, gamepad) {\n    this.ctx = ctx;\n    this.gamepad = gamepad;\n    this.map = map;\n    this.width = ctx.canvas.width;\n    this.height = ctx.canvas.height;\n    this.layout = layout;\n    this.touches = touches;\n    this.radius = radius;\n    this.x = 0;\n    this.y = 0;\n    this.dx = 0;\n    this.dy = 0;\n    this.gamepad.map[\"x-dir\"] = 0;\n    this.gamepad.map[\"y-dir\"] = 0;\n    this.gamepad.map[\"x-axis\"] = 0;\n    this.gamepad.map[\"y-axis\"] = 0;\n    this.colours = colours;\n    this.init = this.init.bind(this);\n    this.draw = this.draw.bind(this);\n    console.log(\"loading Controller Joystick - \", this);\n  }\n  // Initialize\n  init() {\n    let { map, layout, width, ctx } = this;\n    this.x = width - layout.x;\n    this.y = layout.y + (3 * this.radius) / 8;\n    this.dx = this.x;\n    this.dy = this.y;\n    this.gamepad.map[\"x-dir\"] = 0;\n    this.gamepad.map[\"y-dir\"] = 0;\n    this.gamepad.map[\"x-axis\"] = 0;\n    this.gamepad.map[\"y-axis\"] = 0;\n  }\n  // draw joystick\n  draw() {\n    let { ctx } = this;\n    ctx.fillStyle = this.colours.joystick.base;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI, false);\n    ctx.fill();\n    ctx.closePath();\n\n    ctx.fillStyle = this.colours.joystick.dust;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius - 5, 0, 2 * Math.PI, false);\n    ctx.fill();\n    ctx.closePath();\n\n    ctx.fillStyle = this.colours.joystick.stick;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, 10, 0, 2 * Math.PI, false);\n    ctx.fill();\n    ctx.closePath();\n\n    ctx.fillStyle = this.colours.joystick.ball;\n    ctx.beginPath();\n    ctx.arc(this.dx, this.dy, this.radius - 10, 0, 2 * Math.PI, false);\n    ctx.fill();\n    ctx.closePath();\n  }\n  // manage event state\n  state(id, type) {\n    let {gamepad } = this;\n    let { touches, map, checkInput } = gamepad;\n    var touch = {\n      x: touches[id].x,\n      y: touches[id].y,\n    };\n    var dx = parseInt(touch.x - this.x);\n    var dy = parseInt(touch.y - this.y);\n    var dist = parseInt(Math.sqrt(dx * dx + dy * dy));\n    if (dist < this.radius * 1.5) {\n      if (!type) {\n        touches[id].id = \"stick\";\n      } else {\n        switch (type) {\n          case \"mousedown\":\n            touches[id].id = \"stick\";\n            break;\n          case \"mouseup\":\n            delete touches[id].id;\n            this.reset();\n            break;\n        }\n      }\n    }\n    if (touches[id].id == \"stick\") {\n      if (Math.abs(parseInt(dx)) < this.radius / 2) {\n        this.dx = this.x + dx;\n      }\n      if (Math.abs(parseInt(dy)) < this.radius / 2) {\n        this.dy = this.y + dy;\n      }\n      map[\"x-axis\"] = (this.dx - this.x) / (this.radius / 2);\n      map[\"y-axis\"] = (this.dy - this.y) / (this.radius / 2);\n      map[\"x-dir\"] = Math.round(map[\"x-axis\"]);\n      map[\"y-dir\"] = Math.round(map[\"y-axis\"]);\n\n      if (dist > this.radius * 1.5) {\n        this.reset();\n        delete touches[id].id;\n      }\n      if (typeof checkInput === \"function\") {\n        this.gamepad.checkInput();\n      }\n    }\n  }\n  // reset state\n  reset() {\n    let { map } = this.gamepad;\n    this.dx = this.x;\n    this.dy = this.y;\n    map[\"x-dir\"] = 0;\n    map[\"y-dir\"] = 0;\n    map[\"x-axis\"] = 0;\n    map[\"y-axis\"] = 0;\n  }\n}\n\n// Controller Button Manager\nclass ControllerButtons {\n  constructor(ctx, layout, buttons_layout, map, touches, start, select, colours, radius, gamepad) {\n    this.ctx = ctx;\n    this.gamepad = gamepad;\n    this.layout = layout;\n    this.map = map;\n    this.radius = radius;\n    this.touches = touches;\n    this.buttons_layout = buttons_layout;\n    this.start = start;\n    this.select = select;\n    this.colours = colours;\n    console.log(\"loading Controller Buttons - \", this);\n  }\n  // Initialize\n  init() {\n    let { buttons_layout, layout, ctx } = this;\n    let width = ctx.canvas.width;\n    for (var n = 0; n < buttons_layout.length; n++) {\n      var button = buttons_layout[n];\n      var x = layout.x - button.x;\n      var y = layout.y - button.y;\n      if (button.r) {\n        var r = button.r;\n        buttons_layout[n][\"hit\"] = { x: [x - r, x + r * 2], y: [y - r, y + r * 2], active: false };\n      } else {\n        button.x = width / 2 - button.w;\n        if (this.start && this.select) {\n          switch (button.name) {\n            case \"select\":\n              button.x = width / 2 - button.w - button.h * 2;\n              break;\n            case \"start\":\n              button.x = width / 2;\n              break;\n          }\n        }\n        var x = button.x;\n        var y = layout.y - button.y;\n        buttons_layout[n][\"hit\"] = { x: [x, x + button.w], y: [y, y + button.h], active: false };\n      }\n      this.gamepad.map[button.name] = 0;\n    }\n  }\n  // render Button\n  draw() {\n    let { ctx, layout } = this;\n    for (var n = 0; n < this.buttons_layout.length; n++) {\n      var button = this.buttons_layout[n];\n      var color = button.color;\n      var x = layout.x - button.x;\n      var y = layout.y - button.y;\n      button.dx = x;\n      button.dy = y;\n\n      if (button.r) {\n        var r = button.r;\n\n        if (button.hit) {\n          if (button.hit.active) {\n            ctx.fillStyle = color;\n            ctx.beginPath();\n            ctx.arc(x, y, r + 5, 0, 2 * Math.PI, false);\n            ctx.fill();\n            ctx.closePath();\n          }\n        }\n\n        ctx.fillStyle = color;\n        ctx.beginPath();\n        ctx.arc(x, y, r, 0, 2 * Math.PI, false);\n        ctx.fill();\n        ctx.closePath();\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 2;\n        ctx.stroke();\n\n        ctx.fillStyle = \"rgba(255,255,255,1)\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.font = \"minecraftia 12px\";\n        ctx.fillText(button.name, x, y);\n      } else {\n        var w = button.w;\n        var h = button.h;\n        var x = isNaN(button.x) ? ctx.canvas.width / 2 : button.x;\n        var r = 10;\n        ctx.fillStyle = color;\n        if (button.hit) {\n          if (button.hit.active) {\n            ctx.roundRect(x - 5, y - 5, w + 10, h + 10, r * 2).fill();\n          }\n        }\n        ctx.roundRect(x, y, w, h, r).fill();\n\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        ctx.fillStyle = \"rgba(0,0,0,0.5)\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.font = \"minecraftia 12px\";\n        ctx.fillText(button.name, x + w / 2, y + h * 2);\n      }\n\n      if (button.key && hint) {\n        ctx.fillStyle = \"rgba(0,0,0,0.25)\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.font = \"minecraftia 12px\";\n        if (button.name == \"start\" || button.name == \"select\") {\n          x += w / 2;\n        }\n        ctx.fillText(button.key, x, y - r * 1.5);\n      }\n    }\n  }\n  // State of Buttons\n  state(id, n, type) {\n    let {gamepad} = this;\n    let { touches, checkInput, width } = gamepad;\n    if (touches[id].id != \"stick\") {\n      var touch = {\n        x: touches[id].x,\n        y: touches[id].y,\n      };\n      var button = this.buttons_layout[n];\n      var name = button.name;\n\n      var dx = parseInt(touch.x - button.dx);\n      var dy = parseInt(touch.y - button.dy);\n      var dist = width;\n      if (button.r) {\n        dist = parseInt(Math.sqrt(dx * dx + dy * dy));\n      } else {\n        if (touch.x > button.hit.x[0] && touch.x < button.hit.x[1] && touch.y > button.hit.y[0] && touch.y < button.hit.y[1]) {\n          dist = 0;\n        }\n      }\n      if (dist < this.radius && touches[id].id != \"stick\") {\n        if (!type) {\n          touches[id].id = name;\n        } else {\n          switch (type) {\n            case \"mousedown\":\n              touches[id].id = name;\n              break;\n            case \"mouseup\":\n              delete touches[id].id;\n              this.reset(n);\n              break;\n          }\n        }\n      }\n      if (touches[id].id == name) {\n        this.gamepad.map[name] = 1;\n        button.hit.active = true;\n        if (dist > this.radius) {\n          button.hit.active = false;\n          this.gamepad.map[name] = 0;\n          delete touches[id].id;\n        }\n        if (typeof checkInput === \"function\") {\n          this.gamepad.checkInput();\n        }\n      }\n    }\n  }\n  // Reset State\n  reset(n) {\n    var button = this.buttons_layout[n];\n    var name = button.name;\n    button.hit.active = false;\n    this.gamepad.map[name] = 0;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport ActionQueue from \"./queue.jsx\";\nimport { textScrollBox } from \"./hud.jsx\";\nexport default class Speech {\n  constructor(canvas, engine, id) {\n    this.id = id;\n    this.engine = engine;\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n    this.glTexture = engine.gl.createTexture();\n    this.loaded = false;\n    this.onLoadActions = new ActionQueue();\n    this.loadImage();\n  }\n\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // Load Texture from Image\n  loadImage() {\n    let { gl } = this.engine;\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.canvas); // This is the important line!\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    console.log(\"loading canvas \", this.canvas);\n    this.loaded = true;\n    this.onLoadActions.run();\n  }\n\n  // Bind texture to Uniform\n  attach() {\n    let { gl } = this.engine;\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n    gl.uniform1i(this.engine.shaderProgram.samplerUniform, 0);\n  }\n\n  // clear HUD overlay\n  clearHud() {\n    const { ctx } = this;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    this.loadImage();\n  }\n\n  // Write Text to HUD\n  writeText(text, x, y) {\n    const { ctx } = this;\n    ctx.save();\n    ctx.font = \"32px minecraftia\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillStyle = \"white\";\n    ctx.fillText(text, x ?? ctx.canvas.width / 2, y ?? ctx.canvas.height / 2);\n    ctx.restore();\n  }\n\n  // Scrolling Textbox\n  scrollText(text, scrolling = false, options = {}) {\n    let txt = new textScrollBox(this.ctx);\n    if (options.portrait) {\n      txt.init(text, 10, 10, this.canvas.width - 20 - 84, (2 * this.canvas.height) / 3 - 20, options);\n    } else {\n      txt.init(text, 10, 10, this.canvas.width - 20, (2 * this.canvas.height) / 3 - 20, options);\n    }\n    txt.setOptions(options);\n    if (scrolling) {\n      txt.scroll((Math.sin(new Date().getTime() / 3000) + 1) * txt.maxScroll * 0.5); // default oscillate\n    }\n    txt.render();\n    return txt;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport { create, create3, normalFromMat4, rotate, translate, perspective, set } from \"../utils/math/matrix4.jsx\";\nimport { Vector, negate } from \"../utils/math/vector.jsx\";\nimport { Texture, ColorTexture } from \"./texture.jsx\";\nimport { textScrollBox } from \"./hud.jsx\";\nimport { GamePad } from \"../utils/gamepad.jsx\";\nimport Speech from \"./speech.jsx\";\nimport { OBJ } from \"../utils/obj\";\nexport default class GLEngine {\n  constructor(canvas, hud, mipmap, gamepadcanvas, width, height) {\n    this.uViewMat = create();\n    this.uProjMat = create();\n    this.normalMat = create3();\n    this.scale = new Vector(1, 1, 1);\n    this.canvas = canvas;\n    this.hud = hud;\n    this.gamepadcanvas = gamepadcanvas;\n    this.mipmap = mipmap;\n    this.width = width;\n    this.height = height;\n    this.modelViewMatrixStack = [];\n    this.globalStore = {};\n    this.textures = [];\n    this.speeches = [];\n    this.cameraAngle = 45;\n    this.fov = 45;\n    this.cameraPosition = new Vector(8, 8, -1);\n    this.cameraOffset = new Vector(0, 0, 0);\n    this.setCamera = this.setCamera.bind(this);\n    this.render = this.render.bind(this);\n    this.objLoader = OBJ;\n  }\n\n  // Initialize a Scene object\n  async init(scene, keyboard) {\n    // set up canvas\n    const ctx = this.hud.getContext(\"2d\");\n    const gl = this.canvas.getContext(\"webgl\");\n    const gp = this.gamepadcanvas.getContext(\"2d\");\n    if (!gl) {\n      throw new Error(\"WebGL : unable to initialize\");\n    }\n    if (!ctx) {\n      throw new Error(\"Canvas : unable to initialize HUD\");\n    }\n    if (!gp) {\n      throw new Error(\"Gamepad : unable to initialize Mobile Canvas\");\n    }\n    this.gl = gl;\n    this.ctx = ctx;\n    this.gp = gp;\n    this.time = new Date().getTime();\n    this.scene = scene;\n    this.keyboard = keyboard;\n    this.fullscreen = false;\n    // Configure Mobile Gamepad (if Mobile)\n    let gamepad = new GamePad(gp);\n    gamepad.init();\n    this.touch = gamepad.listen.bind(gamepad);\n    this.gamepad = gamepad;\n    // Configure HUD\n    ctx.canvas.width = this.canvas.width;\n    ctx.canvas.height = this.canvas.height;\n    // Configure GL\n    gl.viewportWidth = this.canvas.width;\n    gl.viewportHeight = this.canvas.height;\n    gl.clearColor(0, 1.0, 0, 1.0);\n    gl.clearDepth(1.0);\n    gl.enable(gl.DEPTH_TEST);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    gl.enable(gl.BLEND);\n    this.initializedWebGl = true; // flag\n    // Initialize Shader\n    this.initShaderProgram(gl, scene.shaders);\n    // Initialize Project Matrix\n    this.initProjection(gl);\n    // Initialize Scene\n    await scene.init(this);\n  }\n\n  // Load and Compile Shader Source\n  loadShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    // if error clear\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      const log = gl.getShaderInfoLog(shader);\n      gl.deleteShader(shader);\n      throw new Error(`An error occurred compiling the shaders: ${log}`);\n    }\n    return shader;\n  }\n\n  // Initialize Shader Program\n  initShaderProgram = (gl, { vs: vsSource, fs: fsSource }) => {\n    const self = this;\n    const vertexShader = this.loadShader(gl, gl.VERTEX_SHADER, vsSource);\n    const fragmentShader = this.loadShader(gl, gl.FRAGMENT_SHADER, fsSource);\n    // generate shader\n    let shaderProgram = gl.createProgram();\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n    gl.linkProgram(shaderProgram);\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n      throw new Error(`WebGL unable to initialize the shader program: ${shaderProgram}`);\n    }\n    // Configure Shader\n    gl.useProgram(shaderProgram);\n    // Normals (needs work)\n    shaderProgram.aVertexNormal = gl.getAttribLocation(shaderProgram, \"aVertexNormal\");\n    gl.enableVertexAttribArray(shaderProgram.aVertexNormal);\n    // diffuse\n    shaderProgram.aDiffuse = gl.getAttribLocation(shaderProgram, \"aDiffuse\");\n    gl.enableVertexAttribArray(shaderProgram.aDiffuse);\n    // specular\n    shaderProgram.aSpecular = gl.getAttribLocation(shaderProgram, \"aSpecular\");\n    gl.enableVertexAttribArray(shaderProgram.aSpecular);\n    // specular Exponent\n    shaderProgram.aSpecularExponent = gl.getAttribLocation(shaderProgram, \"aSpecularExponent\");\n    gl.enableVertexAttribArray(shaderProgram.aSpecularExponent);\n    // Vertices\n    shaderProgram.aVertexPosition = gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\n    gl.enableVertexAttribArray(shaderProgram.aVertexPosition);\n    // Texture Coord\n    shaderProgram.aTextureCoord = gl.getAttribLocation(shaderProgram, \"aTextureCoord\");\n    gl.enableVertexAttribArray(shaderProgram.aTextureCoord);\n    // Uniform Locations\n    shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, \"uPMatrix\");\n    shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, \"uMVMatrix\");\n    shaderProgram.nMatrixUniform = gl.getUniformLocation(shaderProgram, \"uNormalMatrix\");\n    shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, \"uSampler\");\n    shaderProgram.scale = gl.getUniformLocation(shaderProgram, \"u_scale\");\n    shaderProgram.useSampler = gl.getUniformLocation(shaderProgram, \"useSampler\");\n    // Uniform apply\n    shaderProgram.setMatrixUniforms = function (scale = null, sampler = 1.0) {\n      gl.uniformMatrix4fv(this.pMatrixUniform, false, self.uProjMat);\n      gl.uniformMatrix4fv(this.mvMatrixUniform, false, self.uViewMat);\n      // normal\n      self.normalMat = create3();\n      normalFromMat4(self.normalMat, self.uViewMat);\n      gl.uniformMatrix3fv(this.nMatrixUniform, false, self.normalMat);\n      // scale\n      gl.uniform3fv(this.scale, scale ? scale.toArray() : self.scale.toArray());\n      // use sampler or materials?\n      gl.uniform1f(this.useSampler, sampler);\n    };\n\n    const attrs = {\n      aVertexPosition: OBJ.Layout.POSITION.key,\n      aVertexNormal: OBJ.Layout.NORMAL.key,\n      aTextureCoord: OBJ.Layout.UV.key,\n      aDiffuse: OBJ.Layout.DIFFUSE.key,\n      aSpecular: OBJ.Layout.SPECULAR.key,\n      aSpecularExponent: OBJ.Layout.SPECULAR_EXPONENT.key,\n    };\n    shaderProgram.applyAttributePointers = function (model) {\n      const layout = model.mesh.vertexBuffer.layout;\n      for (const attrName in attrs) {\n        if (!attrs.hasOwnProperty(attrName) || shaderProgram[attrName] == -1) {\n          continue;\n        }\n        const layoutKey = attrs[attrName];\n        if (shaderProgram[attrName] != -1) {\n          const attr = layout.attributeMap[layoutKey];\n          gl.vertexAttribPointer(shaderProgram[attrName], attr.size, gl[attr.type], attr.normalized, attr.stride, attr.offset);\n        }\n      }\n    };\n\n    gl.disableVertexAttribArray(shaderProgram.aVertexNormal);\n    gl.disableVertexAttribArray(shaderProgram.aDiffuse);\n    gl.disableVertexAttribArray(shaderProgram.aSpecular);\n    gl.disableVertexAttribArray(shaderProgram.aSpecularExponent);\n    // return\n    this.shaderProgram = shaderProgram;\n    return shaderProgram;\n  };\n\n  // Set FOV and Perspective\n  initProjection(gl) {\n    const fieldOfView = this.degToRad(this.fov);\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n    const zNear = 0.1;\n    const zFar = 100.0;\n    this.uProjMat = perspective(fieldOfView, aspect, zNear, zFar);\n    this.uViewMat = create();\n    this.uProjMat[5] *= -1;\n  }\n\n  // Set Camera Pos & Angle\n  setCamera() {\n    translate(this.uViewMat, this.uViewMat, [0.0, 0.0, -15.0]);\n    rotate(this.uViewMat, this.uViewMat, this.degToRad(this.cameraAngle), [1, 0, 0]);\n    negate(this.cameraPosition, this.cameraOffset);\n    translate(this.uViewMat, this.uViewMat, this.cameraOffset.toArray());\n  }\n\n  // Clear Screen with Color (RGBA)\n  clearScreen() {\n    const { gl } = this;\n    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    perspective(this.degToRad(this.fov), gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, this.uProjMat);\n    this.uViewMat = create();\n  }\n\n  // clear HUD overlay\n  clearHud() {\n    const { ctx } = this;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  }\n\n  // Write Text to HUD\n  writeText(text, x, y, src = null) {\n    const { ctx } = this;\n    ctx.save();\n    ctx.font = \"20px invasion2000\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillStyle = \"white\";\n    if (src) {\n      // draw portrait if set\n      ctx.fillText(text, x ?? ctx.canvas.width / 2 + 76, y ?? ctx.canvas.height / 2);\n      ctx.drawImage(src, x ?? ctx.canvas.width / 2, y ?? ctx.canvas.height / 2, 76, 76);\n    } else {\n      ctx.fillText(text, x ?? ctx.canvas.width / 2, y ?? ctx.canvas.height / 2);\n    }\n    ctx.restore();\n  }\n\n  // Greeting Text\n  setGreeting(text) {\n    this.globalStore.greeting = text;\n  }\n\n  // Scrolling Textbox\n  scrollText(text, scrolling = false, options = {}) {\n    let txt = new textScrollBox(this.ctx);\n    txt.init(text, 10, (2 * this.canvas.height) / 3, this.canvas.width - 20, this.canvas.height / 3 - 20, options);\n    txt.setOptions(options);\n    if (scrolling) {\n      txt.scroll((Math.sin(new Date().getTime() / 3000) + 1) * txt.maxScroll * 0.5); // default oscillate\n    }\n    txt.render();\n    return txt;\n  }\n\n  // Draws a button\n  drawButton(x, y, w, h, colours) {\n    const { ctx } = this;\n\n    let halfHeight = h / 2;\n\n    ctx.save();\n\n    // draw the button\n    ctx.fillStyle = colours.background;\n\n    ctx.beginPath();\n    ctx.rect(x, y, w, h);\n    ctx.rect(x, y, w, h);\n    ctx.fill();\n    ctx.clip();\n\n    // light gradient\n    var grad = ctx.createLinearGradient(x, y, x, y + halfHeight);\n    grad.addColorStop(0, \"rgb(221,181,155)\");\n    grad.addColorStop(1, \"rgb(22,13,8)\");\n    ctx.fillStyle = grad;\n    ctx.globalAlpha = 0.5;\n    ctx.fillRect(x, y, w, h);\n\n    // draw the top half of the button\n    ctx.fillStyle = colours.top;\n\n    // draw the top and bottom particles\n    for (var i = 0; i < h; i += halfHeight) {\n      ctx.fillStyle = i === 0 ? colours.top : colours.bottom;\n\n      for (var j = 0; j < 50; j++) {\n        // get random values for particle\n        var partX = x + Math.random() * w;\n        var partY = y + i + Math.random() * halfHeight;\n        var width = Math.random() * 10;\n        var height = Math.random() * 10;\n        var rotation = Math.random() * 360;\n        var alpha = Math.random();\n\n        ctx.save();\n\n        // rotate the canvas by 'rotation'\n        ctx.translate(partX, partY);\n        ctx.rotate((rotation * Math.PI) / 180);\n        ctx.translate(-partX, -partY);\n\n        // set alpha transparency to 'alpha'\n        ctx.globalAlpha = alpha;\n\n        ctx.fillRect(partX, partY, width, height);\n\n        ctx.restore();\n      }\n    }\n\n    ctx.restore();\n  }\n\n  // Render Frame\n  render() {\n    this.requestId = requestAnimationFrame(this.render);\n    this.clearScreen();\n    this.clearHud();\n    this.gamepad.render();\n    this.scene.render(this, new Date().getTime());\n  }\n\n  toggleFullscreen() {\n    if (!this.fullscreen) {\n      try {\n        this.gamepadcanvas.parentElement.requestFullscreen();\n        this.fullscreen = true;\n      } catch (e) {\n        //\n      }\n    } else {\n      try {\n        document.exitFullscreen();\n      } catch (e) {\n        //\n      }\n      this.fullscreen = false;\n    }\n  }\n\n  // individual buffer\n  createBuffer(contents, type, itemSize) {\n    let { gl } = this;\n    let buf = gl.createBuffer();\n    buf.itemSize = itemSize;\n    buf.numItems = contents.length / itemSize;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buf);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(contents), type);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    return buf;\n  }\n\n  // update buffer\n  updateBuffer(buffer, contents) {\n    let { gl } = this;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, new Float32Array(contents));\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  }\n\n  // bind buffer\n  bindBuffer(buffer, attribute) {\n    let { gl } = this;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.vertexAttribPointer(attribute, buffer.itemSize, gl.FLOAT, false, 0, 0);\n  }\n\n  // load texture\n  loadTexture(src) {\n    if (this.textures[src]) return this.textures[src];\n    this.textures[src] = new Texture(src, this);\n    return this.textures[src];\n  }\n\n  // load texture\n  loadSpeech(src, canvas) {\n    console.log(\"requesting speech\", src);\n    if (this.speeches[src]) return this.speeches[src];\n    this.speeches[src] = new Speech(canvas, this, src);\n    return this.speeches[src];\n  }\n\n  // push new matrix to model stack\n  mvPushMatrix() {\n    let copy = create();\n    set(this.uViewMat, copy);\n    this.modelViewMatrixStack.push(copy);\n  }\n\n  // Initalize Canvas from HUD and load as WebGL texture (TODO - make separate canvases)\n  initCanvasTexture() {\n    let { gl } = this;\n    let canvasTexture = gl.createTexture();\n    this.handleLoadedTexture(canvasTexture, this.mipmap);\n    return canvasTexture;\n  }\n\n  // Load canvas as texture\n  handleLoadedTexture(texture, textureCanvas) {\n    let { gl } = this;\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas); // This is the important line!\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n  }\n\n  // pop model stack and apply view\n  mvPopMatrix() {\n    if (this.modelViewMatrixStack.length == 0) {\n      throw \"Invalid popMatrix!\";\n    }\n    this.uViewMat = this.modelViewMatrixStack.pop();\n  }\n\n  // Clear Render Loop\n  close() {\n    cancelAnimationFrame(this.requestId);\n  }\n\n  // Degrees to Radians\n  degToRad(degrees) {\n    return (degrees * Math.PI) / 180;\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default class Keyboard {\n  constructor() {\n    // Instance\n    if (!Keyboard._instance) {\n      this.activeKeys = [];\n      this.activeCodes = [];\n      this.shift = false;\n      Keyboard._instance = this;\n    }\n    return Keyboard._instance;\n  }\n\n  onKeyDown(e) {\n    e.preventDefault();\n    let c = String.fromCharCode(e.keyCode).toLowerCase();\n    if (Keyboard._instance.activeKeys.indexOf(c) < 0) Keyboard._instance.activeKeys.push(c);\n    if (Keyboard._instance.activeCodes.indexOf(e.key) < 0) Keyboard._instance.activeCodes.push(e.key);\n    Keyboard._instance.shift = e.shiftKey;\n  }\n\n  onKeyUp(e) {\n    let c = String.fromCharCode(e.keyCode).toLowerCase();\n    let index = Keyboard._instance.activeKeys.indexOf(c);\n    Keyboard._instance.activeKeys.splice(index, 1);\n    Keyboard._instance.activeCodes.splice(index, 1);\n  }\n\n  // Return the last pressed key from provided keys\n  lastPressed(keys) {\n    let lower = keys.toLowerCase();\n    let max = null;\n    let maxI = -1;\n    for (let i = 0; i < keys.length; i++) {\n      let k = lower[i];\n      let index = Keyboard._instance.activeKeys.indexOf(k);\n      if (index > maxI) {\n        max = k;\n        maxI = index;\n      }\n    }\n    return max;\n  }\n\n  // Return the last pressed key in keys\n  lastPressedCode(ignore = \"\") {\n    let last = Keyboard._instance.activeCodes.pop();\n    let lower = ignore.toLowerCase();\n    for (let i = 0; i < lower.length; i++) {\n        let index = Keyboard._instance.activeKeys.indexOf(last);\n        if(index < 0){\n          last = Keyboard._instance.activeCodes.pop();\n        }\n    }\n    return last ;\n  }\n\n  // Return the last pressed key in keys\n  lastPressedKey() {\n    return Keyboard._instance.activeKeys[Keyboard._instance.activeKeys.length-1];\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport glEngine from \"../engine/core/index.jsx\";\nimport Keyboard from \"../engine/utils/keyboard.jsx\";\nimport { minecraftia } from \"../engine/core/hud.jsx\";\n//\nconst WebGLView = ({ width, height, SceneProvider, class: string }) => {\n  // Canvas\n  const ref = useRef();\n  const hudRef = useRef();\n  const gamepadRef = useRef();\n  const mmRef = useRef();\n  let keyboard = new Keyboard();\n  let onKeyEvent = SceneProvider.onKeyEvent;\n  let onTouchEvent = SceneProvider.onTouchEvent;\n\n  // Resize\n  const [screenSize, getDimension] = useState({\n    dynamicWidth: window.innerWidth,\n    dynamicHeight: window.innerHeight,\n  });\n\n  const setDimension = () => {\n    getDimension({\n      dynamicWidth: window.innerWidth,\n      dynamicHeight: window.innerHeight,\n    });\n  };\n\n  // load fonts\n  async function loadFonts() {\n    await minecraftia.load();\n    document.fonts.add(minecraftia);\n  }\n\n  useEffect(async () => {\n    // handle resize\n    window.addEventListener(\"resize\", setDimension);\n    // setup canvases\n    const canvas = ref.current;\n    const hud = hudRef.current;\n    const mipmap = mmRef.current;\n    const gamepad = gamepadRef.current;\n    // Webgl Engine\n    const engine = new glEngine(canvas, hud, mipmap, gamepad, width, height);\n    // load fonts\n    await loadFonts();\n    // Initialize Scene\n    await engine.init(SceneProvider, keyboard);\n    // render loop\n    engine.render();\n    // cleanup\n    return () => {\n      window.removeEventListener(\"resize\", setDimension);\n      engine.close();\n    };\n  }, [SceneProvider]);\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        padding: \"none\",\n        background: \"slategrey\",\n        width: \"100%\",\n        maxWidth: width,\n        maxHeight: height + 200,\n      }}\n      onKeyDownCapture={(e) => onKeyEvent(e.nativeEvent)}\n      onKeyUpCapture={(e) => onKeyEvent(e.nativeEvent)}\n      tabIndex={0}\n    >\n      {/* // WEBGL - For 3D Rendering */}\n      <canvas\n        style={{ position: \"absolute\", zIndex: 1, top: 0, left: 0, maxWidth: 800 }}\n        ref={ref}\n        width={screenSize.dynamicWidth > 800 ? 800 : screenSize.dynamicWidth}\n        height={(screenSize.dynamicWidth * 3) / 4 > 600 ? 600 : (screenSize.dynamicWidth * 3) / 4}\n        className={string}\n      />\n      {/* HUD - For Dialogue / Menus / Overlays */}\n      <canvas\n        style={{ position: \"absolute\", zIndex: 2, top: 0, left: 0, background: \"none\", maxWidth: 800 }}\n        ref={hudRef}\n        width={screenSize.dynamicWidth > 800 ? 800 : screenSize.dynamicWidth}\n        height={(screenSize.dynamicWidth * 3) / 4 > 600 ? 600 : (screenSize.dynamicWidth * 3) / 4}\n        className={string}\n      />\n      {/* Gamepad - For controls on Mobile Only*/}\n      <canvas\n        style={{\n          position: \"relative\",\n          zIndex: 5,\n          top: 0,\n          left: 0,\n          background: \"none\",\n          display: screenSize.dynamicWidth <= 768 ? \"block\" : \"none\",\n          maxWidth: 800,\n        }}\n        ref={gamepadRef}\n        hidden={screenSize.dynamicWidth > 768}\n        width={screenSize.dynamicWidth > 800 ? 800 : screenSize.dynamicWidth}\n        height={(screenSize.dynamicWidth * 3) / 4 > 600 ? 800 : (screenSize.dynamicWidth * 3) / 4 + 200}\n        className={string}\n        onMouseUp={(e) => onTouchEvent(e.nativeEvent)}\n        onMouseDown={(e) => onTouchEvent(e.nativeEvent)}\n        onMouseMove={(e) => onTouchEvent(e.nativeEvent)}\n        onTouchMoveCapture={(e) => onTouchEvent(e.nativeEvent)}\n        onTouchCancelCapture={(e) => onTouchEvent(e.nativeEvent)}\n        onTouchStartCapture={(e) => onTouchEvent(e.nativeEvent)}\n        onTouchEndCapture={(e) => onTouchEvent(e.nativeEvent)}\n      />\n      {/* MIPMAP - For Sprite Text / Speech / Titles */}\n      <canvas style={{ display: \"none\" }} ref={mmRef} width={256} height={256} />\n    </div>\n  );\n};\n\nWebGLView.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  SceneProvider: PropTypes.object.isRequired,\n  class: PropTypes.string.isRequired,\n};\n\nexport default WebGLView;\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nimport { Direction } from \"../utils/enums.jsx\";\nimport Resources from \"../utils/resources.jsx\";\nimport ActionQueue from \"./queue.jsx\";\nimport { SpriteLoader, TilesetLoader, AudioLoader, ActionLoader, ObjectLoader } from \"../utils/loaders.jsx\";\nimport { rotate, translate } from \"../utils/math/matrix4.jsx\";\n\nexport default class Zone {\n  constructor(zoneId, world) {\n    this.id = zoneId;\n    this.world = world;\n    this.data = {};\n    this.spriteDict = {};\n    this.spriteList = [];\n    this.objectDict = {};\n    this.objectList = [];\n    this.lastKey = Date.now();\n    this.engine = world.engine;\n    this.onLoadActions = new ActionQueue();\n    this.spriteLoader = new SpriteLoader(world.engine);\n    this.objectLoader = new ObjectLoader(world.engine);\n    this.tsLoader = new TilesetLoader(world.engine);\n    // bind\n    this.onTilesetDefinitionLoaded = this.onTilesetDefinitionLoaded.bind(this);\n    this.onTilesetOrSpriteLoaded = this.onTilesetOrSpriteLoaded.bind(this);\n    this.loadSprite = this.loadSprite.bind(this, this);\n    this.loadObject = this.loadObject.bind(this, this);\n    this.checkInput = this.checkInput.bind(this);\n  }\n\n  // Load Map Resource from URL\n  async loadRemote() {\n    const fileResponse = await fetch(Resources.zoneRequestUrl(this.id));\n    if (fileResponse.ok) {\n      try {\n        // Extract and Read in Information\n        let data = await fileResponse.json();\n        this.bounds = data.bounds;\n        this.size = [data.bounds[2] - data.bounds[0], data.bounds[3] - data.bounds[1]];\n        this.cells = data.cells;\n        // Load tileset and create level geometry & trigger updates\n        this.tileset = await this.tsLoader.load(data.tileset);\n        this.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this));\n        this.tileset.runWhenLoaded(this.onTilesetOrSpriteLoaded.bind(this));\n        // Load sprites from tileset\n        await Promise.all(data.sprites.map(this.loadSprite.bind(this)));\n        await Promise.all(data.objects.map(this.loadObject.bind(this)));\n        // Notify the zone sprites when the new sprite has loaded\n        this.spriteList.forEach((sprite) => sprite.runWhenLoaded(this.onTilesetOrSpriteLoaded.bind(this)));\n        this.objectList.forEach((object) => object.runWhenLoaded(this.onTilesetOrSpriteLoaded.bind(this)));\n      } catch (e) {\n        console.error(\"Error parsing zone \" + this.id);\n        console.error(e);\n      }\n    }\n  }\n\n  // Load Tileset Directly (precompiled)\n  async load() {\n    try {\n      // Extract and Read in Information\n      let data = require(\"../../scene/maps/\" + this.id + \"/map.jsx\")[\"default\"];\n      Object.assign(this, data);\n      if (this.audioSrc) {\n        this.audio = new AudioLoader(this.audioSrc, true); // loop background music\n      }\n      // Load tileset and create level geometry & trigger updates\n      this.size = [this.bounds[2] - this.bounds[0], this.bounds[3] - this.bounds[1]];\n      this.tileset = await this.tsLoader.load(this.tileset);\n      this.tileset.runWhenDefinitionLoaded(this.onTilesetDefinitionLoaded.bind(this));\n      this.tileset.runWhenLoaded(this.onTilesetOrSpriteLoaded.bind(this));\n      // Load sprites\n      let self = this;\n      await Promise.all(self.sprites.map(self.loadSprite));\n      await Promise.all(self.objects.map(self.loadObject));\n      // Notify the zone sprites when the new sprite has loaded\n      console.log(self.spriteDict, self.objectDict);\n      self.spriteList.forEach((sprite) => sprite.runWhenLoaded(self.onTilesetOrSpriteLoaded));\n      self.objectList.forEach((object) => object.runWhenLoaded(self.onTilesetOrSpriteLoaded));\n    } catch (e) {\n      console.error(\"Error parsing zone \" + this.id);\n      console.error(e);\n    }\n  }\n\n  // Actions to run when the map has loaded\n  runWhenLoaded(action) {\n    if (this.loaded) action();\n    else this.onLoadActions.add(action);\n  }\n\n  // When tileset loads\n  onTilesetDefinitionLoaded() {\n    this.vertexPosBuf = [];\n    this.vertexTexBuf = [];\n    this.walkability = [];\n    // Determine Walkability and Load Vertices\n    for (let j = 0, k = 0; j < this.size[1]; j++) {\n      let vertices = [];\n      let vertexTexCoords = [];\n      // Loop over Tiles\n      for (let i = 0; i < this.size[0]; i++, k++) {\n        let cell = this.cells[k];\n        this.walkability[k] = Direction.All;\n        let n = Math.floor(cell.length / 3);\n        // Calc Walk, Vertex positions and Textures for each cell\n        for (let l = 0; l < n; l++) {\n          let tilePos = [this.bounds[0] + i, this.bounds[1] + j, cell[3 * l + 2]];\n          this.walkability[k] &= this.tileset.getWalkability(cell[3 * l]);\n          vertices = vertices.concat(this.tileset.getTileVertices(cell[3 * l], tilePos));\n          vertexTexCoords = vertexTexCoords.concat(this.tileset.getTileTexCoords(cell[3 * l], cell[3 * l + 1]));\n        }\n        // Custom walkability\n        if (cell.length == 3 * n + 1) this.walkability[k] = cell[3 * n];\n      }\n      this.vertexPosBuf[j] = this.engine.createBuffer(vertices, this.engine.gl.STATIC_DRAW, 3);\n      this.vertexTexBuf[j] = this.engine.createBuffer(vertexTexCoords, this.engine.gl.STATIC_DRAW, 2);\n    }\n  }\n\n  // run after each tileset / sprite is loaded\n  onTilesetOrSpriteLoaded() {\n    if (\n      this.loaded ||\n      !this.tileset.loaded ||\n      !this.spriteList.every((sprite) => sprite.loaded) ||\n      !this.objectList.every((object) => object.loaded)\n    )\n      return;\n    console.log(\"Initialized zone '\" + this + \"'\");\n    // Load Scene Triggers\n    let zone = this;\n    this.scripts.forEach((x) => {\n      if (x.id === \"load-scene\") {\n        this.runWhenLoaded(x.trigger.bind(zone));\n      }\n    });\n    // loaded\n    this.loaded = true;\n    this.onLoadActions.run();\n  }\n\n  // load obj model\n  async loadObject(_this, data) {\n    data.zone = _this;\n    let newObject = await this.objectLoader.load(data, (sprite) => sprite.onLoad(sprite));\n    console.log([\"object\", this.objectDict, this.objectList, data, newObject]);\n    this.objectDict[data.id] = newObject;\n    this.objectList.push(newObject);\n  }\n\n  // Load Sprite\n  async loadSprite(_this, data) {\n    data.zone = _this;\n    let newSprite = await this.spriteLoader.load(data.type, (sprite) => sprite.onLoad(data));\n    console.log([\"sprite\", this.spriteDict, this.spriteList, data, newSprite]);\n    this.spriteDict[data.id] = newSprite;\n    this.spriteList.push(newSprite);\n  }\n\n  // Add an existing sprite to the zone\n  addSprite(sprite) {\n    sprite.zone = this;\n    this.spriteDict[sprite.id] = sprite;\n    this.spriteList.push(sprite);\n  }\n\n  // Remove an sprite from the zone\n  removeSprite(id) {\n    this.spriteList = this.spriteList.filter((sprite) => {\n      if (sprite.id !== id) {\n        return true;\n      } else {\n        sprite.removeAllActions();\n      }\n    });\n    delete this.spriteDict[id];\n  }\n\n  // Remove all sprites from the zone\n  removeAllSprites() {\n    this.spriteList = [];\n    this.spriteDict = {};\n  }\n\n  // Remove an sprite from the zone\n  getSpriteById(id) {\n    return this.spriteDict[id];\n  }\n\n  // Calculate the height of a point in the zone\n  getHeight(x, y) {\n    if (!this.isInZone(x, y)) {\n      console.error(\"Requesting height for [\" + x + \", \" + y + \"] outside zone bounds\");\n      return 0;\n    }\n\n    let i = Math.floor(x);\n    let j = Math.floor(y);\n    let dp = [x - i, y - j];\n\n    // Calculate point inside a triangle\n    let getUV = (t, p) => {\n      // Vectors relative to first vertex\n      let u = [t[1][0] - t[0][0], t[1][1] - t[0][1]];\n      let v = [t[2][0] - t[0][0], t[2][1] - t[0][1]];\n\n      // Calculate basis transformation\n      let d = 1 / (u[0] * v[1] - u[1] * v[0]);\n      let T = [d * v[1], -d * v[0], -d * u[1], d * u[0]];\n\n      // Return new coords\n      u = (p[0] - t[0][0]) * T[0] + (p[1] - t[0][1]) * T[1];\n      v = (p[0] - t[0][0]) * T[2] + (p[1] - t[0][1]) * T[3];\n      return [u, v];\n    };\n\n    // Check if any of the tiles defines a custom walk polygon\n    let cell = this.cells[(j - this.bounds[1]) * this.size[0] + i - this.bounds[0]];\n    let n = Math.floor(cell.length / 3);\n    for (let l = 0; l < n; l++) {\n      let poly = this.tileset.getTileWalkPoly(cell[3 * l]);\n      if (!poly) continue;\n\n      // Loop over triangles\n      for (let p = 0; p < poly.length; p++) {\n        let uv = getUV(poly[p], dp);\n        let w = uv[0] + uv[1];\n        if (w <= 1) return cell[3 * l + 2] + (1 - w) * poly[p][0][2] + uv[0] * poly[p][1][2] + uv[1] * poly[p][2][2];\n      }\n    }\n\n    // Use the height of the first tile in the cell\n    return cell[2];\n  }\n\n  // Draw Row of Zone\n  drawRow(row) {\n    // vertice positions\n    this.engine.bindBuffer(this.vertexPosBuf[row], this.engine.shaderProgram.aVertexPosition);\n    // texture positions\n    this.engine.bindBuffer(this.vertexTexBuf[row], this.engine.shaderProgram.aTextureCoord);\n    // texturize\n    this.tileset.texture.attach();\n    // set shader\n    this.engine.shaderProgram.setMatrixUniforms();\n    // draw triangles\n    this.engine.gl.drawArrays(this.engine.gl.TRIANGLES, 0, this.vertexPosBuf[row].numItems);\n  }\n\n  // Draw Frame\n  draw() {\n    if (!this.loaded) return;\n    // Organize by Depth\n    this.spriteList?.sort((a, b) => a.pos.y - b.pos.y);\n    this.objectList?.sort((a, b) => a.pos.y - b.pos.y);\n    this.engine.mvPushMatrix();\n    this.engine.setCamera();\n    // Draw tile terrain row by row (back to front)\n    let k = 0;\n    let z = 0;\n    for (let j = 0; j < this.size[1]; j++) {\n      this.drawRow(j);\n      while (z < this.objectList.length && this.objectList[z].pos.y - this.bounds[1] <= j) {\n        this.objectList[z++].draw();\n      }\n      // draw each sprite in front of floor tiles if positioned in front\n      while (k < this.spriteList.length && this.spriteList[k].pos.y - this.bounds[1] <= j) {\n        this.spriteList[k++].draw(this.engine);\n      }\n    }\n    while (z < this.objectList.length) {\n      this.objectList[z++].draw();\n    }\n    // draw each sprite (fixes tearing)\n    while (k < this.spriteList.length) {\n      this.spriteList[k++].draw(this.engine);\n    }\n    this.engine.mvPopMatrix();\n  }\n\n  // Update\n  tick(time) {\n    if (!this.loaded) return;\n    this.checkInput(time);\n    this.spriteList.forEach(async (sprite) => sprite.tickOuter(time));\n  }\n\n  // read input\n  checkInput(time) {\n    if (time > this.lastKey + 100) {\n      let touchmap = this.engine.gamepad.checkInput();\n      this.lastKey = time;\n      switch (this.engine.keyboard.lastPressedKey(\"o\")) {\n        case \"o\":\n          if (this.audio) this.audio.playAudio();\n          break;\n      } // play audio\n      // Gamepad controls - TODO\n      if (touchmap[\"start\"] === 1) {\n        // select\n        if (this.audio && !this.audio.isPlaying()) this.audio.playAudio();\n        if (this.audio && this.audio.isPlaying()) this.audio.pauseAudio();\n      }\n      if (touchmap[\"select\"] === 1) {\n        // select\n        touchmap[\"select\"] = 0;\n        this.engine.toggleFullscreen();\n      }\n    }\n  }\n\n  // Check for zone inclusion\n  isInZone(x, y) {\n    return x >= this.bounds[0] && y >= this.bounds[1] && x < this.bounds[2] && y < this.bounds[3];\n  }\n\n  // Cell Walkable\n  isWalkable(x, y, direction) {\n    if (!this.isInZone(x, y)) return null;\n    for (let sprite in this.spriteDict) {\n      if (\n        // if sprite bypass & override\n        !this.spriteDict[sprite].walkable &&\n        this.spriteDict[sprite].pos.x === x &&\n        this.spriteDict[sprite].pos.y === y &&\n        !this.spriteDict[sprite].blocking &&\n        this.spriteDict[sprite].override\n      )\n        return true;\n\n      if (\n        // else if sprite blocking\n        !this.spriteDict[sprite].walkable &&\n        this.spriteDict[sprite].pos.x === x &&\n        this.spriteDict[sprite].pos.y === y &&\n        this.spriteDict[sprite].blocking\n      )\n        return false;\n    }\n    for (let object in this.objectDict) {\n      if (\n        // if sprite bypass & override\n        !this.objectDict[object].walkable &&\n        this.within(\n          x,\n          this.objectDict[object].pos.x - this.objectDict[object].scale.x * (this.objectDict[object].size.x / 2),\n          this.objectDict[object].pos.x\n        ) &&\n        this.within(\n          y,\n          this.objectDict[object].pos.y - this.objectDict[object].scale.y * (this.objectDict[object].size.y / 2),\n          this.objectDict[object].pos.y\n        ) &&\n        !this.objectDict[object].blocking &&\n        this.objectDict[object].override\n      )\n        return true;\n\n      if (\n        // else if object blocking\n        !this.objectDict[object].walkable &&\n        ((this.objectDict[object].pos.x === x && this.objectDict[object].pos.y === y) ||\n          (this.within(\n            x,\n            this.objectDict[object].pos.x - this.objectDict[object].scale.x * (this.objectDict[object].size.x / 2),\n            this.objectDict[object].pos.x,\n            true\n          ) &&\n            this.within(\n              y,\n              this.objectDict[object].pos.y - this.objectDict[object].scale.y * (this.objectDict[object].size.y / 2),\n              this.objectDict[object].pos.y,\n              true\n            ))) &&\n        this.objectDict[object].blocking\n      )\n        return false;\n    }\n    // else tile specific\n    return (this.walkability[(y - this.bounds[1]) * this.size[0] + x - this.bounds[0]] & direction) != 0;\n  }\n\n  within(x, a, b, include = false) {\n    if (include && x >= a && x <= b) return true;\n    if (!include && x > a && x < b) return true;\n    return false;\n  }\n\n  // Trigger Script\n  triggerScript(id) {\n    this.scripts.forEach((x) => {\n      if (x.id === id) {\n        this.runWhenLoaded(x.trigger.bind(this));\n      }\n    });\n  }\n\n  // Move the sprite\n  async moveSprite(id, location, running = false) {\n    return new Promise((resolve, reject) => {\n      let sprite = this.getSpriteById(id);\n      sprite.addAction(\n        new ActionLoader(this.engine, \"patrol\", [sprite.pos.toArray(), location, running ? 200 : 600, this], sprite, resolve)\n      );\n    });\n  }\n\n  // Sprite Dialogue\n  async spriteDialogue(id, dialogue, options = { autoclose: true }) {\n    return new Promise((resolve, reject) => {\n      let sprite = this.getSpriteById(id);\n      sprite.addAction(new ActionLoader(this.engine, \"dialogue\", [dialogue, false, options], sprite, resolve));\n    });\n  }\n\n  // Run Action configuration from JSON description\n  async runActions(actions) {\n    let self = this;\n    return await actions.reduce(async (prev, action) => {\n      return await prev\n        .then(\n          async () =>\n            new Promise((resolve, reject) => {\n              console.log(\"working on action ---- \", action);\n\n              if (!action) resolve();\n              try {\n                if (!action.scope) action.scope = self;\n                if (action.sprite) {\n                  let sprite = action.scope.getSpriteById(action.sprite);\n                  // apply action\n                  if (sprite && action.action) {\n                    console.log(\"playing scene action in zone\", self);\n                    let args = action.args;\n                    let options = args.pop();\n                    sprite.addAction(\n                      new ActionLoader(self.engine, action.action, [...args, { ...options }], sprite, () => resolve(self))\n                    );\n                  }\n                }\n                // trigger script\n                if (action.trigger) {\n                  console.log(\"trigger\", action);\n                  let sprite = action.scope.getSpriteById(\"avatar\");\n                  console.log(\"triggered by \", sprite);\n                  if (sprite && action.trigger) {\n                    sprite.addAction(\n                      new ActionLoader(self.engine, \"script\", [action.trigger, action.scope, () => resolve(self)], sprite)\n                    );\n                  }\n                }\n              } catch (e) {\n                reject(e);\n              }\n            })\n        )\n        .catch((err) => {\n          console.warn(\"err\", err.message);\n        });\n    }, Promise.resolve());\n  }\n\n  // Play a scene\n  async playScene(id) {\n    let self = this;\n    self.scenes.forEach(async function runScene(x) {\n      try {\n        if (!x.currentStep) {\n          x.currentStep = 0; // Starting\n        }\n        if (x.currentStep > self.scenes.length) {\n          return; // scene finished\n        }\n        if (x.id === id) {\n          // found scene\n          console.log(\"found scene ---> \", x);\n          await self.runActions(x.actions);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport Zone from \"./zone.jsx\";\nimport ActionQueue from \"./queue.jsx\";\nimport { Direction } from \"../utils/enums.jsx\";\n\nexport default class World {\n  constructor(engine) {\n    this.engine = engine;\n    this.zoneDict = {};\n    this.zoneList = [];\n    this.afterTickActions = new ActionQueue();\n    this.sortZones = this.sortZones.bind(this);\n    this.canWalk = this.canWalk.bind(this);\n    this.pathFind = this.pathFind.bind(this);\n  }\n\n  // push action into next frame\n  runAfterTick(action) {\n    this.afterTickActions.add(action);\n  }\n\n  // Sort zones for correct render order\n  sortZones() {\n    this.zoneList.sort((a, b) => a.bounds[1] - b.bounds[1]);\n  }\n\n  // Fetch and Load Zone\n  async loadZone(zoneId, remotely = false) {\n    if (this.zoneDict[zoneId]) return this.zoneDict[zoneId];\n    // Fetch Zone Remotely (allows for custom maps - with approved sprites / actions)\n    let z = new Zone(zoneId, this);\n    if (remotely) await z.loadRemote();\n    else await z.load();\n    this.zoneDict[zoneId] = z;\n    this.zoneList.push(z);\n    // Sort for correct render order\n    z.runWhenLoaded(this.sortZones);\n    return z;\n  }\n\n  // Remove Zone\n  removeZone(zoneId) {\n    this.zoneList = this.zoneList.filter((zone) => {\n      if (zone.id !== zoneId) {\n        return true;\n      } else {\n        zone.removeAllSprites();\n      }\n    });\n    delete this.zoneDict[zoneId];\n  }\n\n  // Remove Zones\n  removeAllZones() {\n    this.zoneList = [];\n    this.zoneDict = {};\n  }\n\n  // Update\n  tick(time) {\n    for (let z in this.zoneDict) this.zoneDict[z]?.tick(time);\n    this.afterTickActions.run(time);\n  }\n\n  // Draw Each Zone\n  draw() {\n    for (let z in this.zoneDict) this.zoneDict[z].draw(this.engine);\n  }\n\n  // Check for Cell inclusion\n  zoneContaining(x, y) {\n    for (let z in this.zoneDict) {\n      let zone = this.zoneDict[z];\n      if (zone.loaded && zone.isInZone(x, y)) return zone;\n    }\n    return null;\n  }\n\n  /**\n   * Finds a path if one exists between two points on the world\n   * @param Vector from\n   * @param Vector to\n   */\n  pathFind(from, to) {\n    // memory\n    let steps = [],\n      visited = [],\n      found = false,\n      world = this,\n      x = from[0],\n      y = from[1];\n    // loop through tiles\n    function buildPath(neighbour, path) {\n      let jsonNeighbour = JSON.stringify([neighbour[0], neighbour[1]]);\n      if (found) return false; // ignore anything further\n      if (neighbour[0] == to[0] && neighbour[1] == to[1]) {\n        // found it\n        found = true;\n        // if final location is blocked, stop in front\n        if (!world.canWalk(neighbour, jsonNeighbour, visited)) {\n          return [found, [...path]];\n        }\n        // otherwise return whole path\n        return [found, [...path, to]];\n      }\n      // Check walkability\n      if (!world.canWalk(neighbour, jsonNeighbour, visited)) return false;\n      // Visit Node & continue Search\n      visited.push(jsonNeighbour);\n      return world\n        .getNeighbours(...neighbour)\n        .map((neigh) => buildPath(neigh, [...path, [neighbour[0], neighbour[1], 600]]))\n        .filter((x) => x)\n        .flat();\n    }\n    // Fetch Steps\n    steps = world\n      .getNeighbours(x, y)\n      .map((neighbour) => buildPath(neighbour, [[from[0], from[1], 600]]))\n      .filter((x) => x[0]);\n    // Flatten Path from Segments\n    return steps.flat();\n  }\n\n  /**\n   *  Gets adjacencies\n   * @param int x\n   * @param int y\n   */\n  getNeighbours(x, y) {\n    let top = [x, y + 1, Direction.Up],\n      bottom = [x, y - 1, Direction.Down],\n      left = [x - 1, y, Direction.Left],\n      right = [x + 1, y, Direction.Right];\n    return [top, left, right, bottom];\n  }\n\n  // Should we skip?\n  canWalk(neighbour, jsonNeighbour, visited) {\n    let zone = this.zoneContaining(...neighbour);\n    if (\n      visited.indexOf(jsonNeighbour) >= 0 ||\n      !zone ||\n      !zone.isWalkable(...neighbour) ||\n      !zone.isWalkable(neighbour[0], neighbour[1], Direction.reverse(neighbour[2]))\n    ) {\n      return false;\n    }\n    return true;\n  }\n}\n\n// Pathfinding Algorithm\n// ---------------------\n// Start Point\n// Goal\n\n// Path []\n// Current Point\n\n// --- Func\n//\n// Get Neighbours - Foreach Neighbour\n//  - Check Neighbour\n//    - Check Goal\n//        - Found it - Return Path\n//        - Else\n//          - Get Neighbours\n\n// ----\n\n// GetNeighbours (x, y){\n//    results = []\n//    top = (x,y+1)\n//    bottom = (x,y-1)\n//    left = (x-1,y)\n//    right = (x+1,y)\n//\n//    for each above\n//      if (isWalkable()) add to results\n//\n//    return results\n// }\n\n// ----\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\n// Shaders\nimport fs from \"../engine/shaders/fs.jsx\";\nimport vs from \"../engine/shaders/vs.jsx\";\nimport World from \"../engine/core/world.jsx\";\n\n// Scene Object\nexport default class Scene {\n  constructor() {\n    // Shaders\n    this.shaders = {\n      fs: fs(),\n      vs: vs(),\n    };\n    // Singleton\n    if (!Scene._instance) {\n      Scene._instance = this;\n    }\n    return Scene._instance;\n  }\n\n  // Init Scene\n  init = async (engine) => {\n    // game Engine & Timing\n    Scene._instance.engine = engine;\n    // Init Game Engine Components\n    let world = (Scene._instance.world = new World(engine));\n    // Load Zones - TODO - Add injection / Props to make more Dynamic\n    await world.loadZone(\"room\");\n    // await world.loadZone(\"dungeon-top\");\n    // await world.loadZone(\"dungeon-bottom\");\n    world.zoneList.forEach((z) => z.runWhenLoaded(() => console.log(\"loading...done\")));\n  };\n\n  // Todo - Load scene remotely\n  loadSceneManifest = async (src) => {\n    // Put up loading Screen\n    //\n    // Fetch Manifest Remotely from Src\n    //\n    // Parse & Read in Zones\n    //\n    // Load Zones and Then once ready Remove Loading\n    //\n    // Start\n  };\n\n  // Todo - Load avatar into scene\n  loadAvatar = async (src, zoneId) => {\n    // Put up loading Screen\n    //\n    // Fetch Avatar Remotely from Src\n    //\n    // Parse & Read in & initialized\n    //\n    // Add to Zone\n  };\n\n  // Todo - Load avatar into scene\n  exportAvatar = async () => {\n    // Put up loading Screen\n    //\n    // Serialized and Compress Avatar\n    //\n    // Return Exported archive\n  };\n\n  // Render Loop\n  render = (engine, now) => {\n    // Build\n    Scene._instance.world.tick(now);\n    // Draw Frame\n    this.draw(engine);\n  };\n\n  // Draw Scene\n  draw = (engine) => {\n    Scene._instance.world.draw(engine);\n  };\n\n  // Keyboard handler for Scene\n  onKeyEvent = (e) => {\n    if (e.type === \"keydown\") {\n      Scene._instance.engine.keyboard.onKeyDown(e);\n    } else Scene._instance.engine.keyboard.onKeyUp(e);\n  };\n\n  // Mobile Touch handler for Scene\n  onTouchEvent = (e) => {\n    switch (e.type) {\n      case \"touchstart\":\n      case \"touchend\":\n      case \"touchmove\":\n      case \"touchcancel\":\n      default:\n        Scene._instance.engine.touch(e);\n        break;\n    }\n  };\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\nexport default function fs() {\n  return `\n  precision mediump float;\n\n  varying vec2 vTextureCoord;\n  varying vec3 vTransformedNormal;\n  varying vec4 vPosition;\n\n  varying vec3 vDiffuse;\n  varying vec3 vSpecular;\n  varying float vSpecularExponent;\n  varying highp vec3 vLighting;\n\n  uniform float useSampler;\n  uniform sampler2D uSampler;\n  \n  void main(void) {\n\n    if(useSampler == 1.0){\n      if(vLighting != vec3(0.0,0.0,0.0)){\n        highp vec4 texelColors = texture2D(uSampler, vTextureCoord);\n        gl_FragColor = vec4(texelColors.rgb * vLighting, texelColors.a);\n      }else{\n        highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n        gl_FragColor = vec4(texelColor.rgb, texelColor.a);\n      }\n    } else {\n      vec3 V = -normalize(vPosition.xyz);\n      vec3 L = normalize(vec3(1.0, 1.0, 1.0));\n      vec3 H = normalize(L + V);\n      vec3 N = normalize(vTransformedNormal);\n      vec3 color = vDiffuse * dot(N, L) + vSpecular * pow(dot(H, N), vSpecularExponent);\n      \n      if(vLighting != vec3(0.0,0.0,0.0))\n        gl_FragColor = vec4(color * vLighting, 1.0);\n      else\n        gl_FragColor = vec4(color, 1.0);\n    }\n\n    if(gl_FragColor.a < 0.1)\n      discard;\n  }\n`;\n}\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nexport default function vs() {\n  return `\n  attribute vec3 aVertexPosition;\n  attribute vec3 aVertexNormal;\n  attribute vec2 aTextureCoord;\n  attribute vec3 aDiffuse;\n  attribute vec3 aSpecular;\n  attribute float aSpecularExponent;\n\n  uniform mat4 uMVMatrix;\n  uniform mat4 uPMatrix;\n  uniform mat3 uNormalMatrix;\n\n  varying vec2 vTextureCoord;\n  varying vec3 vTransformedNormal;\n  varying vec4 vPosition;\n\n  varying vec3 vDiffuse;\n  varying vec3 vSpecular;\n  varying float vSpecularExponent;\n  varying highp vec3 vLighting;\n  \n  uniform vec3 u_scale;\n  \n  void main(void) {\n\n    vDiffuse = aDiffuse;\n    vSpecular = aSpecular;\n    vSpecularExponent = aSpecularExponent;\n\n    vec3 scaledPosition = aVertexPosition * u_scale;\n    vPosition = uMVMatrix * vec4(scaledPosition, 1.0);\n    gl_Position = uPMatrix * vPosition;\n\n    vTextureCoord = aTextureCoord;\n\n    highp vec3 ambientLight = vec3(0.8, 0.8, 0.8);\n    highp vec3 directionalLightColor = vec3(1, 1, 1);\n    highp vec3 directionalVector = normalize(vec3(1, 1, 0.75));\n\n    highp vec3 transformedNormal = uNormalMatrix * aVertexNormal;\n\n    highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);\n    vLighting = ambientLight + (directionalLightColor * directional);\n  }\n`;\n}\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./pixos.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./pixos.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/*                                                 *\\\n** ----------------------------------------------- **\n**             Calliope - Site Generator   \t       **\n** ----------------------------------------------- **\n**  Copyright (c) 2020-2021 - Kyle Derby MacInnis  **\n**                                                 **\n**    Any unauthorized distribution or transfer    **\n**       of this work is strictly prohibited.      **\n**                                                 **\n**               All Rights Reserved.              **\n** ----------------------------------------------- **\n\\*                                                 */\n\nimport React, { Component } from \"react\";\nimport { collect } from \"react-recollect\";\n// WebGL Component\nimport WebGLView from \"./components/WebGLView.jsx\";\n// Pixos Scene Provider\nimport SceneProvider from \"./scene/index.jsx\";\n// Style Plugin\nimport \"../less/pixos.css\";\n\nclass Pixos extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      scene: new SceneProvider(),\n      updated: Date.now(),\n    };\n  }\n\n  // Update world on Edit\n  componentWillReceiveProps(nextProps) {\n    console.log(nextProps);\n    if (JSON.stringify(this.props.networkString) != JSON.stringify(nextProps.networkString)) {\n      this.setState({\n        networkString: nextProps.networkString,\n        updated: Date.now(),\n      });\n    }\n  }\n\n  // Render World as Passed in String or FlatLand (Default)\n  render() {\n    const { updated, scene } = this.state;\n    return (\n      <div style={{ margin: 0 }}>\n        <WebGLView class=\"pixos\" key={`pixos-${updated}`} width={640} height={480} SceneProvider={scene} />\n      </div>\n    );\n  }\n}\n\nexport default collect(Pixos);\n"],"names":["init","length","untilFrame","finish","console","log","this","tick","time","loaded","facing","sprite","setFacing","endTime","startTime","frac","newFrame","Math","floor","animFrame","setFrame","fromZoneId","from","toZoneId","to","zone","world","loadZone","fromZone","toZone","Vector","Direction","round","x","y","set","pos","lerp","isInZone","removeSprite","id","runAfterTick","addSprite","bind","hx","hotspotOffset","hy","switchRenderZone","z","getHeight","prompt","scrolling","options","engine","text","line","completed","lastKey","Date","getTime","autoclose","checkInput","textbox","scrollText","skipChar","keyboard","lastPressedCode","arr","split","pop","join","setGreeting","speech","clearHud","speechbox","loadImage","char","lastPressedKey","moveLength","arguments","audio","AudioLoader","pauseAudio","playAudio","audioContext","AudioContext","analyser","createAnalyser","audioSource","createMediaElementSource","connect","destination","fbc_array","Uint8Array","frequencyBinCount","getByteFrequencyData","bar_pos","bar_width","bar_height","i","addAction","faceDir","lastPressed","displayText","shift","lastText","speak","onClose","touchmap","gamepad","greeting","offset","zoneContaining","spriteList","filter","interact","forEach","faceChange","spriteDict","result","onStep","direction","pathFind","hasMoves","moveList","moveIndex","move","last","currentAction","ActionLoader","isWalkable","toArray","triggerId","onCompleted","triggerScript","Promise","all","scripts","map","trigger","call","then","Avatar","handleWalk","actionList","ret","bindCamera","cameraPosition","key","removeZone","moveTime","dp","Sprite","ActionQueue","actions","action","push","args","templateLoaded","drawOffset","fixed","scale","actionDict","portrait","onLoadActions","getTexCoords","inventory","onTilesetOrTextureLoaded","blocking","override","data","Object","assign","add","instanceData","src","sheetSize","tileSize","frames","zones","texture","loadTexture","runWhenLoaded","vertexTexBuf","createBuffer","gl","DYNAMIC_DRAW","enableSpeech","loadSpeech","mipmap","speechTexBuf","getSpeechBubbleTexture","portraitSrc","tileset","runWhenDefinitionLoaded","onTilesetDefinitionLoaded","error","s","ts","v","poly","flat","vertexPosBuf","STATIC_DRAW","speechVerBuf","getSpeechBubbleVertices","writeText","run","t","ss","bl","tr","mvPushMatrix","translate","uViewMat","rotate","degToRad","cameraAngle","bindBuffer","shaderProgram","aVertexPosition","aTextureCoord","aDiffuse","aSpecular","aSpecularExponentAttribute","attach","setMatrixUniforms","depthFunc","ALWAYS","drawArrays","TRIANGLES","numItems","LESS","mvPopMatrix","frame","updateBuffer","removeAction","sort","a","b","dt","toRemove","onComplete","showBubble","state","NPC","window","ethereum","Chest","now","None","Right","Up","Left","Down","All","fromOffset","toOffset","dir","reverse","ccw","Top","spriteSequence","ModelObject","size","maxX","maxY","maxZ","mesh","minX","minY","minZ","vertices","slice","max","objLoader","initMeshBuffers","layout","OBJ","vertexBuffer","values","materialsByIndex","mtl","_buildBuffer","ARRAY_BUFFER","diffuse","specular","specularExponent","aSpecularExponent","textureBuffer","normalBuffer","aVertexNormal","bufferInfo","ELEMENT_ARRAY_BUFFER","indicesPerMaterial","drawElements","UNSIGNED_SHORT","vertexData","makeBufferData","bufferData","applyAttributePointers","materialBuffer","makeIndexBufferDataForMaterials","materialIndices","indexBuffer","enableVertexAttribArray","textures","drawObj","disableVertexAttribArray","Tileset","tiles","onDefinitionLoadActions","onTextureLoaded","definitionLoaded","keys","k","bgColor","clearColor","name","geometry","vertex","texId","tileOffset","surfaces","tileId","type","walkPoly","Action","callback","creationArgs","apply","TilesetLoader","tilesets","fetch","Resources","fileResponse","ok","json","content","onJsonLoaded","instance","require","SpriteLoader","definitions","instances","afterLoad","runConfigure","Type","ObjectLoader","model","update","modelreq","obj","mtlTextureRoot","downloadMtlTextures","enableWTextureCoord","downloadModels","models","load","onLoad","configure","loop","playing","Audio","addEventListener","currentTime","play","audioPromise","undefined","_","err","info","pause","create","matrix","Float32Array","create3","perspective","fovy","aspect","near","far","f","tan","Infinity","nf","m1","m2","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","rad","axis","len","hypot","Error","sin","c","cos","b00","b01","b02","b10","b11","b12","b20","b21","b22","mat","dest","normalFromMat4","out","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","det","vec","n","sqrt","sub","l","w","negate","vec2","tilesetRequestUrl","zoneRequestUrl","artResourceUrl","art","bounds","audioSrc","cells","T","sprites","scenes","scope","playScene","spriteDialogue","moveSprite","objects","Default","up","right","down","left","MyFireplace","Fireplace","frameTime","triggerTime","AnimatedSprite","lastTime","accumTime","random","WaterSpurt","Spurt","AnimatedTile","Door","removeAllZones","MyDoor","MyTree","XMasTree","MyAirKnight","request","method","account","msgParams","JSON","stringify","domain","chainId","verifyingContract","version","message","game","contents","wallet","primaryType","types","EIP712Domain","Item","Person","params","web3","currentProvider","sendAsync","alert","recovered","sigUtil","recoverTypedSignature_v4","parse","sig","ethUtil","toChecksumAddress","AirKnight","MyDarkness","Darkness","MyEarthKnight","EarthKnight","MyFireKnight","FireKnight","MyWaterKnight","WaterKnight","MyBlueChest","BlueChest","MyMetalChest","IronChest","MyRedChest","RedChest","MyWoodChest","WoodChest","FLOOR","WATER","EMPTY","N_STAIR","N_STAIRWALL","S_STAIR","S_STAIRWALL","L_STAIR","L_STAIRWALL","R_STAIR","R_STAIRWALL","N_WALL","S_WALL","L_WALL","R_WALL","NLW_CORNER","NRW_CORNER","SLW_CORNER","SRW_CORNER","NLW_COLUMN","NRW_COLUMN","SLW_COLUMN","SRW_COLUMN","NRW_WATER_COLUMN","NLW_WATER_COLUMN","SLW_WATER_COLUMN","SRW_WATER_COLUMN","NW_NPIT","LW_LPIT","RW_RPIT","SW_SPIT","C_WALKWAY","V_WALKWAY","H_WALKWAY","FLOOR_BR","FLOOR_R","FLOOR_TR","FLOOR_T","FLOOR_TL","FLOOR_L","FLOOR_BL","FLOOR_B","FLOOR_CBR","FLOOR_CTR","FLOOR_CTL","FLOOR_CBL","FLOOR_V","FLOOR_H","FLOOR_C","EMPTY_BR","EMPTY_R","EMPTY_TR","EMPTY_T","EMPTY_TL","EMPTY_L","EMPTY_BL","EMPTY_B","EMPTY_CBR","EMPTY_CTR","EMPTY_CTL","EMPTY_CBL","STAIR","WALL","WALL_WATER","WATER_WALL","FLAT_ALL","parseInt","FLAT_NONE","STAIR_R","STAIR_T","STAIR_L","STAIR_B","WALL_R","WALL_T","WALL_L","WALL_B","___CSS_LOADER_EXPORT___","module","exports","cssWithMappingToString","list","toString","item","needLayer","concat","modules","media","dedupe","supports","layer","alreadyImportedModules","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","sourceMapping","sourceURLs","sources","source","sourceRoot","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","displayName","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","prototype","caller","callee","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","component","isMemo","ForwardRef","render","Memo","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","descriptor","e","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","Symbol","for","d","g","h","m","p","q","r","u","$$typeof","A","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","Fragment","Lazy","Portal","Profiler","StrictMode","Suspense","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","currentComponent","isBatchUpdating","isInBrowser","listeners","Map","manualListeners","nextVersionMap","WeakMap","proxyIsMuted","redirectToNext","store","PATH","ORIGINAL","LS_KEYS","isObject","constructor","isArray","Array","isMap","isSet","Set","isTarget","isInternal","prop","toStringTag","isFunction","clone","target","getValue","get","setValue","mutableTarget","value","getSize","updateDeep","updater","path","processLevel","updated","next","handleEntry","processed","entries","setContents","clear","whileMuted","cb","joiner","makeUserString","propPath","makeInternalString","extend","basePath","extendToUserString","addProp","writable","hasLocalStorage","localStorage","setItem","DEBUG_ON","DEBUG_OFF","DEBUG","getItem","debug","logGet","groupCollapsed","groupEnd","logSet","subscribers","dispatchUpdateInNextStore","addListener","pathString","components","createShallow","Proxy","targetObject","Reflect","nextVersion","applyTarget","finalTarget","newProxiedValue","has","notifyTarget","includes","isArrayMutation","proxiedArgs","updateResult","rootPath","ownKeys","newValueProxy","deleteProperty","logDelete","queue","changedPaths","targetPath","targetChangedSize","initialSize","newValue","thisPropPath","reduce","thisProp","thisValue","clone$1","userFriendlyPropPath","listenerPath","propsUpdated","_name","logUpdate","changedProps","renderedComponents","notifyByPath","componentStack","stopRecordingGetsForComponent","getStoreClone","shallowClone","ComponentToWrap","WrappedComponent","super","_isMounted","_isMounting","_isRendering","componentDidMount","componentDidUpdate","componentWillUnmount","componentToRemove","filteredComponents","existingComponent","setState","EnvPropTypes","__RR__","debugOn","debugOff","internals","warn","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","css","sourceMap","references","addElementStyle","byIndex","splice","api","domAPI","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","styleTarget","document","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","appendChild","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","resolve","mesh_1","material_1","Material","MaterialLibrary","layout_1","Layout","TYPES","DuplicateAttributeException","Attribute","utils_1","downloadMeshes","deleteMeshBuffers","Mesh","extendStatics","__extends","setPrototypeOf","__proto__","hasOwnProperty","TypeError","String","__","__values","iterator","done","__esModule","_super","attribute","normalized","sizeOfType","sizeInBytes","e_1","_a","e_2","_b","attributeMap","maxStrideMultiple","attributes_1","attributes_1_1","e_1_1","stride","attributes_2","attributes_2_1","e_2_1","POSITION","FLOAT","NORMAL","TANGENT","BITANGENT","UV","MATERIAL_INDEX","SHORT","MATERIAL_ENABLED","AMBIENT","DIFFUSE","SPECULAR","SPECULAR_EXPONENT","EMISSIVE","TRANSMISSION_FILTER","DISSOLVE","ILLUMINATION","REFRACTION_INDEX","SHARPNESS","MAP_DIFFUSE","MAP_AMBIENT","MAP_SPECULAR","MAP_SPECULAR_EXPONENT","MAP_DISSOLVE","ANTI_ALIASING","MAP_BUMP","MAP_DISPLACEMENT","MAP_DECAL","MAP_EMISSIVE","__read","ar","ambient","emissive","transmissionFilter","dissolve","transparency","illumination","refractionIndex","sharpness","mapDiffuse","colorCorrection","horizontalBlending","verticalBlending","boostMipMapSharpness","modifyTextureMap","brightness","contrast","turbulence","clamp","textureResolution","bumpMultiplier","imfChan","filename","mapAmbient","mapSpecular","mapSpecularExponent","mapDissolve","antiAliasing","mapBump","mapDisplacement","mapDecal","mapEmissive","mapReflections","SENTINEL_MATERIAL","currentMaterial","materials","parse_newmtl","tokens","parseColor","parseFloat","parse_Ka","parse_Kd","parse_Ks","parse_Ke","parse_Tf","parse_d","parse_illum","parse_Ni","parse_Ns","parse_sharpness","parse_cc","parse_blendu","parse_blendv","parse_boost","parse_mm","parse_ost","option","defaultValue","parse_o","parse_s","parse_t","parse_texres","parse_clamp","parse_bm","parse_imfchan","parse_type","reflectionType","parseOptions","optionsToValues","token","startsWith","substr","optionMethod","parseMap","optionsString","replace","parse_map_Ka","parse_map_Kd","parse_map_Ks","parse_map_Ke","parse_map_Ns","parse_map_d","parse_map_aat","parse_map_bump","parse_bump","parse_disp","parse_decal","parse_refl","lines","lines_1","lines_1_1","trim","directive","parseMethod","__generator","thisArg","body","label","sent","trys","ops","verb","op","step","__spreadArray","pack","objectData","tangents","bitangents","vertexNormals","indices","textureStride","verts","vertNormals","materialNamesByIndex","materialIndicesByName","currentMaterialIndex","currentObjectByMaterialIndex","unpacked","norms","hashindices","VERTEX_RE","NORMAL_RE","TEXTURE_RE","FACE_RE","WHITESPACE_RE","USE_MATERIAL_RE","elements","test","coords","materialName","triangles","triangulate","triangles_1","triangles_1_1","triangle","j","eleLen","hash","normalIndex","vertexMaterialIndices","materialNames","calcTangentsAndBitangents","calculateTangentsAndBitangents","assert","normals","uvs","i0","i1","i2","x_v0","y_v0","z_v0","x_uv0","y_uv0","x_v1","y_v1","z_v1","x_uv1","y_uv1","x_deltaPos1","y_deltaPos1","z_deltaPos1","x_deltaPos2","y_deltaPos2","z_deltaPos2","x_uvDeltaPos1","y_uvDeltaPos1","x_uvDeltaPos2","y_uvDeltaPos2","rInv","abs","x_tangent","y_tangent","z_tangent","x_bitangent","y_bitangent","z_bitangent","x_n0","y_n0","z_n0","x_n1","y_n1","z_n1","x_n2","y_n2","z_n2","n0_dot_t","n1_dot_t","n2_dot_t","x_resTangent0","y_resTangent0","z_resTangent0","x_resTangent1","y_resTangent1","z_resTangent1","x_resTangent2","y_resTangent2","z_resTangent2","magTangent0","magTangent1","magTangent2","n0_dot_bt","n1_dot_bt","n2_dot_bt","x_resBitangent0","y_resBitangent0","z_resBitangent0","x_resBitangent1","y_resBitangent1","z_resBitangent1","x_resBitangent2","y_resBitangent2","z_resBitangent2","magBitangent0","magBitangent1","magBitangent2","e_3","buffer","ArrayBuffer","dataView","DataView","vertexOffset","_c","setFloat32","setInt16","materialIndex","material","e_3_1","makeIndexBufferData","Uint16Array","_this","mtlIdx","addMaterialLibrary","name_1","root","mapAttributes","endsWith","_loop_1","attr","mapData","url","response","blob","image","Image","URL","createObjectURL","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","glTexture","onload","mapAttributes_1","mapAttributes_1_1","itemSize","arrayView","finished","_loop_2","parts","modelOptions","namePromise","meshPromise","mtlPromise","mtl_1","lastIndexOf","parsed","models_1","models_1_1","ms","ms_1","ms_1_1","name_2","nameAndURLs","completionCallback","meshes","_loop_3","mesh_name","e_4","ms_2","ms_2_1","name_3","e_4_1","deleteBuffer","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","getter","definition","enumerable","Texture","onImageLoaded","activeTexture","TEXTURE0","uniform1i","samplerUniform","minecraftia","FontFace","textScrollBox","ctx","dirty","scrollY","fontSize","font","align","background","border","lineWidth","corner","scrollBox","width","color","fontStyle","height","setOptions","cleanit","dontFitText","setFont","getTextPos","fitText","fontStr","textHeight","ceil","textPos","textAlign","textBaseline","words","space","word","measureText","unshift","maxScroll","bw","lineJoin","strokeStyle","strokeRect","fillStyle","fillRect","barsize","drawImage","drawBorder","drawPortrait","save","drawScrollBox","beginPath","rect","clip","setTransform","fillText","restore","CanvasRenderingContext2D","roundRect","moveTo","arcTo","closePath","GamePad","showTrace","showDebug","opacity","start","select","touches","radius","button_offset","colours","red","green","blue","purple","yellow","cyan","black","white","joystick","dust","stick","ball","buttons_layout","controller","Controller","resize","loadCanvas","canvas","draw","buttons","setTimeout","ready","indexOf","getPosition","pageX","pageY","disableScroll","changedTouches","reset","delta","enableScroll","dx","dy","clearRect","trace","xPosition","yPosition","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","removeEventListener","preventDefault","passive","stopPropagation","ControllerStick","ControllerButtons","arc","PI","fill","touch","dist","button","active","hit","stroke","isNaN","hint","Speech","getContext","pixelStorei","UNPACK_FLIP_Y_WEBGL","LINEAR","LINEAR_MIPMAP_NEAREST","generateMipmap","txt","scroll","GLEngine","hud","gamepadcanvas","vsSource","vs","fsSource","fs","self","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","getAttribLocation","pMatrixUniform","getUniformLocation","mvMatrixUniform","nMatrixUniform","useSampler","sampler","uniformMatrix4fv","uProjMat","normalMat","uniformMatrix3fv","uniform3fv","uniform1f","attrs","attrName","layoutKey","vertexAttribPointer","modelViewMatrixStack","globalStore","speeches","fov","cameraOffset","setCamera","scene","gp","fullscreen","listen","viewportWidth","viewportHeight","clearDepth","enable","DEPTH_TEST","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","BLEND","initializedWebGl","initShaderProgram","shaders","initProjection","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","fieldOfView","clientWidth","clientHeight","viewport","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","halfHeight","grad","createLinearGradient","addColorStop","globalAlpha","top","bottom","partX","partY","rotation","alpha","requestId","requestAnimationFrame","clearScreen","exitFullscreen","parentElement","requestFullscreen","buf","bufferSubData","copy","canvasTexture","handleLoadedTexture","textureCanvas","cancelAnimationFrame","degrees","Keyboard","_instance","activeKeys","activeCodes","fromCharCode","keyCode","toLowerCase","shiftKey","lower","maxI","ignore","WebGLView","SceneProvider","ref","useRef","hudRef","gamepadRef","mmRef","onKeyEvent","onTouchEvent","useState","dynamicWidth","innerWidth","dynamicHeight","innerHeight","screenSize","getDimension","setDimension","loadFonts","fonts","useEffect","current","glEngine","close","position","padding","maxWidth","maxHeight","onKeyDownCapture","nativeEvent","onKeyUpCapture","tabIndex","zIndex","className","display","hidden","onMouseUp","onMouseDown","onMouseMove","onTouchMoveCapture","onTouchCancelCapture","onTouchStartCapture","onTouchEndCapture","class","Zone","zoneId","objectDict","objectList","spriteLoader","objectLoader","tsLoader","onTilesetOrSpriteLoaded","loadSprite","loadObject","walkability","vertexTexCoords","cell","tilePos","getWalkability","getTileVertices","getTileTexCoords","every","newObject","newSprite","removeAllActions","getUV","getTileWalkPoly","uv","row","drawRow","tickOuter","isPlaying","toggleFullscreen","walkable","within","include","running","reject","getSpriteById","dialogue","prev","currentStep","runActions","World","zoneDict","zoneList","afterTickActions","sortZones","canWalk","remotely","loadRemote","removeAllSprites","visited","found","buildPath","neighbour","jsonNeighbour","getNeighbours","neigh","Scene","onKeyDown","onKeyUp","Pixos","nextProps","networkString","margin","Component","collect"],"sourceRoot":""}